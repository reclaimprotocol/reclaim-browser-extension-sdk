var ru={153:(n,e,t)=>{t.d(e,{Ey:()=>a,Ru:()=>f.Ru,E$:()=>f.E$,D_:()=>f.D_,w9:()=>d}),t(770);function o(O){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},o(O)}function s(O,v){for(var w=0;w<v.length;w++){var U=v[w];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(O,c(U.key),U)}}function c(O){var v=(function(w,U){if(o(w)!="object"||!w)return w;var T=w[Symbol.toPrimitive];if(T!==void 0){var N=T.call(w,U);if(o(N)!="object")return N;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(w)})(O,"string");return o(v)=="symbol"?v:v+""}var a=Object.freeze({BACKGROUND:"background",CONTENT:"content",POPUP:"popup",INIT:"init",VERIFICATION:"verification",FETCH:"fetch",PROVIDER:"provider",CLAIM:"claim",PROOF:"proof",OFFSCREEN:"offscreen",POLYFILLS:"polyfills",SESSION_TIMER:"session-timer"}),d=new((function(){function O(){(function(T,N){if(!(T instanceof N))throw new TypeError("Cannot call a class as a function")})(this,O),this.enabled=!0,this.allowedTypes=new Set}return v=O,w=[{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1}},{key:"setTypes",value:function(T){Array.isArray(T)&&(this.allowedTypes=new Set(T))}},{key:"clearTypes",value:function(){this.allowedTypes.clear()}},{key:"log",value:function(T){var N;if(this.enabled&&(!(this.allowedTypes.size>0)||this.allowedTypes.has(T))){for(var _=O.typeColor(T),P=arguments.length,K=new Array(P>1?P-1:0),M=1;M<P;M++)K[M-1]=arguments[M];(N=console).log.apply(N,["%c[".concat(T,"][INFO]"),"color: ".concat(_,"; font-weight: bold;")].concat(K))}}},{key:"info",value:function(T){var N;if(this.enabled&&(!(this.allowedTypes.size>0)||this.allowedTypes.has(T))){for(var _=O.typeColor(T),P=arguments.length,K=new Array(P>1?P-1:0),M=1;M<P;M++)K[M-1]=arguments[M];(N=console).info.apply(N,["%c[".concat(T,"][INFO]"),"color: ".concat(_,"; font-weight: bold;")].concat(K))}}},{key:"warn",value:function(T){var N;if(this.enabled&&(!(this.allowedTypes.size>0)||this.allowedTypes.has(T))){for(var _=O.typeColor(T,"warn"),P=arguments.length,K=new Array(P>1?P-1:0),M=1;M<P;M++)K[M-1]=arguments[M];(N=console).warn.apply(N,["%c[".concat(T,"][WARN]"),"color: ".concat(_,"; font-weight: bold;")].concat(K))}}},{key:"error",value:function(T){var N;if(this.enabled&&(!(this.allowedTypes.size>0)||this.allowedTypes.has(T))){for(var _=O.typeColor(T,"error"),P=arguments.length,K=new Array(P>1?P-1:0),M=1;M<P;M++)K[M-1]=arguments[M];(N=console).error.apply(N,["%c[".concat(T,"][ERROR]"),"color: ".concat(_,"; font-weight: bold;")].concat(K))}}}],U=[{key:"typeColor",value:function(T){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"info",_={background:"#0074D9",content:"#2ECC40",popup:"#FF851B",init:"#B10DC9",verification:"#FF4136",fetch:"#39CCCC",provider:"#FFDC00",claim:"#7FDBFF",proof:"#85144b",offscreen:"#AAAAAA",polyfills:"#0074D9","session-timer":"#2ECC40"},P=_[Object.keys(_).find(function(K){return T.toLowerCase().includes(K)})]||"#888888";return N!=="info"&&(P={info:"",warn:"#FFA500",error:"#FF0000"}[N]||P),P}}],w&&s(v.prototype,w),U&&s(v,U),Object.defineProperty(v,"prototype",{writable:!1}),v;var v,w,U})()),f=t(859),E=t(606);E!==void 0&&E.env?d.disable():d.enable()},251:(n,e)=>{/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */e.read=function(t,o,s,c,a){var d,f,E=8*a-c-1,O=(1<<E)-1,v=O>>1,w=-7,U=s?a-1:0,T=s?-1:1,N=t[o+U];for(U+=T,d=N&(1<<-w)-1,N>>=-w,w+=E;w>0;d=256*d+t[o+U],U+=T,w-=8);for(f=d&(1<<-w)-1,d>>=-w,w+=c;w>0;f=256*f+t[o+U],U+=T,w-=8);if(d===0)d=1-v;else{if(d===O)return f?NaN:1/0*(N?-1:1);f+=Math.pow(2,c),d-=v}return(N?-1:1)*f*Math.pow(2,d-c)},e.write=function(t,o,s,c,a,d){var f,E,O,v=8*d-a-1,w=(1<<v)-1,U=w>>1,T=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,N=c?0:d-1,_=c?1:-1,P=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(E=isNaN(o)?1:0,f=w):(f=Math.floor(Math.log(o)/Math.LN2),o*(O=Math.pow(2,-f))<1&&(f--,O*=2),(o+=f+U>=1?T/O:T*Math.pow(2,1-U))*O>=2&&(f++,O/=2),f+U>=w?(E=0,f=w):f+U>=1?(E=(o*O-1)*Math.pow(2,a),f+=U):(E=o*Math.pow(2,U-1)*Math.pow(2,a),f=0));a>=8;t[s+N]=255&E,N+=_,E/=256,a-=8);for(f=f<<a|E,v+=a;v>0;t[s+N]=255&f,N+=_,f/=256,v-=8);t[s+N-_]|=128*P}},287:(n,e,t)=>{/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */const o=t(526),s=t(251),c=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.hp=f,e.IS=50;const a=2147483647;function d(l){if(l>a)throw new RangeError('The value "'+l+'" is invalid for option "size"');const g=new Uint8Array(l);return Object.setPrototypeOf(g,f.prototype),g}function f(l,g,y){if(typeof l=="number"){if(typeof g=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(l)}return E(l,g,y)}function E(l,g,y){if(typeof l=="string")return(function(W,fe){if(typeof fe=="string"&&fe!==""||(fe="utf8"),!f.isEncoding(fe))throw new TypeError("Unknown encoding: "+fe);const Ce=0|N(W,fe);let Ke=d(Ce);const rt=Ke.write(W,fe);return rt!==Ce&&(Ke=Ke.slice(0,rt)),Ke})(l,g);if(ArrayBuffer.isView(l))return(function(W){if(be(W,Uint8Array)){const fe=new Uint8Array(W);return U(fe.buffer,fe.byteOffset,fe.byteLength)}return w(W)})(l);if(l==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l);if(be(l,ArrayBuffer)||l&&be(l.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(be(l,SharedArrayBuffer)||l&&be(l.buffer,SharedArrayBuffer)))return U(l,g,y);if(typeof l=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const F=l.valueOf&&l.valueOf();if(F!=null&&F!==l)return f.from(F,g,y);const H=(function(W){if(f.isBuffer(W)){const fe=0|T(W.length),Ce=d(fe);return Ce.length===0||W.copy(Ce,0,0,fe),Ce}if(W.length!==void 0)return typeof W.length!="number"||ot(W.length)?d(0):w(W);if(W.type==="Buffer"&&Array.isArray(W.data))return w(W.data)})(l);if(H)return H;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof l[Symbol.toPrimitive]=="function")return f.from(l[Symbol.toPrimitive]("string"),g,y);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof l)}function O(l){if(typeof l!="number")throw new TypeError('"size" argument must be of type number');if(l<0)throw new RangeError('The value "'+l+'" is invalid for option "size"')}function v(l){return O(l),d(l<0?0:0|T(l))}function w(l){const g=l.length<0?0:0|T(l.length),y=d(g);for(let F=0;F<g;F+=1)y[F]=255&l[F];return y}function U(l,g,y){if(g<0||l.byteLength<g)throw new RangeError('"offset" is outside of buffer bounds');if(l.byteLength<g+(y||0))throw new RangeError('"length" is outside of buffer bounds');let F;return F=g===void 0&&y===void 0?new Uint8Array(l):y===void 0?new Uint8Array(l,g):new Uint8Array(l,g,y),Object.setPrototypeOf(F,f.prototype),F}function T(l){if(l>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|l}function N(l,g){if(f.isBuffer(l))return l.length;if(ArrayBuffer.isView(l)||be(l,ArrayBuffer))return l.byteLength;if(typeof l!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof l);const y=l.length,F=arguments.length>2&&arguments[2]===!0;if(!F&&y===0)return 0;let H=!1;for(;;)switch(g){case"ascii":case"latin1":case"binary":return y;case"utf8":case"utf-8":return Me(l).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*y;case"hex":return y>>>1;case"base64":return Rt(l).length;default:if(H)return F?-1:Me(l).length;g=(""+g).toLowerCase(),H=!0}}function _(l,g,y){let F=!1;if((g===void 0||g<0)&&(g=0),g>this.length||((y===void 0||y>this.length)&&(y=this.length),y<=0)||(y>>>=0)<=(g>>>=0))return"";for(l||(l="utf8");;)switch(l){case"hex":return Y(this,g,y);case"utf8":case"utf-8":return V(this,g,y);case"ascii":return X(this,g,y);case"latin1":case"binary":return se(this,g,y);case"base64":return k(this,g,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ue(this,g,y);default:if(F)throw new TypeError("Unknown encoding: "+l);l=(l+"").toLowerCase(),F=!0}}function P(l,g,y){const F=l[g];l[g]=l[y],l[y]=F}function K(l,g,y,F,H){if(l.length===0)return-1;if(typeof y=="string"?(F=y,y=0):y>2147483647?y=2147483647:y<-2147483648&&(y=-2147483648),ot(y=+y)&&(y=H?0:l.length-1),y<0&&(y=l.length+y),y>=l.length){if(H)return-1;y=l.length-1}else if(y<0){if(!H)return-1;y=0}if(typeof g=="string"&&(g=f.from(g,F)),f.isBuffer(g))return g.length===0?-1:M(l,g,y,F,H);if(typeof g=="number")return g&=255,typeof Uint8Array.prototype.indexOf=="function"?H?Uint8Array.prototype.indexOf.call(l,g,y):Uint8Array.prototype.lastIndexOf.call(l,g,y):M(l,[g],y,F,H);throw new TypeError("val must be string, number or Buffer")}function M(l,g,y,F,H){let W,fe=1,Ce=l.length,Ke=g.length;if(F!==void 0&&((F=String(F).toLowerCase())==="ucs2"||F==="ucs-2"||F==="utf16le"||F==="utf-16le")){if(l.length<2||g.length<2)return-1;fe=2,Ce/=2,Ke/=2,y/=2}function rt($e,Ve){return fe===1?$e[Ve]:$e.readUInt16BE(Ve*fe)}if(H){let $e=-1;for(W=y;W<Ce;W++)if(rt(l,W)===rt(g,$e===-1?0:W-$e)){if($e===-1&&($e=W),W-$e+1===Ke)return $e*fe}else $e!==-1&&(W-=W-$e),$e=-1}else for(y+Ke>Ce&&(y=Ce-Ke),W=y;W>=0;W--){let $e=!0;for(let Ve=0;Ve<Ke;Ve++)if(rt(l,W+Ve)!==rt(g,Ve)){$e=!1;break}if($e)return W}return-1}function re(l,g,y,F){y=Number(y)||0;const H=l.length-y;F?(F=Number(F))>H&&(F=H):F=H;const W=g.length;let fe;for(F>W/2&&(F=W/2),fe=0;fe<F;++fe){const Ce=parseInt(g.substr(2*fe,2),16);if(ot(Ce))return fe;l[y+fe]=Ce}return fe}function G(l,g,y,F){return vt(Me(g,l.length-y),l,y,F)}function D(l,g,y,F){return vt((function(H){const W=[];for(let fe=0;fe<H.length;++fe)W.push(255&H.charCodeAt(fe));return W})(g),l,y,F)}function C(l,g,y,F){return vt(Rt(g),l,y,F)}function j(l,g,y,F){return vt((function(H,W){let fe,Ce,Ke;const rt=[];for(let $e=0;$e<H.length&&!((W-=2)<0);++$e)fe=H.charCodeAt($e),Ce=fe>>8,Ke=fe%256,rt.push(Ke),rt.push(Ce);return rt})(g,l.length-y),l,y,F)}function k(l,g,y){return g===0&&y===l.length?o.fromByteArray(l):o.fromByteArray(l.slice(g,y))}function V(l,g,y){y=Math.min(l.length,y);const F=[];let H=g;for(;H<y;){const W=l[H];let fe=null,Ce=W>239?4:W>223?3:W>191?2:1;if(H+Ce<=y){let Ke,rt,$e,Ve;switch(Ce){case 1:W<128&&(fe=W);break;case 2:Ke=l[H+1],(192&Ke)==128&&(Ve=(31&W)<<6|63&Ke,Ve>127&&(fe=Ve));break;case 3:Ke=l[H+1],rt=l[H+2],(192&Ke)==128&&(192&rt)==128&&(Ve=(15&W)<<12|(63&Ke)<<6|63&rt,Ve>2047&&(Ve<55296||Ve>57343)&&(fe=Ve));break;case 4:Ke=l[H+1],rt=l[H+2],$e=l[H+3],(192&Ke)==128&&(192&rt)==128&&(192&$e)==128&&(Ve=(15&W)<<18|(63&Ke)<<12|(63&rt)<<6|63&$e,Ve>65535&&Ve<1114112&&(fe=Ve))}}fe===null?(fe=65533,Ce=1):fe>65535&&(fe-=65536,F.push(fe>>>10&1023|55296),fe=56320|1023&fe),F.push(fe),H+=Ce}return(function(W){const fe=W.length;if(fe<=ne)return String.fromCharCode.apply(String,W);let Ce="",Ke=0;for(;Ke<fe;)Ce+=String.fromCharCode.apply(String,W.slice(Ke,Ke+=ne));return Ce})(F)}f.TYPED_ARRAY_SUPPORT=(function(){try{const l=new Uint8Array(1),g={foo:function(){return 42}};return Object.setPrototypeOf(g,Uint8Array.prototype),Object.setPrototypeOf(l,g),l.foo()===42}catch{return!1}})(),f.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),f.poolSize=8192,f.from=function(l,g,y){return E(l,g,y)},Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array),f.alloc=function(l,g,y){return(function(F,H,W){return O(F),F<=0?d(F):H!==void 0?typeof W=="string"?d(F).fill(H,W):d(F).fill(H):d(F)})(l,g,y)},f.allocUnsafe=function(l){return v(l)},f.allocUnsafeSlow=function(l){return v(l)},f.isBuffer=function(l){return l!=null&&l._isBuffer===!0&&l!==f.prototype},f.compare=function(l,g){if(be(l,Uint8Array)&&(l=f.from(l,l.offset,l.byteLength)),be(g,Uint8Array)&&(g=f.from(g,g.offset,g.byteLength)),!f.isBuffer(l)||!f.isBuffer(g))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(l===g)return 0;let y=l.length,F=g.length;for(let H=0,W=Math.min(y,F);H<W;++H)if(l[H]!==g[H]){y=l[H],F=g[H];break}return y<F?-1:F<y?1:0},f.isEncoding=function(l){switch(String(l).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(l,g){if(!Array.isArray(l))throw new TypeError('"list" argument must be an Array of Buffers');if(l.length===0)return f.alloc(0);let y;if(g===void 0)for(g=0,y=0;y<l.length;++y)g+=l[y].length;const F=f.allocUnsafe(g);let H=0;for(y=0;y<l.length;++y){let W=l[y];if(be(W,Uint8Array))H+W.length>F.length?(f.isBuffer(W)||(W=f.from(W)),W.copy(F,H)):Uint8Array.prototype.set.call(F,W,H);else{if(!f.isBuffer(W))throw new TypeError('"list" argument must be an Array of Buffers');W.copy(F,H)}H+=W.length}return F},f.byteLength=N,f.prototype._isBuffer=!0,f.prototype.swap16=function(){const l=this.length;if(l%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let g=0;g<l;g+=2)P(this,g,g+1);return this},f.prototype.swap32=function(){const l=this.length;if(l%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let g=0;g<l;g+=4)P(this,g,g+3),P(this,g+1,g+2);return this},f.prototype.swap64=function(){const l=this.length;if(l%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let g=0;g<l;g+=8)P(this,g,g+7),P(this,g+1,g+6),P(this,g+2,g+5),P(this,g+3,g+4);return this},f.prototype.toString=function(){const l=this.length;return l===0?"":arguments.length===0?V(this,0,l):_.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(l){if(!f.isBuffer(l))throw new TypeError("Argument must be a Buffer");return this===l||f.compare(this,l)===0},f.prototype.inspect=function(){let l="";const g=e.IS;return l=this.toString("hex",0,g).replace(/(.{2})/g,"$1 ").trim(),this.length>g&&(l+=" ... "),"<Buffer "+l+">"},c&&(f.prototype[c]=f.prototype.inspect),f.prototype.compare=function(l,g,y,F,H){if(be(l,Uint8Array)&&(l=f.from(l,l.offset,l.byteLength)),!f.isBuffer(l))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof l);if(g===void 0&&(g=0),y===void 0&&(y=l?l.length:0),F===void 0&&(F=0),H===void 0&&(H=this.length),g<0||y>l.length||F<0||H>this.length)throw new RangeError("out of range index");if(F>=H&&g>=y)return 0;if(F>=H)return-1;if(g>=y)return 1;if(this===l)return 0;let W=(H>>>=0)-(F>>>=0),fe=(y>>>=0)-(g>>>=0);const Ce=Math.min(W,fe),Ke=this.slice(F,H),rt=l.slice(g,y);for(let $e=0;$e<Ce;++$e)if(Ke[$e]!==rt[$e]){W=Ke[$e],fe=rt[$e];break}return W<fe?-1:fe<W?1:0},f.prototype.includes=function(l,g,y){return this.indexOf(l,g,y)!==-1},f.prototype.indexOf=function(l,g,y){return K(this,l,g,y,!0)},f.prototype.lastIndexOf=function(l,g,y){return K(this,l,g,y,!1)},f.prototype.write=function(l,g,y,F){if(g===void 0)F="utf8",y=this.length,g=0;else if(y===void 0&&typeof g=="string")F=g,y=this.length,g=0;else{if(!isFinite(g))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");g>>>=0,isFinite(y)?(y>>>=0,F===void 0&&(F="utf8")):(F=y,y=void 0)}const H=this.length-g;if((y===void 0||y>H)&&(y=H),l.length>0&&(y<0||g<0)||g>this.length)throw new RangeError("Attempt to write outside buffer bounds");F||(F="utf8");let W=!1;for(;;)switch(F){case"hex":return re(this,l,g,y);case"utf8":case"utf-8":return G(this,l,g,y);case"ascii":case"latin1":case"binary":return D(this,l,g,y);case"base64":return C(this,l,g,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,l,g,y);default:if(W)throw new TypeError("Unknown encoding: "+F);F=(""+F).toLowerCase(),W=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const ne=4096;function X(l,g,y){let F="";y=Math.min(l.length,y);for(let H=g;H<y;++H)F+=String.fromCharCode(127&l[H]);return F}function se(l,g,y){let F="";y=Math.min(l.length,y);for(let H=g;H<y;++H)F+=String.fromCharCode(l[H]);return F}function Y(l,g,y){const F=l.length;(!g||g<0)&&(g=0),(!y||y<0||y>F)&&(y=F);let H="";for(let W=g;W<y;++W)H+=it[l[W]];return H}function ue(l,g,y){const F=l.slice(g,y);let H="";for(let W=0;W<F.length-1;W+=2)H+=String.fromCharCode(F[W]+256*F[W+1]);return H}function ce(l,g,y){if(l%1!=0||l<0)throw new RangeError("offset is not uint");if(l+g>y)throw new RangeError("Trying to access beyond buffer length")}function ye(l,g,y,F,H,W){if(!f.isBuffer(l))throw new TypeError('"buffer" argument must be a Buffer instance');if(g>H||g<W)throw new RangeError('"value" argument is out of bounds');if(y+F>l.length)throw new RangeError("Index out of range")}function Ie(l,g,y,F,H){Ze(g,F,H,l,y,7);let W=Number(g&BigInt(4294967295));l[y++]=W,W>>=8,l[y++]=W,W>>=8,l[y++]=W,W>>=8,l[y++]=W;let fe=Number(g>>BigInt(32)&BigInt(4294967295));return l[y++]=fe,fe>>=8,l[y++]=fe,fe>>=8,l[y++]=fe,fe>>=8,l[y++]=fe,y}function Re(l,g,y,F,H){Ze(g,F,H,l,y,7);let W=Number(g&BigInt(4294967295));l[y+7]=W,W>>=8,l[y+6]=W,W>>=8,l[y+5]=W,W>>=8,l[y+4]=W;let fe=Number(g>>BigInt(32)&BigInt(4294967295));return l[y+3]=fe,fe>>=8,l[y+2]=fe,fe>>=8,l[y+1]=fe,fe>>=8,l[y]=fe,y+8}function S(l,g,y,F,H,W){if(y+F>l.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("Index out of range")}function x(l,g,y,F,H){return g=+g,y>>>=0,H||S(l,0,y,4),s.write(l,g,y,F,23,4),y+4}function Pe(l,g,y,F,H){return g=+g,y>>>=0,H||S(l,0,y,8),s.write(l,g,y,F,52,8),y+8}f.prototype.slice=function(l,g){const y=this.length;(l=~~l)<0?(l+=y)<0&&(l=0):l>y&&(l=y),(g=g===void 0?y:~~g)<0?(g+=y)<0&&(g=0):g>y&&(g=y),g<l&&(g=l);const F=this.subarray(l,g);return Object.setPrototypeOf(F,f.prototype),F},f.prototype.readUintLE=f.prototype.readUIntLE=function(l,g,y){l>>>=0,g>>>=0,y||ce(l,g,this.length);let F=this[l],H=1,W=0;for(;++W<g&&(H*=256);)F+=this[l+W]*H;return F},f.prototype.readUintBE=f.prototype.readUIntBE=function(l,g,y){l>>>=0,g>>>=0,y||ce(l,g,this.length);let F=this[l+--g],H=1;for(;g>0&&(H*=256);)F+=this[l+--g]*H;return F},f.prototype.readUint8=f.prototype.readUInt8=function(l,g){return l>>>=0,g||ce(l,1,this.length),this[l]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(l,g){return l>>>=0,g||ce(l,2,this.length),this[l]|this[l+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(l,g){return l>>>=0,g||ce(l,2,this.length),this[l]<<8|this[l+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(l,g){return l>>>=0,g||ce(l,4,this.length),(this[l]|this[l+1]<<8|this[l+2]<<16)+16777216*this[l+3]},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(l,g){return l>>>=0,g||ce(l,4,this.length),16777216*this[l]+(this[l+1]<<16|this[l+2]<<8|this[l+3])},f.prototype.readBigUInt64LE=ke(function(l){Ye(l>>>=0,"offset");const g=this[l],y=this[l+7];g!==void 0&&y!==void 0||Ue(l,this.length-8);const F=g+256*this[++l]+65536*this[++l]+this[++l]*2**24,H=this[++l]+256*this[++l]+65536*this[++l]+y*2**24;return BigInt(F)+(BigInt(H)<<BigInt(32))}),f.prototype.readBigUInt64BE=ke(function(l){Ye(l>>>=0,"offset");const g=this[l],y=this[l+7];g!==void 0&&y!==void 0||Ue(l,this.length-8);const F=g*2**24+65536*this[++l]+256*this[++l]+this[++l],H=this[++l]*2**24+65536*this[++l]+256*this[++l]+y;return(BigInt(F)<<BigInt(32))+BigInt(H)}),f.prototype.readIntLE=function(l,g,y){l>>>=0,g>>>=0,y||ce(l,g,this.length);let F=this[l],H=1,W=0;for(;++W<g&&(H*=256);)F+=this[l+W]*H;return H*=128,F>=H&&(F-=Math.pow(2,8*g)),F},f.prototype.readIntBE=function(l,g,y){l>>>=0,g>>>=0,y||ce(l,g,this.length);let F=g,H=1,W=this[l+--F];for(;F>0&&(H*=256);)W+=this[l+--F]*H;return H*=128,W>=H&&(W-=Math.pow(2,8*g)),W},f.prototype.readInt8=function(l,g){return l>>>=0,g||ce(l,1,this.length),128&this[l]?-1*(255-this[l]+1):this[l]},f.prototype.readInt16LE=function(l,g){l>>>=0,g||ce(l,2,this.length);const y=this[l]|this[l+1]<<8;return 32768&y?4294901760|y:y},f.prototype.readInt16BE=function(l,g){l>>>=0,g||ce(l,2,this.length);const y=this[l+1]|this[l]<<8;return 32768&y?4294901760|y:y},f.prototype.readInt32LE=function(l,g){return l>>>=0,g||ce(l,4,this.length),this[l]|this[l+1]<<8|this[l+2]<<16|this[l+3]<<24},f.prototype.readInt32BE=function(l,g){return l>>>=0,g||ce(l,4,this.length),this[l]<<24|this[l+1]<<16|this[l+2]<<8|this[l+3]},f.prototype.readBigInt64LE=ke(function(l){Ye(l>>>=0,"offset");const g=this[l],y=this[l+7];g!==void 0&&y!==void 0||Ue(l,this.length-8);const F=this[l+4]+256*this[l+5]+65536*this[l+6]+(y<<24);return(BigInt(F)<<BigInt(32))+BigInt(g+256*this[++l]+65536*this[++l]+this[++l]*16777216)}),f.prototype.readBigInt64BE=ke(function(l){Ye(l>>>=0,"offset");const g=this[l],y=this[l+7];g!==void 0&&y!==void 0||Ue(l,this.length-8);const F=(g<<24)+65536*this[++l]+256*this[++l]+this[++l];return(BigInt(F)<<BigInt(32))+BigInt(this[++l]*16777216+65536*this[++l]+256*this[++l]+y)}),f.prototype.readFloatLE=function(l,g){return l>>>=0,g||ce(l,4,this.length),s.read(this,l,!0,23,4)},f.prototype.readFloatBE=function(l,g){return l>>>=0,g||ce(l,4,this.length),s.read(this,l,!1,23,4)},f.prototype.readDoubleLE=function(l,g){return l>>>=0,g||ce(l,8,this.length),s.read(this,l,!0,52,8)},f.prototype.readDoubleBE=function(l,g){return l>>>=0,g||ce(l,8,this.length),s.read(this,l,!1,52,8)},f.prototype.writeUintLE=f.prototype.writeUIntLE=function(l,g,y,F){l=+l,g>>>=0,y>>>=0,!F&&ye(this,l,g,y,Math.pow(2,8*y)-1,0);let H=1,W=0;for(this[g]=255&l;++W<y&&(H*=256);)this[g+W]=l/H&255;return g+y},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(l,g,y,F){l=+l,g>>>=0,y>>>=0,!F&&ye(this,l,g,y,Math.pow(2,8*y)-1,0);let H=y-1,W=1;for(this[g+H]=255&l;--H>=0&&(W*=256);)this[g+H]=l/W&255;return g+y},f.prototype.writeUint8=f.prototype.writeUInt8=function(l,g,y){return l=+l,g>>>=0,y||ye(this,l,g,1,255,0),this[g]=255&l,g+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(l,g,y){return l=+l,g>>>=0,y||ye(this,l,g,2,65535,0),this[g]=255&l,this[g+1]=l>>>8,g+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(l,g,y){return l=+l,g>>>=0,y||ye(this,l,g,2,65535,0),this[g]=l>>>8,this[g+1]=255&l,g+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(l,g,y){return l=+l,g>>>=0,y||ye(this,l,g,4,4294967295,0),this[g+3]=l>>>24,this[g+2]=l>>>16,this[g+1]=l>>>8,this[g]=255&l,g+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(l,g,y){return l=+l,g>>>=0,y||ye(this,l,g,4,4294967295,0),this[g]=l>>>24,this[g+1]=l>>>16,this[g+2]=l>>>8,this[g+3]=255&l,g+4},f.prototype.writeBigUInt64LE=ke(function(l,g=0){return Ie(this,l,g,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeBigUInt64BE=ke(function(l,g=0){return Re(this,l,g,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeIntLE=function(l,g,y,F){if(l=+l,g>>>=0,!F){const Ce=Math.pow(2,8*y-1);ye(this,l,g,y,Ce-1,-Ce)}let H=0,W=1,fe=0;for(this[g]=255&l;++H<y&&(W*=256);)l<0&&fe===0&&this[g+H-1]!==0&&(fe=1),this[g+H]=(l/W|0)-fe&255;return g+y},f.prototype.writeIntBE=function(l,g,y,F){if(l=+l,g>>>=0,!F){const Ce=Math.pow(2,8*y-1);ye(this,l,g,y,Ce-1,-Ce)}let H=y-1,W=1,fe=0;for(this[g+H]=255&l;--H>=0&&(W*=256);)l<0&&fe===0&&this[g+H+1]!==0&&(fe=1),this[g+H]=(l/W|0)-fe&255;return g+y},f.prototype.writeInt8=function(l,g,y){return l=+l,g>>>=0,y||ye(this,l,g,1,127,-128),l<0&&(l=255+l+1),this[g]=255&l,g+1},f.prototype.writeInt16LE=function(l,g,y){return l=+l,g>>>=0,y||ye(this,l,g,2,32767,-32768),this[g]=255&l,this[g+1]=l>>>8,g+2},f.prototype.writeInt16BE=function(l,g,y){return l=+l,g>>>=0,y||ye(this,l,g,2,32767,-32768),this[g]=l>>>8,this[g+1]=255&l,g+2},f.prototype.writeInt32LE=function(l,g,y){return l=+l,g>>>=0,y||ye(this,l,g,4,2147483647,-2147483648),this[g]=255&l,this[g+1]=l>>>8,this[g+2]=l>>>16,this[g+3]=l>>>24,g+4},f.prototype.writeInt32BE=function(l,g,y){return l=+l,g>>>=0,y||ye(this,l,g,4,2147483647,-2147483648),l<0&&(l=4294967295+l+1),this[g]=l>>>24,this[g+1]=l>>>16,this[g+2]=l>>>8,this[g+3]=255&l,g+4},f.prototype.writeBigInt64LE=ke(function(l,g=0){return Ie(this,l,g,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeBigInt64BE=ke(function(l,g=0){return Re(this,l,g,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeFloatLE=function(l,g,y){return x(this,l,g,!0,y)},f.prototype.writeFloatBE=function(l,g,y){return x(this,l,g,!1,y)},f.prototype.writeDoubleLE=function(l,g,y){return Pe(this,l,g,!0,y)},f.prototype.writeDoubleBE=function(l,g,y){return Pe(this,l,g,!1,y)},f.prototype.copy=function(l,g,y,F){if(!f.isBuffer(l))throw new TypeError("argument should be a Buffer");if(y||(y=0),F||F===0||(F=this.length),g>=l.length&&(g=l.length),g||(g=0),F>0&&F<y&&(F=y),F===y||l.length===0||this.length===0)return 0;if(g<0)throw new RangeError("targetStart out of bounds");if(y<0||y>=this.length)throw new RangeError("Index out of range");if(F<0)throw new RangeError("sourceEnd out of bounds");F>this.length&&(F=this.length),l.length-g<F-y&&(F=l.length-g+y);const H=F-y;return this===l&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(g,y,F):Uint8Array.prototype.set.call(l,this.subarray(y,F),g),H},f.prototype.fill=function(l,g,y,F){if(typeof l=="string"){if(typeof g=="string"?(F=g,g=0,y=this.length):typeof y=="string"&&(F=y,y=this.length),F!==void 0&&typeof F!="string")throw new TypeError("encoding must be a string");if(typeof F=="string"&&!f.isEncoding(F))throw new TypeError("Unknown encoding: "+F);if(l.length===1){const W=l.charCodeAt(0);(F==="utf8"&&W<128||F==="latin1")&&(l=W)}}else typeof l=="number"?l&=255:typeof l=="boolean"&&(l=Number(l));if(g<0||this.length<g||this.length<y)throw new RangeError("Out of range index");if(y<=g)return this;let H;if(g>>>=0,y=y===void 0?this.length:y>>>0,l||(l=0),typeof l=="number")for(H=g;H<y;++H)this[H]=l;else{const W=f.isBuffer(l)?l:f.from(l,F),fe=W.length;if(fe===0)throw new TypeError('The value "'+l+'" is invalid for argument "value"');for(H=0;H<y-g;++H)this[H+g]=W[H%fe]}return this};const Te={};function qe(l,g,y){Te[l]=class extends y{constructor(){super(),Object.defineProperty(this,"message",{value:g.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${l}]`,this.stack,delete this.name}get code(){return l}set code(F){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:F,writable:!0})}toString(){return`${this.name} [${l}]: ${this.message}`}}}function nt(l){let g="",y=l.length;const F=l[0]==="-"?1:0;for(;y>=F+4;y-=3)g=`_${l.slice(y-3,y)}${g}`;return`${l.slice(0,y)}${g}`}function Ze(l,g,y,F,H,W){if(l>y||l<g){const fe=typeof g=="bigint"?"n":"";let Ce;throw Ce=g===0||g===BigInt(0)?`>= 0${fe} and < 2${fe} ** ${8*(W+1)}${fe}`:`>= -(2${fe} ** ${8*(W+1)-1}${fe}) and < 2 ** ${8*(W+1)-1}${fe}`,new Te.ERR_OUT_OF_RANGE("value",Ce,l)}(function(fe,Ce,Ke){Ye(Ce,"offset"),fe[Ce]!==void 0&&fe[Ce+Ke]!==void 0||Ue(Ce,fe.length-(Ke+1))})(F,H,W)}function Ye(l,g){if(typeof l!="number")throw new Te.ERR_INVALID_ARG_TYPE(g,"number",l)}function Ue(l,g,y){throw Math.floor(l)!==l?(Ye(l,y),new Te.ERR_OUT_OF_RANGE("offset","an integer",l)):g<0?new Te.ERR_BUFFER_OUT_OF_BOUNDS:new Te.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${g}`,l)}qe("ERR_BUFFER_OUT_OF_BOUNDS",function(l){return l?`${l} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),qe("ERR_INVALID_ARG_TYPE",function(l,g){return`The "${l}" argument must be of type number. Received type ${typeof g}`},TypeError),qe("ERR_OUT_OF_RANGE",function(l,g,y){let F=`The value of "${l}" is out of range.`,H=y;return Number.isInteger(y)&&Math.abs(y)>4294967296?H=nt(String(y)):typeof y=="bigint"&&(H=String(y),(y>BigInt(2)**BigInt(32)||y<-(BigInt(2)**BigInt(32)))&&(H=nt(H)),H+="n"),F+=` It must be ${g}. Received ${H}`,F},RangeError);const Ee=/[^+/0-9A-Za-z-_]/g;function Me(l,g){let y;g=g||1/0;const F=l.length;let H=null;const W=[];for(let fe=0;fe<F;++fe){if(y=l.charCodeAt(fe),y>55295&&y<57344){if(!H){if(y>56319){(g-=3)>-1&&W.push(239,191,189);continue}if(fe+1===F){(g-=3)>-1&&W.push(239,191,189);continue}H=y;continue}if(y<56320){(g-=3)>-1&&W.push(239,191,189),H=y;continue}y=65536+(H-55296<<10|y-56320)}else H&&(g-=3)>-1&&W.push(239,191,189);if(H=null,y<128){if((g-=1)<0)break;W.push(y)}else if(y<2048){if((g-=2)<0)break;W.push(y>>6|192,63&y|128)}else if(y<65536){if((g-=3)<0)break;W.push(y>>12|224,y>>6&63|128,63&y|128)}else{if(!(y<1114112))throw new Error("Invalid code point");if((g-=4)<0)break;W.push(y>>18|240,y>>12&63|128,y>>6&63|128,63&y|128)}}return W}function Rt(l){return o.toByteArray((function(g){if((g=(g=g.split("=")[0]).trim().replace(Ee,"")).length<2)return"";for(;g.length%4!=0;)g+="=";return g})(l))}function vt(l,g,y,F){let H;for(H=0;H<F&&!(H+y>=g.length||H>=l.length);++H)g[H+y]=l[H];return H}function be(l,g){return l instanceof g||l!=null&&l.constructor!=null&&l.constructor.name!=null&&l.constructor.name===g.name}function ot(l){return l!=l}const it=(function(){const l="0123456789abcdef",g=new Array(256);for(let y=0;y<16;++y){const F=16*y;for(let H=0;H<16;++H)g[F+H]=l[y]+l[H]}return g})();function ke(l){return typeof BigInt>"u"?Xe:l}function Xe(){throw new Error("BigInt not supported")}},296:(n,e,t)=>{t.r(e),t.d(e,{WebSocket:()=>T,default:()=>N});var o,s=t(153);function c(_){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},c(_)}function a(_,P){if(!(_ instanceof P))throw new TypeError("Cannot call a class as a function")}function d(_,P){for(var K=0;K<P.length;K++){var M=P[K];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(_,E(M.key),M)}}function f(_,P,K){return P&&d(_.prototype,P),Object.defineProperty(_,"prototype",{writable:!1}),_}function E(_){var P=(function(K,M){if(c(K)!="object"||!K)return K;var re=K[Symbol.toPrimitive];if(re!==void 0){var G=re.call(K,M);if(c(G)!="object")return G;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(K)})(_,"string");return c(P)=="symbol"?P:P+""}function O(_,P,K){return P=w(P),(function(M,re){if(re&&(c(re)=="object"||typeof re=="function"))return re;if(re!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(G){if(G===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G})(M)})(_,v()?Reflect.construct(P,K||[],w(_).constructor):P.apply(_,K))}function v(){try{var _=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(v=function(){return!!_})()}function w(_){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(P){return P.__proto__||Object.getPrototypeOf(P)},w(_)}function U(_,P){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(K,M){return K.__proto__=M,K},U(_,P)}n=t.hmd(n),typeof window>"u"?(o=(function(){return f(function _(P,K){var M=this;a(this,_),s.w9.info(s.Ey.POLYFILLS,"[WEBSOCKET-POLYFILL] Creating mock WebSocket for background context"),this.url=P,this.protocols=K,this.readyState=3,setTimeout(function(){typeof M.onclose=="function"&&M.onclose({code:1e3,reason:"WebSockets not supported in background context"})},0)},[{key:"send",value:function(){throw s.w9.warn(s.Ey.POLYFILLS,"[WEBSOCKET-POLYFILL] Cannot use WebSockets in background context"),new Error("WebSockets are not available in background context")}},{key:"close",value:function(){}},{key:"sendPromise",value:function(){return Promise.reject(new Error("WebSockets are not available in background context"))}},{key:"addEventListener",value:function(){}},{key:"removeEventListener",value:function(){}}])})(),s.w9.info(s.Ey.POLYFILLS,"[WEBSOCKET-POLYFILL] Using mock WebSocket implementation for background context")):(o=(function(_){function P(K,M){var re;return a(this,P),s.w9.info(s.Ey.POLYFILLS,"[WEBSOCKET-POLYFILL] Creating WebSocket with URL:",K),(re=O(this,P,[K,M])).addEventListener("error",function(G){typeof re.onerror=="function"&&re.onerror(G)}),re.addEventListener("open",function(G){typeof re.onopen=="function"&&re.onopen(G)}),re.addEventListener("close",function(G){typeof re.onclose=="function"&&re.onclose(G)}),re.addEventListener("message",function(G){typeof re.onmessage=="function"&&re.onmessage(G)}),re}return(function(K,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");K.prototype=Object.create(M&&M.prototype,{constructor:{value:K,writable:!0,configurable:!0}}),Object.defineProperty(K,"prototype",{writable:!1}),M&&U(K,M)})(P,_),f(P,[{key:"sendPromise",value:function(K){var M=this;return new Promise(function(re,G){try{M.send(K),re()}catch(D){G(D)}})}}])})(window.WebSocket),s.w9.info(s.Ey.POLYFILLS,"[WEBSOCKET-POLYFILL] Using browser WebSocket implementation"));var T=o;const N=o;n.exports&&(n.exports=o,n.exports.WebSocket=o,n.exports.default=o),s.w9.info(s.Ey.POLYFILLS,"[WEBSOCKET-POLYFILL] WebSocket polyfill initialized")},379:(n,e,t)=>{function o(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var d,f,E=typeof Symbol=="function"?Symbol:{},O=E.iterator||"@@iterator",v=E.toStringTag||"@@toStringTag";function w(re,G,D,C){var j=G&&G.prototype instanceof T?G:T,k=Object.create(j.prototype);return s(k,"_invoke",(function(V,ne,X){var se,Y,ue,ce=0,ye=X||[],Ie=!1,Re={p:0,n:0,v:d,a:S,f:S.bind(d,4),d:function(x,Pe){return se=x,Y=0,ue=d,Re.n=Pe,U}};function S(x,Pe){for(Y=x,ue=Pe,f=0;!Ie&&ce&&!Te&&f<ye.length;f++){var Te,qe=ye[f],nt=Re.p,Ze=qe[2];x>3?(Te=Ze===Pe)&&(ue=qe[(Y=qe[4])?5:(Y=3,3)],qe[4]=qe[5]=d):qe[0]<=nt&&((Te=x<2&&nt<qe[1])?(Y=0,Re.v=Pe,Re.n=qe[1]):nt<Ze&&(Te=x<3||qe[0]>Pe||Pe>Ze)&&(qe[4]=x,qe[5]=Pe,Re.n=Ze,Y=0))}if(Te||x>1)return U;throw Ie=!0,Pe}return function(x,Pe,Te){if(ce>1)throw TypeError("Generator is already running");for(Ie&&Pe===1&&S(Pe,Te),Y=Pe,ue=Te;(f=Y<2?d:ue)||!Ie;){se||(Y?Y<3?(Y>1&&(Re.n=-1),S(Y,ue)):Re.n=ue:Re.v=ue);try{if(ce=2,se){if(Y||(x="next"),f=se[x]){if(!(f=f.call(se,ue)))throw TypeError("iterator result is not an object");if(!f.done)return f;ue=f.value,Y<2&&(Y=0)}else Y===1&&(f=se.return)&&f.call(se),Y<2&&(ue=TypeError("The iterator does not provide a '"+x+"' method"),Y=1);se=d}else if((f=(Ie=Re.n<0)?ue:V.call(ne,Re))!==U)break}catch(qe){se=d,Y=1,ue=qe}finally{ce=1}}return{value:f,done:Ie}}})(re,D,C),!0),k}var U={};function T(){}function N(){}function _(){}f=Object.getPrototypeOf;var P=[][O]?f(f([][O]())):(s(f={},O,function(){return this}),f),K=_.prototype=T.prototype=Object.create(P);function M(re){return Object.setPrototypeOf?Object.setPrototypeOf(re,_):(re.__proto__=_,s(re,v,"GeneratorFunction")),re.prototype=Object.create(K),re}return N.prototype=_,s(K,"constructor",_),s(_,"constructor",N),N.displayName="GeneratorFunction",s(_,v,"GeneratorFunction"),s(K),s(K,v,"Generator"),s(K,O,function(){return this}),s(K,"toString",function(){return"[object Generator]"}),(o=function(){return{w,m:M}})()}function s(d,f,E,O){var v=Object.defineProperty;try{v({},"",{})}catch{v=0}s=function(w,U,T,N){function _(P,K){s(w,P,function(M){return this._invoke(P,K,M)})}U?v?v(w,U,{value:T,enumerable:!N,configurable:!N,writable:!N}):w[U]=T:(_("next",0),_("throw",1),_("return",2))},s(d,f,E,O)}function c(d,f,E,O,v,w,U){try{var T=d[w](U),N=T.value}catch(_){return void E(_)}T.done?f(N):Promise.resolve(N).then(O,v)}t.d(e,{C:()=>a});var a=(function(){var d,f=(d=o().m(function E(){var O,v,w,U,T;return o().w(function(N){for(;;)switch(N.p=N.n){case 0:return N.p=0,N.n=1,fetch("https://ipapi.co/json/");case 1:return v=N.v,N.n=2,v.json();case 2:if(w=N.v,(v==null?void 0:v.status)===200){N.n=3;break}throw new Error("Failed to get user location based on IP");case 3:return U=(O=w==null?void 0:w.country_code)!==null&&O!==void 0?O:"US",N.a(2,U);case 4:return N.p=4,T=N.v,console.error("Error getting user location based on IP:",T),N.a(2,"US")}},E,null,[[0,4]])}),function(){var E=this,O=arguments;return new Promise(function(v,w){var U=d.apply(E,O);function T(_){c(U,v,w,T,N,"next",_)}function N(_){c(U,v,w,T,N,"throw",_)}T(void 0)})});return function(){return f.apply(this,arguments)}})()},455:(n,e,t)=>{t.d(e,{A:()=>tu});var o={};t.r(o),t.d(o,{cancelSession:()=>ci,failSession:()=>ai,startVerification:()=>si,submitProofs:()=>ui}),t(997);var s=t(952),c=t(770),a=t(859);function d(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var u,r,i=typeof Symbol=="function"?Symbol:{},h=i.iterator||"@@iterator",p=i.toStringTag||"@@toStringTag";function m($,ae,de,Ge){var Le=ae&&ae.prototype instanceof R?ae:R,Se=Object.create(Le.prototype);return f(Se,"_invoke",(function(He,ze,Be){var le,B,Q,Ae=0,De=Be||[],J=!1,oe={p:0,n:0,v:u,a:pe,f:pe.bind(u,4),d:function(ie,ee){return le=ie,B=0,Q=u,oe.n=ee,b}};function pe(ie,ee){for(B=ie,Q=ee,r=0;!J&&Ae&&!he&&r<De.length;r++){var he,te=De[r],we=oe.p,Ne=te[2];ie>3?(he=Ne===ee)&&(Q=te[(B=te[4])?5:(B=3,3)],te[4]=te[5]=u):te[0]<=we&&((he=ie<2&&we<te[1])?(B=0,oe.v=ee,oe.n=te[1]):we<Ne&&(he=ie<3||te[0]>ee||ee>Ne)&&(te[4]=ie,te[5]=ee,oe.n=Ne,B=0))}if(he||ie>1)return b;throw J=!0,ee}return function(ie,ee,he){if(Ae>1)throw TypeError("Generator is already running");for(J&&ee===1&&pe(ee,he),B=ee,Q=he;(r=B<2?u:Q)||!J;){le||(B?B<3?(B>1&&(oe.n=-1),pe(B,Q)):oe.n=Q:oe.v=Q);try{if(Ae=2,le){if(B||(ie="next"),r=le[ie]){if(!(r=r.call(le,Q)))throw TypeError("iterator result is not an object");if(!r.done)return r;Q=r.value,B<2&&(B=0)}else B===1&&(r=le.return)&&r.call(le),B<2&&(Q=TypeError("The iterator does not provide a '"+ie+"' method"),B=1);le=u}else if((r=(J=oe.n<0)?Q:He.call(ze,oe))!==b)break}catch(te){le=u,B=1,Q=te}finally{Ae=1}}return{value:r,done:J}}})($,de,Ge),!0),Se}var b={};function R(){}function A(){}function I(){}r=Object.getPrototypeOf;var q=[][h]?r(r([][h]())):(f(r={},h,function(){return this}),r),L=I.prototype=R.prototype=Object.create(q);function z($){return Object.setPrototypeOf?Object.setPrototypeOf($,I):($.__proto__=I,f($,p,"GeneratorFunction")),$.prototype=Object.create(L),$}return A.prototype=I,f(L,"constructor",I),f(I,"constructor",A),A.displayName="GeneratorFunction",f(I,p,"GeneratorFunction"),f(L),f(L,p,"Generator"),f(L,h,function(){return this}),f(L,"toString",function(){return"[object Generator]"}),(d=function(){return{w:m,m:z}})()}function f(u,r,i,h){var p=Object.defineProperty;try{p({},"",{})}catch{p=0}f=function(m,b,R,A){function I(q,L){f(m,q,function(z){return this._invoke(q,L,z)})}b?p?p(m,b,{value:R,enumerable:!A,configurable:!A,writable:!A}):m[b]=R:(I("next",0),I("throw",1),I("return",2))},f(u,r,i,h)}function E(u,r,i,h,p,m,b){try{var R=u[m](b),A=R.value}catch(I){return void i(I)}R.done?r(A):Promise.resolve(A).then(h,p)}function O(u){return function(){var r=this,i=arguments;return new Promise(function(h,p){var m=u.apply(r,i);function b(A){E(m,h,p,b,R,"next",A)}function R(A){E(m,h,p,b,R,"throw",A)}b(void 0)})}}var v=(function(){var u=O(d().m(function r(i,h,p){var m,b,R,A;return d().w(function(I){for(;;)switch(I.p=I.n){case 0:return m=(0,c.y8)({sessionId:h||"unknown",providerId:i||"unknown",appId:p||"unknown",source:"reclaim-extension-sdk",type:a.D_.FETCH_DATA}),I.p=1,I.n=2,fetch("".concat(s.Sn.PROVIDER_URL(i)));case 2:if((b=I.v).ok){I.n=3;break}throw new Error("Failed to fetch provider data");case 3:return m.info({message:"Successfully fetched provider data from the backend: "+JSON.stringify(b),logLevel:a.E$.INFO,type:a.D_.FETCH_DATA,eventType:a.Ru.BACKGROUND_FETCH_PROVIDER_DATA}),I.n=4,b.json();case 4:return R=I.v,I.a(2,R==null?void 0:R.providers);case 5:throw I.p=5,A=I.v,m.error({message:"Error fetching provider data: "+A.toString(),logLevel:a.E$.ERROR,type:a.D_.FETCH_DATA,eventType:a.Ru.BACKGROUND_FETCH_PROVIDER_DATA_ERROR}),A;case 6:return I.a(2)}},r,null,[[1,5]])}));return function(r,i,h){return u.apply(this,arguments)}})(),w=(function(){var u=O(d().m(function r(i,h,p,m){var b,R,A,I;return d().w(function(q){for(;;)switch(q.p=q.n){case 0:return b=(0,c.y8)({sessionId:i||"unknown",providerId:p||"unknown",appId:m||"unknown",source:"reclaim-extension-sdk",type:a.D_.FETCH_DATA}),q.p=1,q.n=2,fetch("".concat(s.Sn.UPDATE_SESSION_STATUS()),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:i,status:h})});case 2:if((R=q.v).ok){q.n=3;break}throw new Error("Failed to update session status");case 3:return b.info({message:"Successfully updated session status: "+h,logLevel:a.E$.INFO,type:a.D_.FETCH_DATA,eventType:a.Ru.BACKGROUND_UPDATE_SESSION_STATUS}),q.n=4,R.json();case 4:return A=q.v,q.a(2,A);case 5:throw q.p=5,I=q.v,b.error({message:"Error updating session status: "+I.toString(),logLevel:a.E$.ERROR,type:a.D_.FETCH_DATA,eventType:a.Ru.BACKGROUND_UPDATE_SESSION_STATUS_ERROR}),I;case 6:return q.a(2)}},r,null,[[1,5]])}));return function(r,i,h,p){return u.apply(this,arguments)}})(),U=(function(){var u=O(d().m(function r(i,h,p,m,b){var R,A,I,q,L,z;return d().w(function($){for(;;)switch($.p=$.n){case 0:return R=(0,c.y8)({sessionId:p||"unknown",providerId:m||"unknown",appId:b||"unknown",source:"reclaim-extension-sdk",type:a.D_.FETCH_DATA}),$.p=1,A=JSON.stringify(i),I=encodeURIComponent(A),$.n=2,fetch(h,{method:"POST",headers:{"Content-Type":"text/plain"},body:I});case 2:return q=$.v,$.n=3,q.text();case 3:if(L=$.v,q.ok){$.n=5;break}return $.n=4,w(p,s.Ew.PROOF_SUBMISSION_FAILED);case 4:throw new Error("Failed to submit proof to Callback and update session status");case 5:return R.info({message:"Successfully submitted proof to Callback and updated session status",logLevel:a.E$.INFO,type:a.D_.FETCH_DATA,eventType:a.Ru.BACKGROUND_PROOF_SUBMISSION_SUCCESS}),$.n=6,w(p,s.Ew.PROOF_SUBMITTED);case 6:return $.a(2,L);case 7:throw $.p=7,z=$.v,R.error({message:"Error submitting proof to Callback: "+z.toString(),logLevel:a.E$.ERROR,type:a.D_.FETCH_DATA,eventType:a.Ru.BACKGROUND_PROOF_SUBMISSION_ERROR}),z;case 8:return $.a(2)}},r,null,[[1,7]])}));return function(r,i,h,p,m){return u.apply(this,arguments)}})();function T(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var u,r,i=typeof Symbol=="function"?Symbol:{},h=i.iterator||"@@iterator",p=i.toStringTag||"@@toStringTag";function m($,ae,de,Ge){var Le=ae&&ae.prototype instanceof R?ae:R,Se=Object.create(Le.prototype);return N(Se,"_invoke",(function(He,ze,Be){var le,B,Q,Ae=0,De=Be||[],J=!1,oe={p:0,n:0,v:u,a:pe,f:pe.bind(u,4),d:function(ie,ee){return le=ie,B=0,Q=u,oe.n=ee,b}};function pe(ie,ee){for(B=ie,Q=ee,r=0;!J&&Ae&&!he&&r<De.length;r++){var he,te=De[r],we=oe.p,Ne=te[2];ie>3?(he=Ne===ee)&&(Q=te[(B=te[4])?5:(B=3,3)],te[4]=te[5]=u):te[0]<=we&&((he=ie<2&&we<te[1])?(B=0,oe.v=ee,oe.n=te[1]):we<Ne&&(he=ie<3||te[0]>ee||ee>Ne)&&(te[4]=ie,te[5]=ee,oe.n=Ne,B=0))}if(he||ie>1)return b;throw J=!0,ee}return function(ie,ee,he){if(Ae>1)throw TypeError("Generator is already running");for(J&&ee===1&&pe(ee,he),B=ee,Q=he;(r=B<2?u:Q)||!J;){le||(B?B<3?(B>1&&(oe.n=-1),pe(B,Q)):oe.n=Q:oe.v=Q);try{if(Ae=2,le){if(B||(ie="next"),r=le[ie]){if(!(r=r.call(le,Q)))throw TypeError("iterator result is not an object");if(!r.done)return r;Q=r.value,B<2&&(B=0)}else B===1&&(r=le.return)&&r.call(le),B<2&&(Q=TypeError("The iterator does not provide a '"+ie+"' method"),B=1);le=u}else if((r=(J=oe.n<0)?Q:He.call(ze,oe))!==b)break}catch(te){le=u,B=1,Q=te}finally{Ae=1}}return{value:r,done:J}}})($,de,Ge),!0),Se}var b={};function R(){}function A(){}function I(){}r=Object.getPrototypeOf;var q=[][h]?r(r([][h]())):(N(r={},h,function(){return this}),r),L=I.prototype=R.prototype=Object.create(q);function z($){return Object.setPrototypeOf?Object.setPrototypeOf($,I):($.__proto__=I,N($,p,"GeneratorFunction")),$.prototype=Object.create(L),$}return A.prototype=I,N(L,"constructor",I),N(I,"constructor",A),A.displayName="GeneratorFunction",N(I,p,"GeneratorFunction"),N(L),N(L,p,"Generator"),N(L,h,function(){return this}),N(L,"toString",function(){return"[object Generator]"}),(T=function(){return{w:m,m:z}})()}function N(u,r,i,h){var p=Object.defineProperty;try{p({},"",{})}catch{p=0}N=function(m,b,R,A){function I(q,L){N(m,q,function(z){return this._invoke(q,L,z)})}b?p?p(m,b,{value:R,enumerable:!A,configurable:!A,writable:!A}):m[b]=R:(I("next",0),I("throw",1),I("return",2))},N(u,r,i,h)}function _(u,r,i,h,p,m,b){try{var R=u[m](b),A=R.value}catch(I){return void i(I)}R.done?r(A):Promise.resolve(A).then(h,p)}function P(u){return function(){var r=this,i=arguments;return new Promise(function(h,p){var m=u.apply(r,i);function b(A){_(m,h,p,b,R,"next",A)}function R(A){_(m,h,p,b,R,"throw",A)}b(void 0)})}}var K=(0,c.y8)({sessionId:"unknown",providerId:"unknown",appId:"unknown",source:"reclaim-extension-sdk",type:a.D_.OFFSCREEN}),M=!1,re=null,G=null,D=function(u){(u==null?void 0:u.action)===s.wx.OFFSCREEN_DOCUMENT_READY&&(u==null?void 0:u.source)===s.J_.OFFSCREEN&&(u==null?void 0:u.target)===s.J_.BACKGROUND&&(K.info({message:"[OFFSCREEN-MANAGER] Received offscreen ready signal (global listener).",logLevel:a.E$.INFO,type:a.D_.OFFSCREEN}),M=!0,re&&(clearTimeout(re),re=null))},C=function(){typeof chrome<"u"&&chrome.runtime&&chrome.runtime.onMessage&&chrome.runtime.onMessage.addListener&&chrome.runtime.onMessage.hasListener&&(chrome.runtime.onMessage.hasListener(D)||chrome.runtime.onMessage.addListener(D))},j=function(){typeof chrome<"u"&&chrome.runtime&&chrome.runtime.onMessage&&chrome.runtime.onMessage.addListener&&chrome.runtime.onMessage.hasListener&&(chrome.runtime.onMessage.hasListener(D)||chrome.runtime.onMessage.addListener(D))};function k(){return V.apply(this,arguments)}function V(){return(V=P(T().m(function u(){var r,i;return T().w(function(h){for(;;)switch(h.p=h.n){case 0:return r=chrome.runtime.getURL("reclaim-browser-extension-sdk/offscreen/offscreen.html"),K.info({message:"[OFFSCREEN-MANAGER] Attempting to create offscreen document with URL:",logLevel:a.E$.INFO,type:a.D_.OFFSCREEN,meta:{offscreenUrl:r}}),h.p=1,h.n=2,chrome.offscreen.createDocument({url:r,reasons:["DOM_PARSER","IFRAME_SCRIPTING","BLOBS"],justification:"Manages DOM-dependent operations like crypto and ZK proof generation for the extension."});case 2:h.n=5;break;case 3:if(h.p=3,!(i=h.v).message||!i.message.includes("Only a single offscreen document may be created.")){h.n=4;break}K.info({message:"[OFFSCREEN-MANAGER] Offscreen document already exists or creation was attempted by another part.",logLevel:a.E$.INFO,type:a.D_.OFFSCREEN}),h.n=5;break;case 4:throw K.error({message:"[OFFSCREEN-MANAGER] Error creating offscreen document:",logLevel:a.E$.ERROR,type:a.D_.OFFSCREEN,meta:{error:i}}),i;case 5:return h.a(2)}},u,null,[[1,3]])}))).apply(this,arguments)}function ne(){return X.apply(this,arguments)}function X(){return X=P(T().m(function u(){var r,i=arguments;return T().w(function(h){for(;;)switch(h.n){case 0:if(r=i.length>0&&i[0]!==void 0?i[0]:15e3,!M){h.n=1;break}return K.info({message:"[OFFSCREEN-MANAGER] Already ready (waitForOffscreenReadyInternal check)",logLevel:a.E$.INFO,type:a.D_.OFFSCREEN}),h.a(2,!0);case 1:K.info({message:"[OFFSCREEN-MANAGER] Waiting for offscreen document to be ready (timeout:- ${timeoutMs}ms)...",logLevel:a.E$.INFO,type:a.D_.OFFSCREEN,meta:{timeoutMs:r}});try{chrome.runtime.sendMessage({action:s.wx.PING_OFFSCREEN,source:s.J_.BACKGROUND,target:s.J_.OFFSCREEN})}catch(p){K.info({message:"[OFFSCREEN-MANAGER] Synchronous error sending ping:"+(p==null?void 0:p.message),logLevel:a.E$.INFO,type:a.D_.OFFSCREEN,meta:{error:p}})}return h.a(2,new Promise(function(p){if(M)return K.info({message:"[OFFSCREEN-MANAGER] Became ready while setting up promise.",logLevel:a.E$.INFO,type:a.D_.OFFSCREEN}),void p(!0);var m=function(R){R.action===s.wx.OFFSCREEN_DOCUMENT_READY&&R.source===s.J_.OFFSCREEN&&R.target===s.J_.BACKGROUND&&(M=!0,clearTimeout(b),chrome.runtime.onMessage.removeListener(m),re===b&&(re=null),p(!0))};chrome.runtime.onMessage.addListener(m),re&&clearTimeout(re);var b=setTimeout(function(){chrome.runtime.onMessage.removeListener(m),K.error({message:"[OFFSCREEN-MANAGER] Timed out waiting for offscreen document after "+r+" ms.",logLevel:a.E$.ERROR,type:a.D_.OFFSCREEN,meta:{timeoutMs:r}}),re===b&&(re=null),p(!1)},r);re=b}))}},u)})),X.apply(this,arguments)}function se(u){return Y.apply(this,arguments)}function Y(){return Y=P(T().m(function u(r){return T().w(function(i){for(;;)switch(i.n){case 0:if(!M){i.n=1;break}return r.info({message:"[OFFSCREEN-MANAGER] Document already confirmed ready.",logLevel:a.E$.INFO,type:a.D_.OFFSCREEN}),i.a(2,!0);case 1:if(!G){i.n=2;break}return r.info({message:"[OFFSCREEN-MANAGER] Creation already in progress, awaiting...",logLevel:a.E$.INFO,type:a.D_.OFFSCREEN}),i.n=2,G;case 2:if(!chrome.runtime.getContexts){i.n=6;break}return i.n=3,chrome.runtime.getContexts({contextTypes:["OFFSCREEN_DOCUMENT"]});case 3:if(!(i.v.length>0)){i.n=6;break}if(r.info({message:"[OFFSCREEN-MANAGER] Offscreen document context found.",logLevel:a.E$.INFO,type:a.D_.OFFSCREEN}),!M){i.n=4;break}return i.a(2,!0);case 4:return r.info({message:"[OFFSCREEN-MANAGER] Context exists, but not marked ready. Waiting for signal...",logLevel:a.E$.INFO,type:a.D_.OFFSCREEN}),i.n=5,ne(5e3);case 5:return i.a(2,i.v);case 6:if(G){i.n=7;break}return r.info({message:"[OFFSCREEN-MANAGER] No existing context/promise, initiating creation.",logLevel:a.E$.INFO,type:a.D_.OFFSCREEN}),G=k().finally(function(){G=null}),i.n=7,G;case 7:return i.n=8,ne(5e4);case 8:if(i.v){i.n=9;break}throw new Error("Failed to initialize or confirm offscreen document readiness.");case 9:return r.info({message:"[OFFSCREEN-MANAGER] Offscreen document ensured to be ready.",logLevel:a.E$.INFO,type:a.D_.OFFSCREEN}),i.a(2,!0)}},u)})),Y.apply(this,arguments)}function ue(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var u,r,i=typeof Symbol=="function"?Symbol:{},h=i.iterator||"@@iterator",p=i.toStringTag||"@@toStringTag";function m($,ae,de,Ge){var Le=ae&&ae.prototype instanceof R?ae:R,Se=Object.create(Le.prototype);return ce(Se,"_invoke",(function(He,ze,Be){var le,B,Q,Ae=0,De=Be||[],J=!1,oe={p:0,n:0,v:u,a:pe,f:pe.bind(u,4),d:function(ie,ee){return le=ie,B=0,Q=u,oe.n=ee,b}};function pe(ie,ee){for(B=ie,Q=ee,r=0;!J&&Ae&&!he&&r<De.length;r++){var he,te=De[r],we=oe.p,Ne=te[2];ie>3?(he=Ne===ee)&&(Q=te[(B=te[4])?5:(B=3,3)],te[4]=te[5]=u):te[0]<=we&&((he=ie<2&&we<te[1])?(B=0,oe.v=ee,oe.n=te[1]):we<Ne&&(he=ie<3||te[0]>ee||ee>Ne)&&(te[4]=ie,te[5]=ee,oe.n=Ne,B=0))}if(he||ie>1)return b;throw J=!0,ee}return function(ie,ee,he){if(Ae>1)throw TypeError("Generator is already running");for(J&&ee===1&&pe(ee,he),B=ee,Q=he;(r=B<2?u:Q)||!J;){le||(B?B<3?(B>1&&(oe.n=-1),pe(B,Q)):oe.n=Q:oe.v=Q);try{if(Ae=2,le){if(B||(ie="next"),r=le[ie]){if(!(r=r.call(le,Q)))throw TypeError("iterator result is not an object");if(!r.done)return r;Q=r.value,B<2&&(B=0)}else B===1&&(r=le.return)&&r.call(le),B<2&&(Q=TypeError("The iterator does not provide a '"+ie+"' method"),B=1);le=u}else if((r=(J=oe.n<0)?Q:He.call(ze,oe))!==b)break}catch(te){le=u,B=1,Q=te}finally{Ae=1}}return{value:r,done:J}}})($,de,Ge),!0),Se}var b={};function R(){}function A(){}function I(){}r=Object.getPrototypeOf;var q=[][h]?r(r([][h]())):(ce(r={},h,function(){return this}),r),L=I.prototype=R.prototype=Object.create(q);function z($){return Object.setPrototypeOf?Object.setPrototypeOf($,I):($.__proto__=I,ce($,p,"GeneratorFunction")),$.prototype=Object.create(L),$}return A.prototype=I,ce(L,"constructor",I),ce(I,"constructor",A),A.displayName="GeneratorFunction",ce(I,p,"GeneratorFunction"),ce(L),ce(L,p,"Generator"),ce(L,h,function(){return this}),ce(L,"toString",function(){return"[object Generator]"}),(ue=function(){return{w:m,m:z}})()}function ce(u,r,i,h){var p=Object.defineProperty;try{p({},"",{})}catch{p=0}ce=function(m,b,R,A){function I(q,L){ce(m,q,function(z){return this._invoke(q,L,z)})}b?p?p(m,b,{value:R,enumerable:!A,configurable:!A,writable:!A}):m[b]=R:(I("next",0),I("throw",1),I("return",2))},ce(u,r,i,h)}function ye(u,r,i,h,p,m,b){try{var R=u[m](b),A=R.value}catch(I){return void i(I)}R.done?r(A):Promise.resolve(A).then(h,p)}typeof chrome<"u"&&chrome.runtime&&chrome.runtime.onMessage&&j(),j();var Ie=(function(){var u,r=(u=ue().m(function i(h,p){var m,b;return ue().w(function(R){for(;;)switch(R.p=R.n){case 0:if(m=p,R.p=1,m.setContext({sessionId:h.sessionId||"unknown",providerId:h.providerId||"unknown",appId:h.applicationId||"unknown",type:a.D_.PROOF,eventType:a.Ru.BACKGROUND_PROOF_GENERATION_STARTED}),h){R.n=2;break}throw m.error({message:"[PROOF-GENERATOR] No claim data provided for proof generation",logLevel:a.E$.INFO,type:a.D_.PROOF,eventType:a.Ru.BACKGROUND_PROOF_GENERATION_FAILED}),new Error("No claim data provided for proof generation");case 2:return R.n=3,se(m);case 3:return R.a(2,new Promise(function(A,I){var q=setTimeout(function(){m.error({message:"[PROOF-GENERATOR] Timeout waiting for offscreen document to generate proof",logLevel:a.E$.ERROR,type:a.D_.PROOF,eventType:a.Ru.BACKGROUND_PROOF_GENERATION_FAILED}),I({success:!1,error:"Timeout waiting for offscreen document to generate proof"})},6e4),L=function(z){if(z.action===s.wx.GENERATE_PROOF_RESPONSE&&z.source===s.J_.OFFSCREEN&&z.target===s.J_.BACKGROUND){var $,ae;if(clearTimeout(q),chrome.runtime.onMessage.removeListener(L),m.all({message:"[PROOF-GENERATOR] Offscreen response: "+JSON.stringify(z),logLevel:a.E$.ALL,type:a.D_.PROOF,eventType:a.Ru.BACKGROUND_PROOF_GENERATION_SUCCESS,meta:{response:z}}),!z.success)return m.error({message:"[PROOF-GENERATOR] Proof generation failed:",logLevel:a.E$.ERROR,type:a.D_.PROOF,eventType:a.Ru.BACKGROUND_PROOF_GENERATION_FAILED,meta:{error:z.error}}),void A({success:!1,error:z.error||"Unknown error in proof generation"});var de=(z==null||($=z.proof)===null||$===void 0||($=$.error)===null||$===void 0?void 0:$.message)||(typeof(z==null||(ae=z.proof)===null||ae===void 0?void 0:ae.error)=="string"?z.proof.error:null);if(de)return m.error({message:"[PROOF-GENERATOR] Proof contains embedded error: "+de,logLevel:a.E$.ERROR,type:a.D_.PROOF,eventType:a.Ru.BACKGROUND_PROOF_GENERATION_FAILED,meta:{error:de}}),void A({success:!1,error:de});m.info({message:"[PROOF-GENERATOR] Proof generation successful",logLevel:a.E$.INFO,type:a.D_.PROOF,eventType:a.Ru.BACKGROUND_PROOF_GENERATION_SUCCESS}),A(z)}};chrome.runtime.onMessage.addListener(L),chrome.runtime.sendMessage({action:s.wx.GENERATE_PROOF,source:s.J_.BACKGROUND,target:s.J_.OFFSCREEN,data:h},function(){chrome.runtime.lastError&&(clearTimeout(q),chrome.runtime.onMessage.removeListener(L),m.error({message:"[PROOF-GENERATOR] Error sending message to offscreen document "+chrome.runtime.lastError.message,logLevel:a.E$.ERROR,type:a.D_.PROOF,eventType:a.Ru.BACKGROUND_PROOF_GENERATION_FAILED,meta:{error:chrome.runtime.lastError.message}}),I({success:!1,error:chrome.runtime.lastError.message||"Error communicating with offscreen document"}))})}));case 4:return R.p=4,b=R.v,m.error({message:"[PROOF-GENERATOR] Error in proof generation process: "+b.message,logLevel:a.E$.ERROR,type:a.D_.PROOF,eventType:a.Ru.BACKGROUND_PROOF_GENERATION_FAILED,meta:{error:b}}),R.a(2,{success:!1,error:b.message||"Unknown error in proof generation process"})}},i,null,[[1,4]])}),function(){var i=this,h=arguments;return new Promise(function(p,m){var b=u.apply(i,h);function R(I){ye(b,p,m,R,A,"next",I)}function A(I){ye(b,p,m,R,A,"throw",I)}R(void 0)})});return function(i,h){return r.apply(this,arguments)}})(),Re=t(573),S=t(153);class x{static get version(){return"1.4.0"}static toString(){return"JavaScript Expression Parser (JSEP) v"+x.version}static addUnaryOp(r){return x.max_unop_len=Math.max(r.length,x.max_unop_len),x.unary_ops[r]=1,x}static addBinaryOp(r,i,h){return x.max_binop_len=Math.max(r.length,x.max_binop_len),x.binary_ops[r]=i,h?x.right_associative.add(r):x.right_associative.delete(r),x}static addIdentifierChar(r){return x.additional_identifier_chars.add(r),x}static addLiteral(r,i){return x.literals[r]=i,x}static removeUnaryOp(r){return delete x.unary_ops[r],r.length===x.max_unop_len&&(x.max_unop_len=x.getMaxKeyLen(x.unary_ops)),x}static removeAllUnaryOps(){return x.unary_ops={},x.max_unop_len=0,x}static removeIdentifierChar(r){return x.additional_identifier_chars.delete(r),x}static removeBinaryOp(r){return delete x.binary_ops[r],r.length===x.max_binop_len&&(x.max_binop_len=x.getMaxKeyLen(x.binary_ops)),x.right_associative.delete(r),x}static removeAllBinaryOps(){return x.binary_ops={},x.max_binop_len=0,x}static removeLiteral(r){return delete x.literals[r],x}static removeAllLiterals(){return x.literals={},x}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(r){this.expr=r,this.index=0}static parse(r){return new x(r).parse()}static getMaxKeyLen(r){return Math.max(0,...Object.keys(r).map(i=>i.length))}static isDecimalDigit(r){return r>=48&&r<=57}static binaryPrecedence(r){return x.binary_ops[r]||0}static isIdentifierStart(r){return r>=65&&r<=90||r>=97&&r<=122||r>=128&&!x.binary_ops[String.fromCharCode(r)]||x.additional_identifier_chars.has(String.fromCharCode(r))}static isIdentifierPart(r){return x.isIdentifierStart(r)||x.isDecimalDigit(r)}throwError(r){const i=new Error(r+" at character "+this.index);throw i.index=this.index,i.description=r,i}runHook(r,i){if(x.hooks[r]){const h={context:this,node:i};return x.hooks.run(r,h),h.node}return i}searchHook(r){if(x.hooks[r]){const i={context:this};return x.hooks[r].find(function(h){return h.call(i.context,i),i.node}),i.node}}gobbleSpaces(){let r=this.code;for(;r===x.SPACE_CODE||r===x.TAB_CODE||r===x.LF_CODE||r===x.CR_CODE;)r=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");const r=this.gobbleExpressions(),i=r.length===1?r[0]:{type:x.COMPOUND,body:r};return this.runHook("after-all",i)}gobbleExpressions(r){let i,h,p=[];for(;this.index<this.expr.length;)if(i=this.code,i===x.SEMCOL_CODE||i===x.COMMA_CODE)this.index++;else if(h=this.gobbleExpression())p.push(h);else if(this.index<this.expr.length){if(i===r)break;this.throwError('Unexpected "'+this.char+'"')}return p}gobbleExpression(){const r=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",r)}gobbleBinaryOp(){this.gobbleSpaces();let r=this.expr.substr(this.index,x.max_binop_len),i=r.length;for(;i>0;){if(x.binary_ops.hasOwnProperty(r)&&(!x.isIdentifierStart(this.code)||this.index+r.length<this.expr.length&&!x.isIdentifierPart(this.expr.charCodeAt(this.index+r.length))))return this.index+=i,r;r=r.substr(0,--i)}return!1}gobbleBinaryExpression(){let r,i,h,p,m,b,R,A,I;if(b=this.gobbleToken(),!b||(i=this.gobbleBinaryOp(),!i))return b;for(m={value:i,prec:x.binaryPrecedence(i),right_a:x.right_associative.has(i)},R=this.gobbleToken(),R||this.throwError("Expected expression after "+i),p=[b,m,R];i=this.gobbleBinaryOp();){if(h=x.binaryPrecedence(i),h===0){this.index-=i.length;break}m={value:i,prec:h,right_a:x.right_associative.has(i)},I=i;const q=L=>m.right_a&&L.right_a?h>L.prec:h<=L.prec;for(;p.length>2&&q(p[p.length-2]);)R=p.pop(),i=p.pop().value,b=p.pop(),r={type:x.BINARY_EXP,operator:i,left:b,right:R},p.push(r);r=this.gobbleToken(),r||this.throwError("Expected expression after "+I),p.push(m,r)}for(A=p.length-1,r=p[A];A>1;)r={type:x.BINARY_EXP,operator:p[A-1].value,left:p[A-2],right:r},A-=2;return r}gobbleToken(){let r,i,h,p;if(this.gobbleSpaces(),p=this.searchHook("gobble-token"),p)return this.runHook("after-token",p);if(r=this.code,x.isDecimalDigit(r)||r===x.PERIOD_CODE)return this.gobbleNumericLiteral();if(r===x.SQUOTE_CODE||r===x.DQUOTE_CODE)p=this.gobbleStringLiteral();else if(r===x.OBRACK_CODE)p=this.gobbleArray();else{for(i=this.expr.substr(this.index,x.max_unop_len),h=i.length;h>0;){if(x.unary_ops.hasOwnProperty(i)&&(!x.isIdentifierStart(this.code)||this.index+i.length<this.expr.length&&!x.isIdentifierPart(this.expr.charCodeAt(this.index+i.length)))){this.index+=h;const m=this.gobbleToken();return m||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:x.UNARY_EXP,operator:i,argument:m,prefix:!0})}i=i.substr(0,--h)}x.isIdentifierStart(r)?(p=this.gobbleIdentifier(),x.literals.hasOwnProperty(p.name)?p={type:x.LITERAL,value:x.literals[p.name],raw:p.name}:p.name===x.this_str&&(p={type:x.THIS_EXP})):r===x.OPAREN_CODE&&(p=this.gobbleGroup())}return p?(p=this.gobbleTokenProperty(p),this.runHook("after-token",p)):this.runHook("after-token",!1)}gobbleTokenProperty(r){this.gobbleSpaces();let i=this.code;for(;i===x.PERIOD_CODE||i===x.OBRACK_CODE||i===x.OPAREN_CODE||i===x.QUMARK_CODE;){let h;if(i===x.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==x.PERIOD_CODE)break;h=!0,this.index+=2,this.gobbleSpaces(),i=this.code}this.index++,i===x.OBRACK_CODE?((r={type:x.MEMBER_EXP,computed:!0,object:r,property:this.gobbleExpression()}).property||this.throwError('Unexpected "'+this.char+'"'),this.gobbleSpaces(),i=this.code,i!==x.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):i===x.OPAREN_CODE?r={type:x.CALL_EXP,arguments:this.gobbleArguments(x.CPAREN_CODE),callee:r}:(i===x.PERIOD_CODE||h)&&(h&&this.index--,this.gobbleSpaces(),r={type:x.MEMBER_EXP,computed:!1,object:r,property:this.gobbleIdentifier()}),h&&(r.optional=!0),this.gobbleSpaces(),i=this.code}return r}gobbleNumericLiteral(){let r,i,h="";for(;x.isDecimalDigit(this.code);)h+=this.expr.charAt(this.index++);if(this.code===x.PERIOD_CODE)for(h+=this.expr.charAt(this.index++);x.isDecimalDigit(this.code);)h+=this.expr.charAt(this.index++);if(r=this.char,r==="e"||r==="E"){for(h+=this.expr.charAt(this.index++),r=this.char,r!=="+"&&r!=="-"||(h+=this.expr.charAt(this.index++));x.isDecimalDigit(this.code);)h+=this.expr.charAt(this.index++);x.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+h+this.char+")")}return i=this.code,x.isIdentifierStart(i)?this.throwError("Variable names cannot start with a number ("+h+this.char+")"):(i===x.PERIOD_CODE||h.length===1&&h.charCodeAt(0)===x.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:x.LITERAL,value:parseFloat(h),raw:h}}gobbleStringLiteral(){let r="";const i=this.index,h=this.expr.charAt(this.index++);let p=!1;for(;this.index<this.expr.length;){let m=this.expr.charAt(this.index++);if(m===h){p=!0;break}if(m==="\\")switch(m=this.expr.charAt(this.index++),m){case"n":r+=`
`;break;case"r":r+="\r";break;case"t":r+="	";break;case"b":r+="\b";break;case"f":r+="\f";break;case"v":r+="\v";break;default:r+=m}else r+=m}return p||this.throwError('Unclosed quote after "'+r+'"'),{type:x.LITERAL,value:r,raw:this.expr.substring(i,this.index)}}gobbleIdentifier(){let r=this.code,i=this.index;for(x.isIdentifierStart(r)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(r=this.code,x.isIdentifierPart(r));)this.index++;return{type:x.IDENTIFIER,name:this.expr.slice(i,this.index)}}gobbleArguments(r){const i=[];let h=!1,p=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let m=this.code;if(m===r){h=!0,this.index++,r===x.CPAREN_CODE&&p&&p>=i.length&&this.throwError("Unexpected token "+String.fromCharCode(r));break}if(m===x.COMMA_CODE){if(this.index++,p++,p!==i.length){if(r===x.CPAREN_CODE)this.throwError("Unexpected token ,");else if(r===x.CBRACK_CODE)for(let b=i.length;b<p;b++)i.push(null)}}else if(i.length!==p&&p!==0)this.throwError("Expected comma");else{const b=this.gobbleExpression();b&&b.type!==x.COMPOUND||this.throwError("Expected comma"),i.push(b)}}return h||this.throwError("Expected "+String.fromCharCode(r)),i}gobbleGroup(){this.index++;let r=this.gobbleExpressions(x.CPAREN_CODE);if(this.code===x.CPAREN_CODE)return this.index++,r.length===1?r[0]:!!r.length&&{type:x.SEQUENCE_EXP,expressions:r};this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:x.ARRAY_EXP,elements:this.gobbleArguments(x.CBRACK_CODE)}}}const Pe=new class{add(u,r,i){if(typeof arguments[0]!="string")for(let h in arguments[0])this.add(h,arguments[0][h],arguments[1]);else(Array.isArray(u)?u:[u]).forEach(function(h){this[h]=this[h]||[],r&&this[h][i?"unshift":"push"](r)},this)}run(u,r){this[u]=this[u]||[],this[u].forEach(function(i){i.call(r&&r.context?r.context:r,r)})}};Object.assign(x,{hooks:Pe,plugins:new class{constructor(u){this.jsep=u,this.registered={}}register(){for(var u=arguments.length,r=new Array(u),i=0;i<u;i++)r[i]=arguments[i];r.forEach(h=>{if(typeof h!="object"||!h.name||!h.init)throw new Error("Invalid JSEP plugin format");this.registered[h.name]||(h.init(this.jsep),this.registered[h.name]=h)})}}(x),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"??":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10,"**":11},right_associative:new Set(["**"]),additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"}),x.max_unop_len=x.getMaxKeyLen(x.unary_ops),x.max_binop_len=x.getMaxKeyLen(x.binary_ops);const Te=u=>new x(u).parse(),qe=Object.getOwnPropertyNames(class{});Object.getOwnPropertyNames(x).filter(u=>!qe.includes(u)&&Te[u]===void 0).forEach(u=>{Te[u]=x[u]}),Te.Jsep=x;var nt={name:"ternary",init(u){u.hooks.add("after-expression",function(r){if(r.node&&this.code===u.QUMARK_CODE){this.index++;const i=r.node,h=this.gobbleExpression();if(h||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===u.COLON_CODE){this.index++;const p=this.gobbleExpression();if(p||this.throwError("Expected expression"),r.node={type:"ConditionalExpression",test:i,consequent:h,alternate:p},i.operator&&u.binary_ops[i.operator]<=.9){let m=i;for(;m.right.operator&&u.binary_ops[m.right.operator]<=.9;)m=m.right;r.node.test=m.right,m.right=r.node,r.node=i}}else this.throwError("Expected :")}})}};Te.plugins.register(nt);var Ze={name:"regex",init(u){u.hooks.add("gobble-token",function(r){if(this.code===47){const i=++this.index;let h=!1;for(;this.index<this.expr.length;){if(this.code===47&&!h){const p=this.expr.slice(i,this.index);let m,b="";for(;++this.index<this.expr.length;){const R=this.code;if(!(R>=97&&R<=122||R>=65&&R<=90||R>=48&&R<=57))break;b+=this.char}try{m=new RegExp(p,b)}catch(R){this.throwError(R.message)}return r.node={type:u.LITERAL,value:m,raw:this.expr.slice(i-1,this.index)},r.node=this.gobbleTokenProperty(r.node),r.node}this.code===u.OBRACK_CODE?h=!0:h&&this.code===u.CBRACK_CODE&&(h=!1),this.index+=this.code===92?2:1}this.throwError("Unclosed Regex")}})}};const Ye={name:"assignment",assignmentOperators:new Set(["=","*=","**=","/=","%=","+=","-=","<<=",">>=",">>>=","&=","^=","|=","||=","&&=","??="]),updateOperators:[43,45],assignmentPrecedence:.9,init(u){const r=[u.IDENTIFIER,u.MEMBER_EXP];function i(h){Ye.assignmentOperators.has(h.operator)?(h.type="AssignmentExpression",i(h.left),i(h.right)):h.operator||Object.values(h).forEach(p=>{p&&typeof p=="object"&&i(p)})}Ye.assignmentOperators.forEach(h=>u.addBinaryOp(h,Ye.assignmentPrecedence,!0)),u.hooks.add("gobble-token",function(h){const p=this.code;Ye.updateOperators.some(m=>m===p&&m===this.expr.charCodeAt(this.index+1))&&(this.index+=2,h.node={type:"UpdateExpression",operator:p===43?"++":"--",argument:this.gobbleTokenProperty(this.gobbleIdentifier()),prefix:!0},h.node.argument&&r.includes(h.node.argument.type)||this.throwError(`Unexpected ${h.node.operator}`))}),u.hooks.add("after-token",function(h){if(h.node){const p=this.code;Ye.updateOperators.some(m=>m===p&&m===this.expr.charCodeAt(this.index+1))&&(r.includes(h.node.type)||this.throwError(`Unexpected ${h.node.operator}`),this.index+=2,h.node={type:"UpdateExpression",operator:p===43?"++":"--",argument:h.node,prefix:!1})}}),u.hooks.add("after-expression",function(h){h.node&&i(h.node)})}};Te.plugins.register(Ze,Ye),Te.addUnaryOp("typeof"),Te.addLiteral("null",null),Te.addLiteral("undefined",void 0);const Ue=new Set(["constructor","__proto__","__defineGetter__","__defineSetter__"]),Ee={evalAst(u,r){switch(u.type){case"BinaryExpression":case"LogicalExpression":return Ee.evalBinaryExpression(u,r);case"Compound":return Ee.evalCompound(u,r);case"ConditionalExpression":return Ee.evalConditionalExpression(u,r);case"Identifier":return Ee.evalIdentifier(u,r);case"Literal":return Ee.evalLiteral(u,r);case"MemberExpression":return Ee.evalMemberExpression(u,r);case"UnaryExpression":return Ee.evalUnaryExpression(u,r);case"ArrayExpression":return Ee.evalArrayExpression(u,r);case"CallExpression":return Ee.evalCallExpression(u,r);case"AssignmentExpression":return Ee.evalAssignmentExpression(u,r);default:throw SyntaxError("Unexpected expression",u)}},evalBinaryExpression:(u,r)=>({"||":(i,h)=>i||h(),"&&":(i,h)=>i&&h(),"|":(i,h)=>i|h(),"^":(i,h)=>i^h(),"&":(i,h)=>i&h(),"==":(i,h)=>i==h(),"!=":(i,h)=>i!=h(),"===":(i,h)=>i===h(),"!==":(i,h)=>i!==h(),"<":(i,h)=>i<h(),">":(i,h)=>i>h(),"<=":(i,h)=>i<=h(),">=":(i,h)=>i>=h(),"<<":(i,h)=>i<<h(),">>":(i,h)=>i>>h(),">>>":(i,h)=>i>>>h(),"+":(i,h)=>i+h(),"-":(i,h)=>i-h(),"*":(i,h)=>i*h(),"/":(i,h)=>i/h(),"%":(i,h)=>i%h()})[u.operator](Ee.evalAst(u.left,r),()=>Ee.evalAst(u.right,r)),evalCompound(u,r){let i;for(let h=0;h<u.body.length;h++){u.body[h].type==="Identifier"&&["var","let","const"].includes(u.body[h].name)&&u.body[h+1]&&u.body[h+1].type==="AssignmentExpression"&&(h+=1);const p=u.body[h];i=Ee.evalAst(p,r)}return i},evalConditionalExpression:(u,r)=>Ee.evalAst(u.test,r)?Ee.evalAst(u.consequent,r):Ee.evalAst(u.alternate,r),evalIdentifier(u,r){if(Object.hasOwn(r,u.name))return r[u.name];throw ReferenceError(`${u.name} is not defined`)},evalLiteral:u=>u.value,evalMemberExpression(u,r){const i=String(u.computed?Ee.evalAst(u.property):u.property.name),h=Ee.evalAst(u.object,r);if(h==null)throw TypeError(`Cannot read properties of ${h} (reading '${i}')`);if(!Object.hasOwn(h,i)&&Ue.has(i))throw TypeError(`Cannot read properties of ${h} (reading '${i}')`);const p=h[i];return typeof p=="function"?p.bind(h):p},evalUnaryExpression:(u,r)=>({"-":i=>-Ee.evalAst(i,r),"!":i=>!Ee.evalAst(i,r),"~":i=>~Ee.evalAst(i,r),"+":i=>+Ee.evalAst(i,r),typeof:i=>typeof Ee.evalAst(i,r)})[u.operator](u.argument),evalArrayExpression:(u,r)=>u.elements.map(i=>Ee.evalAst(i,r)),evalCallExpression(u,r){const i=u.arguments.map(h=>Ee.evalAst(h,r));return Ee.evalAst(u.callee,r)(...i)},evalAssignmentExpression(u,r){if(u.left.type!=="Identifier")throw SyntaxError("Invalid left-hand side in assignment");const i=u.left.name,h=Ee.evalAst(u.right,r);return r[i]=h,r[i]}};function Me(u,r){return(u=u.slice()).push(r),u}function Rt(u,r){return(r=r.slice()).unshift(u),r}class vt extends Error{constructor(r){super('JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)'),this.avoidNew=!0,this.value=r,this.name="NewError"}}function be(u,r,i,h,p){if(!(this instanceof be))try{return new be(u,r,i,h,p)}catch(b){if(!b.avoidNew)throw b;return b.value}typeof u=="string"&&(p=h,h=i,i=r,r=u,u=null);const m=u&&typeof u=="object";if(u=u||{},this.json=u.json||i,this.path=u.path||r,this.resultType=u.resultType||"value",this.flatten=u.flatten||!1,this.wrap=!Object.hasOwn(u,"wrap")||u.wrap,this.sandbox=u.sandbox||{},this.eval=u.eval===void 0?"safe":u.eval,this.ignoreEvalErrors=u.ignoreEvalErrors!==void 0&&u.ignoreEvalErrors,this.parent=u.parent||null,this.parentProperty=u.parentProperty||null,this.callback=u.callback||h||null,this.otherTypeCallback=u.otherTypeCallback||p||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},u.autostart!==!1){const b={path:m?u.path:r};m?"json"in u&&(b.json=u.json):b.json=i;const R=this.evaluate(b);if(!R||typeof R!="object")throw new vt(R);return R}}be.prototype.evaluate=function(u,r,i,h){let p=this.parent,m=this.parentProperty,{flatten:b,wrap:R}=this;if(this.currResultType=this.resultType,this.currEval=this.eval,this.currSandbox=this.sandbox,i=i||this.callback,this.currOtherTypeCallback=h||this.otherTypeCallback,r=r||this.json,(u=u||this.path)&&typeof u=="object"&&!Array.isArray(u)){if(!u.path&&u.path!=="")throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!Object.hasOwn(u,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');({json:r}=u),b=Object.hasOwn(u,"flatten")?u.flatten:b,this.currResultType=Object.hasOwn(u,"resultType")?u.resultType:this.currResultType,this.currSandbox=Object.hasOwn(u,"sandbox")?u.sandbox:this.currSandbox,R=Object.hasOwn(u,"wrap")?u.wrap:R,this.currEval=Object.hasOwn(u,"eval")?u.eval:this.currEval,i=Object.hasOwn(u,"callback")?u.callback:i,this.currOtherTypeCallback=Object.hasOwn(u,"otherTypeCallback")?u.otherTypeCallback:this.currOtherTypeCallback,p=Object.hasOwn(u,"parent")?u.parent:p,m=Object.hasOwn(u,"parentProperty")?u.parentProperty:m,u=u.path}if(p=p||null,m=m||null,Array.isArray(u)&&(u=be.toPathString(u)),!u&&u!==""||!r)return;const A=be.toPathArray(u);A[0]==="$"&&A.length>1&&A.shift(),this._hasParentSelector=null;const I=this._trace(A,r,["$"],p,m,i).filter(function(q){return q&&!q.isParentSelector});return I.length?R||I.length!==1||I[0].hasArrExpr?I.reduce((q,L)=>{const z=this._getPreferredOutput(L);return b&&Array.isArray(z)?q=q.concat(z):q.push(z),q},[]):this._getPreferredOutput(I[0]):R?[]:void 0},be.prototype._getPreferredOutput=function(u){const r=this.currResultType;switch(r){case"all":{const i=Array.isArray(u.path)?u.path:be.toPathArray(u.path);return u.pointer=be.toPointer(i),u.path=typeof u.path=="string"?u.path:be.toPathString(u.path),u}case"value":case"parent":case"parentProperty":return u[r];case"path":return be.toPathString(u[r]);case"pointer":return be.toPointer(u.path);default:throw new TypeError("Unknown result type")}},be.prototype._handleCallback=function(u,r,i){if(r){const h=this._getPreferredOutput(u);u.path=typeof u.path=="string"?u.path:be.toPathString(u.path),r(h,i,u)}},be.prototype._trace=function(u,r,i,h,p,m,b,R){let A;if(!u.length)return A={path:i,value:r,parent:h,parentProperty:p,hasArrExpr:b},this._handleCallback(A,m,"value"),A;const I=u[0],q=u.slice(1),L=[];function z($){Array.isArray($)?$.forEach(ae=>{L.push(ae)}):L.push($)}if((typeof I!="string"||R)&&r&&Object.hasOwn(r,I))z(this._trace(q,r[I],Me(i,I),r,I,m,b));else if(I==="*")this._walk(r,$=>{z(this._trace(q,r[$],Me(i,$),r,$,m,!0,!0))});else if(I==="..")z(this._trace(q,r,i,h,p,m,b)),this._walk(r,$=>{typeof r[$]=="object"&&z(this._trace(u.slice(),r[$],Me(i,$),r,$,m,!0))});else{if(I==="^")return this._hasParentSelector=!0,{path:i.slice(0,-1),expr:q,isParentSelector:!0};if(I==="~")return A={path:Me(i,I),value:p,parent:h,parentProperty:null},this._handleCallback(A,m,"property"),A;if(I==="$")z(this._trace(q,r,i,null,null,m,b));else if(/^(-?\d*):(-?\d*):?(\d*)$/u.test(I))z(this._slice(I,q,r,i,h,p,m));else if(I.indexOf("?(")===0){if(this.currEval===!1)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");const $=I.replace(/^\?\((.*?)\)$/u,"$1"),ae=/@.?([^?]*)[['](\??\(.*?\))(?!.\)\])[\]']/gu.exec($);ae?this._walk(r,de=>{const Ge=[ae[2]],Le=ae[1]?r[de][ae[1]]:r[de];this._trace(Ge,Le,i,h,p,m,!0).length>0&&z(this._trace(q,r[de],Me(i,de),r,de,m,!0))}):this._walk(r,de=>{this._eval($,r[de],de,i,h,p)&&z(this._trace(q,r[de],Me(i,de),r,de,m,!0))})}else if(I[0]==="("){if(this.currEval===!1)throw new Error("Eval [(expr)] prevented in JSONPath expression.");z(this._trace(Rt(this._eval(I,r,i.at(-1),i.slice(0,-1),h,p),q),r,i,h,p,m,b))}else if(I[0]==="@"){let $=!1;const ae=I.slice(1,-2);switch(ae){case"scalar":r&&["object","function"].includes(typeof r)||($=!0);break;case"boolean":case"string":case"undefined":case"function":typeof r===ae&&($=!0);break;case"integer":!Number.isFinite(r)||r%1||($=!0);break;case"number":Number.isFinite(r)&&($=!0);break;case"nonFinite":typeof r!="number"||Number.isFinite(r)||($=!0);break;case"object":r&&typeof r===ae&&($=!0);break;case"array":Array.isArray(r)&&($=!0);break;case"other":$=this.currOtherTypeCallback(r,i,h,p);break;case"null":r===null&&($=!0);break;default:throw new TypeError("Unknown value type "+ae)}if($)return A={path:i,value:r,parent:h,parentProperty:p},this._handleCallback(A,m,"value"),A}else if(I[0]==="`"&&r&&Object.hasOwn(r,I.slice(1))){const $=I.slice(1);z(this._trace(q,r[$],Me(i,$),r,$,m,b,!0))}else if(I.includes(",")){const $=I.split(",");for(const ae of $)z(this._trace(Rt(ae,q),r,i,h,p,m,!0))}else!R&&r&&Object.hasOwn(r,I)&&z(this._trace(q,r[I],Me(i,I),r,I,m,b,!0))}if(this._hasParentSelector)for(let $=0;$<L.length;$++){const ae=L[$];if(ae&&ae.isParentSelector){const de=this._trace(ae.expr,r,ae.path,h,p,m,b);if(Array.isArray(de)){L[$]=de[0];const Ge=de.length;for(let Le=1;Le<Ge;Le++)$++,L.splice($,0,de[Le])}else L[$]=de}}return L},be.prototype._walk=function(u,r){if(Array.isArray(u)){const i=u.length;for(let h=0;h<i;h++)r(h)}else u&&typeof u=="object"&&Object.keys(u).forEach(i=>{r(i)})},be.prototype._slice=function(u,r,i,h,p,m,b){if(!Array.isArray(i))return;const R=i.length,A=u.split(":"),I=A[2]&&Number.parseInt(A[2])||1;let q=A[0]&&Number.parseInt(A[0])||0,L=A[1]&&Number.parseInt(A[1])||R;q=q<0?Math.max(0,q+R):Math.min(R,q),L=L<0?Math.max(0,L+R):Math.min(R,L);const z=[];for(let $=q;$<L;$+=I)this._trace(Rt($,r),i,h,p,m,b,!0).forEach(ae=>{z.push(ae)});return z},be.prototype._eval=function(u,r,i,h,p,m){this.currSandbox._$_parentProperty=m,this.currSandbox._$_parent=p,this.currSandbox._$_property=i,this.currSandbox._$_root=this.json,this.currSandbox._$_v=r;const b=u.includes("@path");b&&(this.currSandbox._$_path=be.toPathString(h.concat([i])));const R=this.currEval+"Script:"+u;if(!be.cache[R]){let A=u.replaceAll("@parentProperty","_$_parentProperty").replaceAll("@parent","_$_parent").replaceAll("@property","_$_property").replaceAll("@root","_$_root").replaceAll(/@([.\s)[])/gu,"_$_v$1");if(b&&(A=A.replaceAll("@path","_$_path")),this.currEval==="safe"||this.currEval===!0||this.currEval===void 0)be.cache[R]=new this.safeVm.Script(A);else if(this.currEval==="native")be.cache[R]=new this.vm.Script(A);else if(typeof this.currEval=="function"&&this.currEval.prototype&&Object.hasOwn(this.currEval.prototype,"runInNewContext")){const I=this.currEval;be.cache[R]=new I(A)}else{if(typeof this.currEval!="function")throw new TypeError(`Unknown "eval" property "${this.currEval}"`);be.cache[R]={runInNewContext:I=>this.currEval(A,I)}}}try{return be.cache[R].runInNewContext(this.currSandbox)}catch(A){if(this.ignoreEvalErrors)return!1;throw new Error("jsonPath: "+A.message+": "+u)}},be.cache={},be.toPathString=function(u){const r=u,i=r.length;let h="$";for(let p=1;p<i;p++)/^(~|\^|@.*?\(\))$/u.test(r[p])||(h+=/^[0-9*]+$/u.test(r[p])?"["+r[p]+"]":"['"+r[p]+"']");return h},be.toPointer=function(u){const r=u,i=r.length;let h="";for(let p=1;p<i;p++)/^(~|\^|@.*?\(\))$/u.test(r[p])||(h+="/"+r[p].toString().replaceAll("~","~0").replaceAll("/","~1"));return h},be.toPathArray=function(u){const{cache:r}=be;if(r[u])return r[u].concat();const i=[],h=u.replaceAll(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/gu,";$&;").replaceAll(/[['](\??\(.*?\))[\]'](?!.\])/gu,function(p,m){return"[#"+(i.push(m)-1)+"]"}).replaceAll(/\[['"]([^'\]]*)['"]\]/gu,function(p,m){return"['"+m.replaceAll(".","%@%").replaceAll("~","%%@@%%")+"']"}).replaceAll("~",";~;").replaceAll(/['"]?\.['"]?(?![^[]*\])|\[['"]?/gu,";").replaceAll("%@%",".").replaceAll("%%@@%%","~").replaceAll(/(?:;)?(\^+)(?:;)?/gu,function(p,m){return";"+m.split("").join(";")+";"}).replaceAll(/;;;|;;/gu,";..;").replaceAll(/;$|'?\]|'$/gu,"").split(";").map(function(p){const m=p.match(/#(\d+)/u);return m&&m[1]?i[m[1]]:p});return r[u]=h,r[u].concat()},be.prototype.safeVm={Script:class{constructor(u){this.code=u,this.ast=Te(this.code)}runInNewContext(u){const r=Object.assign(Object.create(null),u);return Ee.evalAst(this.ast,r)}}},be.prototype.vm={Script:class{constructor(u){this.code=u}runInNewContext(u){let r=this.code;const i=Object.keys(u),h=[];(function(R,A,I){const q=R.length;for(let L=0;L<q;L++)I(R[L])&&A.push(R.splice(L--,1)[0])})(i,h,R=>typeof u[R]=="function");const p=i.map(R=>u[R]);r=h.reduce((R,A)=>{let I=u[A].toString();return/function/u.test(I)||(I="function "+I),"var "+A+"="+I+";"+R},"")+r,/(['"])use strict\1/u.test(r)||i.includes("arguments")||(r="var arguments = undefined;"+r),r=r.replace(/;\s*$/u,"");const m=r.lastIndexOf(";"),b=m!==-1?r.slice(0,m+1)+" return "+r.slice(m+1):" return "+r;return new Function(...i,b)(...p)}}};var ot=function(u,r){try{var i=be({path:r,json:u}),h=i==null?void 0:i[0];return h===void 0?void 0:h===null?"null":h}catch(p){return void S.w9.error(S.Ey.CLAIM,"[PARAMS-EXTRACTOR-UTILS] Error extracting JSON value with path ".concat(r,":"),p)}},it=function(u,r){try{var i=r.replace(/^\/\//,"").replace(/\/@/," ").split("/"),h=i[i.length-1],p=new RegExp("<".concat(h,"[^>]*>(.*?)</").concat(h,">"),"i"),m=u.match(p);return m?m[1]:void 0}catch(b){return void S.w9.error(S.Ey.CLAIM,"[PARAMS-EXTRACTOR-UTILS] Error extracting HTML value with XPath ".concat(r,":"),b)}};function ke(u,r){var i=typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(!i){if(Array.isArray(u)||(i=(function(A,I){if(A){if(typeof A=="string")return Xe(A,I);var q={}.toString.call(A).slice(8,-1);return q==="Object"&&A.constructor&&(q=A.constructor.name),q==="Map"||q==="Set"?Array.from(A):q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(q)?Xe(A,I):void 0}})(u))||r){i&&(u=i);var h=0,p=function(){};return{s:p,n:function(){return h>=u.length?{done:!0}:{done:!1,value:u[h++]}},e:function(A){throw A},f:p}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var m,b=!0,R=!1;return{s:function(){i=i.call(u)},n:function(){var A=i.next();return b=A.done,A},e:function(A){R=!0,m=A},f:function(){try{b||i.return==null||i.return()}finally{if(R)throw m}}}}function Xe(u,r){(r==null||r>u.length)&&(r=u.length);for(var i=0,h=Array(r);i<r;i++)h[i]=u[i];return h}function l(u){var r,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=u.replace(/[[\]()*+?.,\\^$|#]/g,"\\$&"),p=(function(I){for(var q,L=/{{(\w+)}}/g,z=[];(q=L.exec(I))!==null;)z.push(q[1]);return z})(u),m=[],b=ke(p);try{for(b.s();!(r=b.n()).done;){var R=r.value;if(i[R])h=h.replace("{{".concat(R,"}}"),i[R]);else{m.push(R);var A=R.endsWith("GRD")?"(.*)":"(.*?)";h=h.replace("{{".concat(R,"}}"),A)}}}catch(I){b.e(I)}finally{b.f()}return{pattern:h,allVars:p,unsubstitutedVars:m}}function g(u,r){return(function(i){if(Array.isArray(i))return i})(u)||(function(i,h){var p=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(p!=null){var m,b,R,A,I=[],q=!0,L=!1;try{if(R=(p=p.call(i)).next,h!==0)for(;!(q=(m=R.call(p)).done)&&(I.push(m.value),I.length!==h);q=!0);}catch(z){L=!0,b=z}finally{try{if(!q&&p.return!=null&&(A=p.return(),Object(A)!==A))return}finally{if(L)throw b}}return I}})(u,r)||(function(i,h){if(i){if(typeof i=="string")return y(i,h);var p={}.toString.call(i).slice(8,-1);return p==="Object"&&i.constructor&&(p=i.constructor.name),p==="Map"||p==="Set"?Array.from(i):p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p)?y(i,h):void 0}})(u,r)||(function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function y(u,r){(r==null||r>u.length)&&(r=u.length);for(var i=0,h=Array(r);i<r;i++)h[i]=u[i];return h}function F(u){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},F(u)}var H=function(u){return u?(u.match(/{{([^}]+)}}/g)||[]).map(function(r){return r.substring(2,r.length-2)}):[]},W=function(u,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!u||!r)return i;var h=H(u),p=l(u,h).pattern,m=r.match(p);if(m&&m.length>1)for(var b=0;b<h.length;b++)m[b+1]&&(i[h[b]]=m[b+1]);return i},fe=function(u,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!u||!r)return i;var h=H(u),p=l(u,{}).pattern,m=new RegExp(p),b=r.match(m);if(b&&b.length>1)for(var R=0;R<h.length;R++)b[R+1]&&(i[h[R]]=b[R+1]);return i},Ce=function(u,r,i){var h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},p=arguments.length>4?arguments[4]:void 0;if(!u)return h;try{var m=null,b=(function(ae){if(!ae||typeof ae!="string")return!1;var de=ae.trim();return de.startsWith("{")||de.startsWith("[")})(u);if(b&&(m=(function(ae){try{return JSON.parse(ae)}catch{return S.w9.warn(S.Ey.CLAIM,"[PARAMS-EXTRACTOR-UTILS] Response looks like JSON but couldn't be parsed"),null}})(u)),r&&r.length>0&&i&&i.length>0)for(var R=0;R<r.length;R++){var A=r[R],I=i[R];if(!A.value)return;var q=H(A.value);if(q.length===0)return;var L=I;if(L){var z=null;if(L.jsonPath&&m)z=ot(m,L.jsonPath);else if(L.xPath&&!b)z=it(u,L.xPath);else if(L.regex){var $=u.match(new RegExp(L.regex));$&&$.length>1&&(z=$[1])}z!==void 0&&(F(z)==="object"&&z!==null?h[q[0]]=JSON.stringify(z):h[q[0]]=z===null?null:String(z))}}}catch(ae){p.error({message:"[PARAM-EXTRACTOR] Error extracting params from response:",logLevel:S.E$.ERROR,type:S.D_.CLAIM_CREATION,eventType:a.Ru.CLAIM_CREATION_FAILED,meta:{error:ae}})}return h},Ke=function(u){var r={},i={};return Object.entries(u||{}).forEach(function(h){var p=g(h,2),m=p[0],b=p[1];m.toLowerCase().includes("secret")?i[m]=b:r[m]=b}),{publicParams:r,secretParams:i}},rt=t(379);function $e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var u,r,i=typeof Symbol=="function"?Symbol:{},h=i.iterator||"@@iterator",p=i.toStringTag||"@@toStringTag";function m($,ae,de,Ge){var Le=ae&&ae.prototype instanceof R?ae:R,Se=Object.create(Le.prototype);return Ve(Se,"_invoke",(function(He,ze,Be){var le,B,Q,Ae=0,De=Be||[],J=!1,oe={p:0,n:0,v:u,a:pe,f:pe.bind(u,4),d:function(ie,ee){return le=ie,B=0,Q=u,oe.n=ee,b}};function pe(ie,ee){for(B=ie,Q=ee,r=0;!J&&Ae&&!he&&r<De.length;r++){var he,te=De[r],we=oe.p,Ne=te[2];ie>3?(he=Ne===ee)&&(Q=te[(B=te[4])?5:(B=3,3)],te[4]=te[5]=u):te[0]<=we&&((he=ie<2&&we<te[1])?(B=0,oe.v=ee,oe.n=te[1]):we<Ne&&(he=ie<3||te[0]>ee||ee>Ne)&&(te[4]=ie,te[5]=ee,oe.n=Ne,B=0))}if(he||ie>1)return b;throw J=!0,ee}return function(ie,ee,he){if(Ae>1)throw TypeError("Generator is already running");for(J&&ee===1&&pe(ee,he),B=ee,Q=he;(r=B<2?u:Q)||!J;){le||(B?B<3?(B>1&&(oe.n=-1),pe(B,Q)):oe.n=Q:oe.v=Q);try{if(Ae=2,le){if(B||(ie="next"),r=le[ie]){if(!(r=r.call(le,Q)))throw TypeError("iterator result is not an object");if(!r.done)return r;Q=r.value,B<2&&(B=0)}else B===1&&(r=le.return)&&r.call(le),B<2&&(Q=TypeError("The iterator does not provide a '"+ie+"' method"),B=1);le=u}else if((r=(J=oe.n<0)?Q:He.call(ze,oe))!==b)break}catch(te){le=u,B=1,Q=te}finally{Ae=1}}return{value:r,done:J}}})($,de,Ge),!0),Se}var b={};function R(){}function A(){}function I(){}r=Object.getPrototypeOf;var q=[][h]?r(r([][h]())):(Ve(r={},h,function(){return this}),r),L=I.prototype=R.prototype=Object.create(q);function z($){return Object.setPrototypeOf?Object.setPrototypeOf($,I):($.__proto__=I,Ve($,p,"GeneratorFunction")),$.prototype=Object.create(L),$}return A.prototype=I,Ve(L,"constructor",I),Ve(I,"constructor",A),A.displayName="GeneratorFunction",Ve(I,p,"GeneratorFunction"),Ve(L),Ve(L,p,"Generator"),Ve(L,h,function(){return this}),Ve(L,"toString",function(){return"[object Generator]"}),($e=function(){return{w:m,m:z}})()}function Ve(u,r,i,h){var p=Object.defineProperty;try{p({},"",{})}catch{p=0}Ve=function(m,b,R,A){function I(q,L){Ve(m,q,function(z){return this._invoke(q,L,z)})}b?p?p(m,b,{value:R,enumerable:!A,configurable:!A,writable:!A}):m[b]=R:(I("next",0),I("throw",1),I("return",2))},Ve(u,r,i,h)}function Wo(u,r){var i=Object.keys(u);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(u);r&&(h=h.filter(function(p){return Object.getOwnPropertyDescriptor(u,p).enumerable})),i.push.apply(i,h)}return i}function ur(u){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?Wo(Object(i),!0).forEach(function(h){ja(u,h,i[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(i)):Wo(Object(i)).forEach(function(h){Object.defineProperty(u,h,Object.getOwnPropertyDescriptor(i,h))})}return u}function ja(u,r,i){return(r=(function(h){var p=(function(m,b){if(Pr(m)!="object"||!m)return m;var R=m[Symbol.toPrimitive];if(R!==void 0){var A=R.call(m,b);if(Pr(A)!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(m)})(h,"string");return Pr(p)=="symbol"?p:p+""})(r))in u?Object.defineProperty(u,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):u[r]=i,u}function Pr(u){return Pr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Pr(u)}function Jo(u,r){return(function(i){if(Array.isArray(i))return i})(u)||(function(i,h){var p=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(p!=null){var m,b,R,A,I=[],q=!0,L=!1;try{if(R=(p=p.call(i)).next,h!==0)for(;!(q=(m=R.call(p)).done)&&(I.push(m.value),I.length!==h);q=!0);}catch(z){L=!0,b=z}finally{try{if(!q&&p.return!=null&&(A=p.return(),Object(A)!==A))return}finally{if(L)throw b}}return I}})(u,r)||(function(i,h){if(i){if(typeof i=="string")return Qo(i,h);var p={}.toString.call(i).slice(8,-1);return p==="Object"&&i.constructor&&(p=i.constructor.name),p==="Map"||p==="Set"?Array.from(i):p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p)?Qo(i,h):void 0}})(u,r)||(function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function Qo(u,r){(r==null||r>u.length)&&(r=u.length);for(var i=0,h=Array(r);i<r;i++)h[i]=u[i];return h}function Zo(u,r,i,h,p,m,b){try{var R=u[m](b),A=R.value}catch(I){return void i(I)}R.done?r(A):Promise.resolve(A).then(h,p)}var $a=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:135,r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];u<=0&&(u=135);var i="Chrome/".concat(u,".0.0.0"),h=r?" Mobile":"";return"Mozilla/5.0 ".concat("(Linux; Android 10; K)"," ").concat("AppleWebKit/537.36 (KHTML, like Gecko)"," ").concat(i).concat(h," ").concat("Safari/537.36")},Va=function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"unknown",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unknown",i=arguments.length>2?arguments[2]:void 0;return i.setContext({sessionId:u,providerId:r,type:a.D_.CLAIM_CREATION}),new Promise(function(h,p){var m=setTimeout(function(){chrome.runtime.onMessage.removeListener(b),p(new Error("Timeout: No response from offscreen document for private key request."))},1e4),b=function(R,A){return R.action!==s.wx.GET_PRIVATE_KEY_RESPONSE||R.source!==s.J_.OFFSCREEN||R.target!==s.J_.BACKGROUND||(clearTimeout(m),chrome.runtime.onMessage.removeListener(b),R.success&&R.privateKey?(i.info({message:"[CLAIM-CREATOR] Received private key from offscreen document",logLevel:a.E$.INFO,type:a.D_.CLAIM_CREATION}),h(R.privateKey)):(i.error({message:"[CLAIM-CREATOR] Failed to get private key from offscreen document: "+R.error,logLevel:a.E$.INFO,type:a.D_.CLAIM_CREATION}),p(new Error(R.error||"Unknown error getting private key from offscreen document."))),!1)};chrome.runtime.onMessage.addListener(b),i.info({message:"[CLAIM-CREATOR] Requesting private key from offscreen document",logLevel:a.E$.INFO,type:a.D_.CLAIM_CREATION}),chrome.runtime.sendMessage({action:s.wx.GET_PRIVATE_KEY,source:s.J_.BACKGROUND,target:s.J_.OFFSCREEN,sessionId:u,providerId:r},function(R){chrome.runtime.lastError&&(clearTimeout(m),chrome.runtime.onMessage.removeListener(b),i.error({message:"[CLAIM-CREATOR] Error sending GET_PRIVATE_KEY message: "+chrome.runtime.lastError.message,logLevel:a.E$.INFO,type:a.D_.CLAIM_CREATION}),p(new Error("Error sending message to offscreen document: ".concat(chrome.runtime.lastError.message))))})})},Ha=(function(){var u,r=(u=$e().m(function i(h,p){var m,b,R,A,I,q,L,z,$,ae,de,Ge,Le,Se,He,ze,Be,le,B,Q,Ae,De,J=arguments;return $e().w(function(oe){for(;;)switch(oe.p=oe.n){case 0:return R=J.length>2&&J[2]!==void 0?J[2]:"unknown",A=J.length>3&&J[3]!==void 0?J[3]:"unknown",I=J.length>4?J[4]:void 0,(q=J.length>5?J[5]:void 0).setContext({sessionId:R,providerId:A,type:a.D_.CLAIM_CREATION}),q.info({message:"[CLAIM-CREATOR] Creating claim object from request data",logLevel:a.E$.INFO,type:a.D_.CLAIM_CREATION,eventType:a.Ru.CLAIM_CREATION_STARTED}),oe.p=1,oe.n=2,se(q);case 2:q.info({message:"[CLAIM-CREATOR] Offscreen document is ready.",logLevel:a.E$.INFO,type:a.D_.CLAIM_CREATION,eventType:a.Ru.BACKGROUND_CLAIM_CREATION_OFFSCREEN_DOCUMENT_READY}),oe.n=4;break;case 3:throw oe.p=3,Ae=oe.v,q.error({message:"[CLAIM-CREATOR] Failed to ensure offscreen document: "+(Ae==null?void 0:Ae.message),logLevel:a.E$.INFO,type:a.D_.CLAIM_CREATION,eventType:a.Ru.BACKGROUND_CLAIM_CREATION_FAILED,meta:{error:Ae==null?void 0:Ae.message,request:h,providerData:p,sessionId:R,loginUrl:I}}),new Error("Failed to initialize offscreen document: ".concat(Ae.message));case 4:return L=typeof navigator<"u"&&navigator.userAgent||$a(),z=["user-agent","accept","accept-language","accept-encoding","sec-fetch-mode","sec-fetch-site","sec-fetch-user","origin","x-requested-with","sec-ch-ua","sec-ch-ua-mobile"],ae={},($={}).url=p.urlType==="TEMPLATE"?p.url:h.url,$.method=h.method||"GET",h.headers&&(de={"Sec-Fetch-Mode":"same-origin","Sec-Fetch-Site":"same-origin","User-Agent":L},Ge={Referer:h.referer&&String(h.referer)||I||origin||""},Object.entries(h.headers).forEach(function(pe){var ie=Jo(pe,2),ee=ie[0],he=ie[1],te=ee.toLowerCase();z.includes(te)?de[ee]=he:Ge[ee]=he}),Object.keys(de).length>0&&($.headers=de),Object.keys(Ge).length>0&&(ae.headers=Ge)),h.body&&(p!=null&&(Le=p.bodySniff)!==null&&Le!==void 0&&Le.enabled?$.body=p.bodySniff.template:$.body=h.body),h.cookieStr&&(ae.cookieStr=h.cookieStr),Se={},h!=null&&h.extractedParams&&Pr(h.extractedParams)==="object"&&(Se=ur(ur({},Se),h.extractedParams)),p.urlType==="TEMPLATE"&&h.url&&(Se=ur(ur({},Se),W(p.url,h.url))),p!=null&&(m=p.bodySniff)!==null&&m!==void 0&&m.enabled&&h.body&&(Se=ur(ur({},Se),fe(p.bodySniff.template,h.body))),h.responseText&&p.responseMatches&&(Se=ur(ur({},Se),Ce(h.responseText,p.responseMatches,p.responseRedactions||[]))),He=Ke(Se),ze=He.publicParams,Be=He.secretParams,Object.keys(ze).length>0&&($.paramValues=ze),Object.keys(Be).length>0&&(ae.paramValues=Be),p.responseMatches&&($.responseMatches=p.responseMatches.map(function(pe){return{value:pe.value,type:pe.type||"contains",invert:pe.invert||!1}})),p.responseRedactions&&($.responseRedactions=p.responseRedactions.map(function(pe){var ie={};return Object.entries(pe).forEach(function(ee){var he=Jo(ee,2),te=he[0],we=he[1];te!=="hash"&&(te!=="jsonPath"&&te!=="xPath"||we&&we!=="")&&(ie[te]=we)}),ie})),p.responseSelections&&($.responseSelections=p.responseSelections.map(function(pe){var ie={};return"value"in pe&&(ie.value=pe.value),"type"in pe&&(ie.type=pe.type),"invert"in pe&&(ie.invert=pe.invert),ie})),p.additionalClientOptions&&($.additionalClientOptions=p.additionalClientOptions),oe.p=5,oe.n=6,Va(R,A,q);case 6:le=oe.v,oe.n=8;break;case 7:throw oe.p=7,De=oe.v,new Error("Could not obtain owner private key: ".concat(De.message));case 8:if((B=(b=p==null?void 0:p.geoLocation)!==null&&b!==void 0?b:"")!=="{{DYNAMIC_GEO}}"){oe.n=10;break}return oe.n=9,(0,rt.C)();case 9:B=oe.v;case 10:return q.log({message:"[CLAIM-CREATOR] Geo location: "+B,logLevel:a.E$.INFO,type:a.D_.CLAIM_CREATION}),$.geoLocation=B,Q={name:"http",sessionId:R,params:$,secretParams:ae,ownerPrivateKey:le,client:{url:"wss://attestor.reclaimprotocol.org/ws"}},q.info({message:"[CLAIM-CREATOR] Claim object created successfully",logLevel:a.E$.INFO,type:a.D_.CLAIM_CREATION,eventType:a.Ru.BACKGROUND_CLAIM_CREATION_SUCCESS}),q.log({message:"[CLAIM-CREATOR] Claim object: "+JSON.stringify(Q,null,2),logLevel:a.E$.ALL,type:a.D_.CLAIM_CREATION}),oe.a(2,Q)}},i,null,[[5,7],[1,3]])}),function(){var i=this,h=arguments;return new Promise(function(p,m){var b=u.apply(i,h);function R(I){Zo(b,p,m,R,A,"next",I)}function A(I){Zo(b,p,m,R,A,"throw",I)}R(void 0)})});return function(i,h){return r.apply(this,arguments)}})();function rn(u){return rn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},rn(u)}function Xo(u,r){for(var i=0;i<r.length;i++){var h=r[i];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(u,qa(h.key),h)}}function qa(u){var r=(function(i,h){if(rn(i)!="object"||!i)return i;var p=i[Symbol.toPrimitive];if(p!==void 0){var m=p.call(i,h);if(rn(m)!="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)})(u,"string");return rn(r)=="symbol"?r:r+""}var za=(function(){return u=function h(){(function(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")})(this,h),this.sessionTimer=null,this.sessionTimerDuration=3e4,this.sessionTimerPaused=!1,this.sessionTimerRemainingTime=0,this.sessionTimerStartTime=0,this.onSessionTimeout=null},(r=[{key:"setCallbacks",value:function(h){this.onSessionTimeout=h}},{key:"startSessionTimer",value:function(){var h=this;S.w9.info(S.Ey.SESSION_TIMER,"[SESSION TIMER] Starting session timer"),this.clearSessionTimer(),this.sessionTimerStartTime=Date.now(),this.sessionTimer=setTimeout(function(){h.sessionTimer!==null?(S.w9.error(S.Ey.SESSION_TIMER,"[SESSION TIMER] Session timer expired"),h.onSessionTimeout&&h.onSessionTimeout("Session timeout: No proofs generated within time limit")):S.w9.info(S.Ey.SESSION_TIMER,"[SESSION TIMER] Timer was already cleared, ignoring timeout")},this.sessionTimerDuration)}},{key:"resetSessionTimer",value:function(){S.w9.info(S.Ey.SESSION_TIMER,"[SESSION TIMER] Resetting session timer"),this.clearSessionTimer(),this.startSessionTimer()}},{key:"clearSessionTimer",value:function(){this.sessionTimer&&(clearTimeout(this.sessionTimer),this.sessionTimer=null)}},{key:"pauseSessionTimer",value:function(){if(this.sessionTimer&&!this.sessionTimerPaused){S.w9.info(S.Ey.SESSION_TIMER,"[SESSION TIMER] Pausing session timer");var h=Date.now()-this.sessionTimerStartTime;this.sessionTimerRemainingTime=Math.max(0,this.sessionTimerDuration-h),this.clearSessionTimer(),this.sessionTimerPaused=!0}}},{key:"resumeSessionTimer",value:function(){var h=this;this.sessionTimerPaused&&(S.w9.info(S.Ey.SESSION_TIMER,"[SESSION TIMER] Resuming session timer with remaining time:",this.sessionTimerRemainingTime),this.sessionTimer=setTimeout(function(){S.w9.error(S.Ey.SESSION_TIMER,"[SESSION TIMER] Session timer expired"),h.onSessionTimeout&&h.onSessionTimeout("Session timeout: No proofs generated within time limit")},this.sessionTimerRemainingTime),this.sessionTimerStartTime=Date.now()-(this.sessionTimerDuration-this.sessionTimerRemainingTime),this.sessionTimerPaused=!1)}},{key:"clearAllTimers",value:function(){S.w9.info(S.Ey.SESSION_TIMER,"[SESSION TIMER] Clearing all timers"),this.clearSessionTimer(),this.sessionTimerPaused=!1,this.sessionTimerRemainingTime=0,this.sessionTimerStartTime=0}},{key:"setTimerDuration",value:function(h){h&&typeof h=="number"&&(this.sessionTimerDuration=h)}}])&&Xo(u.prototype,r),i&&Xo(u,i),Object.defineProperty(u,"prototype",{writable:!1}),u;var u,r,i})();function nn(u){return nn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},nn(u)}function Ya(u,r){return(function(i){if(Array.isArray(i))return i})(u)||(function(i,h){var p=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(p!=null){var m,b,R,A,I=[],q=!0,L=!1;try{if(R=(p=p.call(i)).next,h!==0)for(;!(q=(m=R.call(p)).done)&&(I.push(m.value),I.length!==h);q=!0);}catch(z){L=!0,b=z}finally{try{if(!q&&p.return!=null&&(A=p.return(),Object(A)!==A))return}finally{if(L)throw b}}return I}})(u,r)||ni(u,r)||(function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function ei(u,r){var i=Object.keys(u);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(u);r&&(h=h.filter(function(p){return Object.getOwnPropertyDescriptor(u,p).enumerable})),i.push.apply(i,h)}return i}function ti(u){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?ei(Object(i),!0).forEach(function(h){Wa(u,h,i[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(i)):ei(Object(i)).forEach(function(h){Object.defineProperty(u,h,Object.getOwnPropertyDescriptor(i,h))})}return u}function Wa(u,r,i){return(r=(function(h){var p=(function(m,b){if(nn(m)!="object"||!m)return m;var R=m[Symbol.toPrimitive];if(R!==void 0){var A=R.call(m,b);if(nn(A)!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(m)})(h,"string");return nn(p)=="symbol"?p:p+""})(r))in u?Object.defineProperty(u,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):u[r]=i,u}function ri(u,r){var i=typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(!i){if(Array.isArray(u)||(i=ni(u))||r){i&&(u=i);var h=0,p=function(){};return{s:p,n:function(){return h>=u.length?{done:!0}:{done:!1,value:u[h++]}},e:function(A){throw A},f:p}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var m,b=!0,R=!1;return{s:function(){i=i.call(u)},n:function(){var A=i.next();return b=A.done,A},e:function(A){R=!0,m=A},f:function(){try{b||i.return==null||i.return()}finally{if(R)throw m}}}}function ni(u,r){if(u){if(typeof u=="string")return oi(u,r);var i={}.toString.call(u).slice(8,-1);return i==="Object"&&u.constructor&&(i=u.constructor.name),i==="Map"||i==="Set"?Array.from(u):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?oi(u,r):void 0}}function oi(u,r){(r==null||r>u.length)&&(r=u.length);for(var i=0,h=Array(r);i<r;i++)h[i]=u[i];return h}function bt(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var u,r,i=typeof Symbol=="function"?Symbol:{},h=i.iterator||"@@iterator",p=i.toStringTag||"@@toStringTag";function m($,ae,de,Ge){var Le=ae&&ae.prototype instanceof R?ae:R,Se=Object.create(Le.prototype);return Tt(Se,"_invoke",(function(He,ze,Be){var le,B,Q,Ae=0,De=Be||[],J=!1,oe={p:0,n:0,v:u,a:pe,f:pe.bind(u,4),d:function(ie,ee){return le=ie,B=0,Q=u,oe.n=ee,b}};function pe(ie,ee){for(B=ie,Q=ee,r=0;!J&&Ae&&!he&&r<De.length;r++){var he,te=De[r],we=oe.p,Ne=te[2];ie>3?(he=Ne===ee)&&(Q=te[(B=te[4])?5:(B=3,3)],te[4]=te[5]=u):te[0]<=we&&((he=ie<2&&we<te[1])?(B=0,oe.v=ee,oe.n=te[1]):we<Ne&&(he=ie<3||te[0]>ee||ee>Ne)&&(te[4]=ie,te[5]=ee,oe.n=Ne,B=0))}if(he||ie>1)return b;throw J=!0,ee}return function(ie,ee,he){if(Ae>1)throw TypeError("Generator is already running");for(J&&ee===1&&pe(ee,he),B=ee,Q=he;(r=B<2?u:Q)||!J;){le||(B?B<3?(B>1&&(oe.n=-1),pe(B,Q)):oe.n=Q:oe.v=Q);try{if(Ae=2,le){if(B||(ie="next"),r=le[ie]){if(!(r=r.call(le,Q)))throw TypeError("iterator result is not an object");if(!r.done)return r;Q=r.value,B<2&&(B=0)}else B===1&&(r=le.return)&&r.call(le),B<2&&(Q=TypeError("The iterator does not provide a '"+ie+"' method"),B=1);le=u}else if((r=(J=oe.n<0)?Q:He.call(ze,oe))!==b)break}catch(te){le=u,B=1,Q=te}finally{Ae=1}}return{value:r,done:J}}})($,de,Ge),!0),Se}var b={};function R(){}function A(){}function I(){}r=Object.getPrototypeOf;var q=[][h]?r(r([][h]())):(Tt(r={},h,function(){return this}),r),L=I.prototype=R.prototype=Object.create(q);function z($){return Object.setPrototypeOf?Object.setPrototypeOf($,I):($.__proto__=I,Tt($,p,"GeneratorFunction")),$.prototype=Object.create(L),$}return A.prototype=I,Tt(L,"constructor",I),Tt(I,"constructor",A),A.displayName="GeneratorFunction",Tt(I,p,"GeneratorFunction"),Tt(L),Tt(L,p,"Generator"),Tt(L,h,function(){return this}),Tt(L,"toString",function(){return"[object Generator]"}),(bt=function(){return{w:m,m:z}})()}function Tt(u,r,i,h){var p=Object.defineProperty;try{p({},"",{})}catch{p=0}Tt=function(m,b,R,A){function I(q,L){Tt(m,q,function(z){return this._invoke(q,L,z)})}b?p?p(m,b,{value:R,enumerable:!A,configurable:!A,writable:!A}):m[b]=R:(I("next",0),I("throw",1),I("return",2))},Tt(u,r,i,h)}function ii(u,r,i,h,p,m,b){try{var R=u[m](b),A=R.value}catch(I){return void i(I)}R.done?r(A):Promise.resolve(A).then(h,p)}function mr(u){return function(){var r=this,i=arguments;return new Promise(function(h,p){var m=u.apply(r,i);function b(A){ii(m,h,p,b,R,"next",A)}function R(A){ii(m,h,p,b,R,"throw",A)}b(void 0)})}}function si(u,r){return qn.apply(this,arguments)}function qn(){return qn=mr(bt().m(function u(r,i){var h,p,m,b;return bt().w(function(R){for(;;)switch(R.p=R.n){case 0:if(h=r.bgLogger,R.p=1,r.providerData=null,r.parameters={},r.providerId=null,r.appId=null,r.sessionId=null,r.callbackUrl=null,r.generatedProofs=new Map,r.filteredRequests=new Map,r.initPopupMessage=new Map,r.providerDataMessage=new Map,r.providerRequestsByHash=new Map,r.aborted=!1,r.sessionTimerManager.clearAllTimers(),r.firstRequestReceived=!1,i.providerId){R.n=2;break}throw new Error("Provider ID not found");case 2:return h.setContext({type:S.D_.BACKGROUND,sessionId:i.sessionId||r.sessionId||"unknown",providerId:i.providerId||r.providerId||"unknown",appId:i.applicationId||r.appId||"unknown"}),h.info({message:"[BACKGROUND] Fetching provider data from the backend for provider Id ".concat(i.providerId),logLevel:S.E$.INFO,type:S.D_.BACKGROUND,eventType:S.Ru.BACKGROUND_FETCH_PROVIDER_DATA}),R.n=3,r.fetchProviderData(i.providerId,i.sessionId,i.applicationId);case 3:if(p=R.v,r.providerData=p,r.providerId=i.providerId,i.parameters&&(r.parameters=i.parameters),typeof i.callbackUrl=="string"&&(r.callbackUrl=i.callbackUrl),i.sessionId&&(r.sessionId=i.sessionId),i.applicationId&&(r.appId=i.applicationId),p){R.n=4;break}throw new Error("Provider data not found");case 4:return m=p.loginUrl,chrome.tabs.create({url:m},function(A){var I,q,L;r.activeTabId=A.id,h.info({message:"[BACKGROUND] New tab created for provider ".concat(i.providerId," with tab id ").concat(A.id),logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),r.managedTabs.add(A.id);var z=((I=r.providerData)===null||I===void 0?void 0:I.name)||"Default Provider",$=((q=r.providerData)===null||q===void 0?void 0:q.description)||"Default Description",ae=((L=r.providerData)===null||L===void 0||(L=L.verificationConfig)===null||L===void 0?void 0:L.dataRequired)||"Default Data",de=r.sessionId||"unknown";if(A.id){var Ge={action:r.MESSAGE_ACTIONS.SHOW_PROVIDER_VERIFICATION_POPUP,source:r.MESSAGE_SOURCES.BACKGROUND,target:r.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{providerName:z,description:$,dataRequired:ae,sessionId:de}},Le={action:r.MESSAGE_ACTIONS.PROVIDER_DATA_READY,source:r.MESSAGE_SOURCES.BACKGROUND,target:r.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{providerData:r.providerData,parameters:r.parameters,sessionId:r.sessionId,callbackUrl:r.callbackUrl,providerId:r.providerId,appId:r.appId}};r.initPopupMessage||(r.initPopupMessage=new Map),r.initPopupMessage.set(A.id,{message:Ge}),r.providerDataMessage.set(A.id,{message:Le})}else h.error({message:"[BACKGROUND] New tab does not have an ID, cannot queue message for popup.",logLevel:S.E$.INFO,type:S.D_.BACKGROUND,eventType:S.Ru.BACKGROUND_NEW_TAB_CREATED});h.info({message:"[BACKGROUND] Starting verification with session id: ".concat(r.sessionId),logLevel:S.E$.INFO,type:S.D_.BACKGROUND,eventType:S.Ru.BACKGROUND_START_VERIFICATION}),r.updateSessionStatus(i.sessionId,r.RECLAIM_SESSION_STATUS.USER_STARTED_VERIFICATION,i.providerId,i.applicationId).catch(function(Se){h.error({message:"[BACKGROUND] Error updating session status: ".concat(Se==null?void 0:Se.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND})})}),R.a(2,{success:!0,message:"Verification started, redirecting to provider login page"});case 5:throw R.p=5,b=R.v,h.error({message:"[BACKGROUND] Error starting verification: ".concat(b==null?void 0:b.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),r.activeSessionId=null,b;case 6:return R.a(2)}},u,null,[[1,5]])})),qn.apply(this,arguments)}function ai(u,r,i){return zn.apply(this,arguments)}function zn(){return zn=mr(bt().m(function u(r,i,h){var p,m,b,R;return bt().w(function(A){for(;;)switch(A.p=A.n){case 0:if((p=r.bgLogger).setContext({type:S.D_.BACKGROUND,sessionId:r.sessionId||"unknown",providerId:r.providerId||"unknown",appId:r.appId||"unknown"}),p.log({message:"[BACKGROUND] Failing session: ".concat(i),logLevel:S.E$.INFO,type:S.D_.BACKGROUND,eventType:S.Ru.SESSION_FAILED}),r.sessionTimerManager.clearAllTimers(),r.aborted=!0,!r.sessionId){A.n=4;break}return A.p=1,A.n=2,r.updateSessionStatus(r.sessionId,r.RECLAIM_SESSION_STATUS.PROOF_GENERATION_FAILED,r.providerId,r.appId);case 2:p.log({message:"[BACKGROUND] Updated session status to failed: ".concat(r.sessionId),logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),A.n=4;break;case 3:A.p=3,m=A.v,p.error({message:"[BACKGROUND] Error updating session status to failed: ".concat(m==null?void 0:m.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND});case 4:if(r.activeTabId&&chrome.tabs.sendMessage(r.activeTabId,{action:r.MESSAGE_ACTIONS.PROOF_GENERATION_FAILED,source:r.MESSAGE_SOURCES.BACKGROUND,target:r.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{requestHash:h,sessionId:r.sessionId}}).catch(function(I){p.error({message:"[BACKGROUND] Error notifying content script of session failure: ".concat(I==null?void 0:I.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND})}),!r.originalTabId){A.n=8;break}return A.p=5,A.n=6,chrome.tabs.sendMessage(r.originalTabId,{action:r.MESSAGE_ACTIONS.PROOF_GENERATION_FAILED,source:r.MESSAGE_SOURCES.BACKGROUND,target:r.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{error:i,sessionId:r.sessionId}});case 6:A.n=8;break;case 7:A.p=7,b=A.v,p.error({message:"[BACKGROUND] Error notifying original tab of session failure: ".concat(b==null?void 0:b.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND});case 8:return A.p=8,p.info({message:"[BACKGROUND] Proof generation failed, Broadcasting to popup/options pages: ".concat(i),logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),A.n=9,chrome.runtime.sendMessage({action:r.MESSAGE_ACTIONS.PROOF_GENERATION_FAILED,data:{error:i,sessionId:r.sessionId}});case 9:A.n=11;break;case 10:A.p=10,R=A.v,p.error({message:"[BACKGROUND] Error broadcasting to popup/options pages: ".concat(R==null?void 0:R.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND});case 11:r.proofGenerationQueue=[],r.isProcessingQueue=!1,r.activeSessionId=null;case 12:return A.a(2)}},u,null,[[8,10],[5,7],[1,3]])})),zn.apply(this,arguments)}function ui(u){return Yn.apply(this,arguments)}function Yn(){return Yn=mr(bt().m(function u(r){var i,h,p,m,b,R,A,I,q,L,z,$,ae,de,Ge,Le,Se,He,ze,Be,le,B,Q,Ae,De;return bt().w(function(J){for(;;)switch(J.p=J.n){case 0:if(i=r.bgLogger,J.p=1,!r.expectManyClaims){J.n=2;break}return J.a(2);case 2:if(r.sessionTimerManager.clearAllTimers(),i.setContext({type:S.D_.BACKGROUND,sessionId:r.sessionId||"unknown",providerId:r.providerId||"unknown",appId:r.appId||"unknown"}),i.info({message:"[BACKGROUND] Submitting proofs",logLevel:S.E$.INFO,type:S.D_.BACKGROUND,eventType:S.Ru.BACKGROUND_PROOF_SUBMISSION}),r.generatedProofs.size!==0){J.n=3;break}return J.a(2);case 3:if(!(p=Array.isArray((h=r.providerData)===null||h===void 0?void 0:h.requestData)&&r.providerData.requestData.length>0)){J.n=4;break}if(m=r.providerData.requestData.filter(function(oe){return r.generatedProofs.has(oe.requestHash)}).length,m===r.providerData.requestData.length){J.n=4;break}return J.a(2);case 4:if(b=[],R=new Set,p){A=ri(r.providerData.requestData);try{for(A.s();!(I=A.n()).done;)q=I.value,r.generatedProofs.has(q.requestHash)&&(L=r.generatedProofs.get(q.requestHash),b.push(r.formatProof(L,q)),R.add(q.requestHash))}catch(oe){A.e(oe)}finally{A.f()}}z=ri(r.generatedProofs.entries()),J.p=5,z.s();case 6:if(($=z.n()).done){J.n=9;break}if(ae=Ya($.value,2),de=ae[0],Ge=ae[1],!R.has(de)){J.n=7;break}return J.a(3,8);case 7:Le=r.providerRequestsByHash.get(de)||{url:"",expectedPageUrl:"",urlType:"EXACT",method:"GET",responseMatches:[],responseRedactions:[],requestHash:de},b.push(r.formatProof(Ge,Le));case 8:J.n=6;break;case 9:J.n=11;break;case 10:J.p=10,ze=J.v,z.e(ze);case 11:return J.p=11,z.f(),J.f(11);case 12:if(Se=b.map(function(oe){var pe;return ti(ti({},oe),{},{publicData:(pe=r.publicData)!==null&&pe!==void 0?pe:null})}),i.log({message:"[BACKGROUND] Final proofs: ".concat(JSON.stringify(Se)),logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),He=!1,!(r.callbackUrl&&typeof r.callbackUrl=="string"&&r.callbackUrl.length>0)){J.n=25;break}return J.p=13,i.log({message:"[BACKGROUND] Submitting proofs to callback URL: ".concat(r.callbackUrl),logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),J.n=14,r.submitProofOnCallback(Se,r.callbackUrl,r.sessionId,r.providerId,r.appId);case 14:He=!0,J.n=24;break;case 15:return J.p=15,Be=J.v,J.p=16,i.error({message:"[BACKGROUND] Notifying original tab of proof submission failure: ".concat(Be.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND,eventType:S.Ru.BACKGROUND_PROOF_SUBMISSION_FAILED}),J.n=17,chrome.tabs.sendMessage(r.originalTabId,{action:r.MESSAGE_ACTIONS.PROOF_SUBMISSION_FAILED,source:r.MESSAGE_SOURCES.BACKGROUND,target:r.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{error:Be.message,sessionId:r.sessionId}});case 17:J.n=19;break;case 18:J.p=18,le=J.v,i.error({message:"[BACKGROUND] Error notifying original tab of proof submission failure: ".concat(le==null?void 0:le.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND,eventType:S.Ru.BACKGROUND_PROOF_SUBMISSION_FAILED});case 19:return chrome.tabs.sendMessage(r.activeTabId,{action:r.MESSAGE_ACTIONS.PROOF_SUBMISSION_FAILED,source:r.MESSAGE_SOURCES.BACKGROUND,target:r.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{error:Be.message,sessionId:r.sessionId}}),J.p=20,i.error({message:"[BACKGROUND] Broadcasting to runtime of proof submission failure: ".concat(Be.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND,eventType:S.Ru.BACKGROUND_PROOF_SUBMISSION_FAILED}),J.n=21,chrome.runtime.sendMessage({action:r.MESSAGE_ACTIONS.PROOF_SUBMISSION_FAILED,data:{error:Be.message,sessionId:r.sessionId}});case 21:J.n=23;break;case 22:J.p=22,J.v;case 23:throw i.error({message:"[BACKGROUND] Error submitting proofs: ".concat(Be.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),Be;case 24:J.n=29;break;case 25:if(!r.sessionId){J.n=29;break}return J.p=26,i.log({message:"[BACKGROUND] Updating status to PROOF_GENERATION_SUCCESS",logLevel:S.E$.INFO,type:S.D_.BACKGROUND,eventType:S.Ru.BACKGROUND_PROOF_SUBMISSION_SUCCESS}),J.n=27,r.updateSessionStatus(r.sessionId,r.RECLAIM_SESSION_STATUS.PROOF_GENERATION_SUCCESS,r.providerId,r.appId);case 27:J.n=29;break;case 28:J.p=28,B=J.v,i.error({message:"[BACKGROUND] Error updating status to PROOF_GENERATION_SUCCESS: ".concat(B==null?void 0:B.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND});case 29:if(!r.activeTabId){J.n=33;break}return J.p=30,i.log({message:"[BACKGROUND] Proof submitted, Notifying content script with proofs",logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),J.n=31,chrome.tabs.sendMessage(r.activeTabId,{action:r.MESSAGE_ACTIONS.PROOF_SUBMITTED,source:r.MESSAGE_SOURCES.BACKGROUND,target:r.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{formattedProofs:b,submitted:He,sessionId:r.sessionId}});case 31:J.n=33;break;case 32:J.p=32,Q=J.v,i.error({message:"[BACKGROUND] Error notifying content script: ".concat(Q==null?void 0:Q.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND});case 33:if(!r.originalTabId){J.n=37;break}return J.p=34,i.log({message:"[BACKGROUND] Proof submitted, Notifying original tab with proofs",logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),J.n=35,chrome.tabs.sendMessage(r.originalTabId,{action:r.MESSAGE_ACTIONS.PROOF_SUBMITTED,source:r.MESSAGE_SOURCES.BACKGROUND,target:r.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{formattedProofs:b,submitted:He,sessionId:r.sessionId}});case 35:J.n=37;break;case 36:J.p=36,Ae=J.v,i.error({message:"[BACKGROUND] Error notifying original tab: ".concat(Ae==null?void 0:Ae.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND});case 37:return J.p=37,i.log({message:"[BACKGROUND] Proof submitted, Broadcasting to runtime",logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),J.n=38,chrome.runtime.sendMessage({action:r.MESSAGE_ACTIONS.PROOF_SUBMITTED,data:{formattedProofs:b,submitted:He,sessionId:r.sessionId}});case 38:J.n=40;break;case 39:J.p=39,J.v;case 40:if(r.originalTabId)try{setTimeout(mr(bt().m(function oe(){return bt().w(function(pe){for(;;)switch(pe.n){case 0:return pe.n=1,chrome.tabs.update(r.originalTabId,{active:!0});case 1:if(!r.activeTabId){pe.n=3;break}return pe.n=2,chrome.tabs.remove(r.activeTabId);case 2:r.activeTabId=null;case 3:r.originalTabId=null;case 4:return pe.a(2)}},oe)})),3e3)}catch(oe){i.error({message:"[BACKGROUND] Error navigating back or closing tab: ".concat(oe==null?void 0:oe.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND})}else if(r.activeTabId)try{setTimeout(mr(bt().m(function oe(){return bt().w(function(pe){for(;;)switch(pe.n){case 0:return pe.n=1,chrome.tabs.remove(r.activeTabId);case 1:r.activeTabId=null;case 2:return pe.a(2)}},oe)})),3e3)}catch{}return r.activeSessionId=null,J.a(2,{success:!0});case 41:throw J.p=41,De=J.v,console.log(De),i.error({message:"[BACKGROUND] Error submitting proof: ".concat(De==null?void 0:De.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),r.activeSessionId=null,De;case 42:return J.a(2)}},u,null,[[37,39],[34,36],[30,32],[26,28],[20,22],[16,18],[13,15],[5,10,11,12],[1,41]])})),Yn.apply(this,arguments)}function ci(u){return Wn.apply(this,arguments)}function Wn(){return Wn=mr(bt().m(function u(r){var i,h,p,m,b,R,A;return bt().w(function(I){for(;;)switch(I.p=I.n){case 0:if(i=r.bgLogger,I.p=1,i.setContext({type:S.D_.BACKGROUND,sessionId:r.sessionId||"unknown",providerId:r.providerId||"unknown",appId:r.appId||"unknown"}),i.log({message:"[BACKGROUND] Cancelling session",logLevel:S.E$.INFO,type:S.D_.BACKGROUND,eventType:S.Ru.BACKGROUND_SESSION_CANCELLED}),r.sessionTimerManager.clearAllTimers(),r.aborted=!0,!r.sessionId){I.n=5;break}return I.p=2,i.log({message:"[BACKGROUND] Proof generation failed, Updating status on cancel",logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),I.n=3,r.updateSessionStatus(r.sessionId,r.RECLAIM_SESSION_STATUS.PROOF_GENERATION_FAILED,r.providerId,r.appId);case 3:I.n=5;break;case 4:I.p=4,h=I.v,i.error({message:"[BACKGROUND] Error updating status on cancel: ".concat(h==null?void 0:h.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND});case 5:if(!r.activeTabId){I.n=9;break}return I.p=6,i.log({message:"[BACKGROUND] Proof generation failed, Notifying content on cancel",logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),I.n=7,chrome.tabs.sendMessage(r.activeTabId,{action:r.MESSAGE_ACTIONS.PROOF_GENERATION_FAILED,source:r.MESSAGE_SOURCES.BACKGROUND,target:r.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{error:"Cancelled by user",sessionId:r.sessionId}});case 7:I.n=9;break;case 8:I.p=8,p=I.v,i.error({message:"[BACKGROUND] Error notifying content on cancel: ".concat(p==null?void 0:p.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND});case 9:if(!r.originalTabId){I.n=13;break}return I.p=10,i.log({message:"[BACKGROUND] Proof generation failed, Notifying original tab on cancel",logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),I.n=11,chrome.tabs.sendMessage(r.originalTabId,{action:r.MESSAGE_ACTIONS.PROOF_GENERATION_FAILED,source:r.MESSAGE_SOURCES.BACKGROUND,target:r.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{error:"Cancelled by user",sessionId:r.sessionId}});case 11:I.n=13;break;case 12:I.p=12,m=I.v,i.error({message:"[BACKGROUND] Error notifying original tab on cancel: ".concat(m==null?void 0:m.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND});case 13:return I.p=13,i.log({message:"[BACKGROUND] Proof generation failed, Broadcasting to runtime on cancel",logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),I.n=14,chrome.runtime.sendMessage({action:r.MESSAGE_ACTIONS.PROOF_GENERATION_FAILED,data:{error:"Cancelled by user",sessionId:r.sessionId}});case 14:I.n=16;break;case 15:I.p=15,b=I.v,i.error({message:"[BACKGROUND] Error broadcasting to runtime on cancel: ".concat(b==null?void 0:b.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND});case 16:if(!r.originalTabId){I.n=17;break}try{setTimeout(mr(bt().m(function q(){return bt().w(function(L){for(;;)switch(L.n){case 0:return L.n=1,chrome.tabs.update(r.originalTabId,{active:!0});case 1:if(!r.activeTabId){L.n=3;break}return L.n=2,chrome.tabs.remove(r.activeTabId);case 2:r.activeTabId=null;case 3:r.originalTabId=null;case 4:return L.a(2)}},q)})),200)}catch(q){i.error({message:"[BACKGROUND] Error closing tab on cancel: ".concat(q==null?void 0:q.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND})}I.n=21;break;case 17:if(!r.activeTabId){I.n=21;break}return I.p=18,I.n=19,chrome.tabs.remove(r.activeTabId);case 19:r.activeTabId=null,I.n=21;break;case 20:I.p=20,R=I.v,i.error({message:"[BACKGROUND] Error closing active tab on cancel: ".concat(R==null?void 0:R.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND});case 21:r.proofGenerationQueue=[],r.isProcessingQueue=!1,r.providerData=null,r.parameters={},r.providerId=null,r.appId=null,r.sessionId=null,r.callbackUrl=null,r.providerRequestsByHash=new Map,r.managedTabs.clear(),r.activeSessionId=null,I.n=23;break;case 22:I.p=22,A=I.v,r.activeSessionId=null,i.error({message:"[BACKGROUND] Error during cancelSession: ".concat(A==null?void 0:A.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND});case 23:return I.a(2)}},u,null,[[18,20],[13,15],[10,12],[6,8],[2,4],[1,22]])})),Wn.apply(this,arguments)}function Jn(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var u,r,i=typeof Symbol=="function"?Symbol:{},h=i.iterator||"@@iterator",p=i.toStringTag||"@@toStringTag";function m($,ae,de,Ge){var Le=ae&&ae.prototype instanceof R?ae:R,Se=Object.create(Le.prototype);return Ct(Se,"_invoke",(function(He,ze,Be){var le,B,Q,Ae=0,De=Be||[],J=!1,oe={p:0,n:0,v:u,a:pe,f:pe.bind(u,4),d:function(ie,ee){return le=ie,B=0,Q=u,oe.n=ee,b}};function pe(ie,ee){for(B=ie,Q=ee,r=0;!J&&Ae&&!he&&r<De.length;r++){var he,te=De[r],we=oe.p,Ne=te[2];ie>3?(he=Ne===ee)&&(Q=te[(B=te[4])?5:(B=3,3)],te[4]=te[5]=u):te[0]<=we&&((he=ie<2&&we<te[1])?(B=0,oe.v=ee,oe.n=te[1]):we<Ne&&(he=ie<3||te[0]>ee||ee>Ne)&&(te[4]=ie,te[5]=ee,oe.n=Ne,B=0))}if(he||ie>1)return b;throw J=!0,ee}return function(ie,ee,he){if(Ae>1)throw TypeError("Generator is already running");for(J&&ee===1&&pe(ee,he),B=ee,Q=he;(r=B<2?u:Q)||!J;){le||(B?B<3?(B>1&&(oe.n=-1),pe(B,Q)):oe.n=Q:oe.v=Q);try{if(Ae=2,le){if(B||(ie="next"),r=le[ie]){if(!(r=r.call(le,Q)))throw TypeError("iterator result is not an object");if(!r.done)return r;Q=r.value,B<2&&(B=0)}else B===1&&(r=le.return)&&r.call(le),B<2&&(Q=TypeError("The iterator does not provide a '"+ie+"' method"),B=1);le=u}else if((r=(J=oe.n<0)?Q:He.call(ze,oe))!==b)break}catch(te){le=u,B=1,Q=te}finally{Ae=1}}return{value:r,done:J}}})($,de,Ge),!0),Se}var b={};function R(){}function A(){}function I(){}r=Object.getPrototypeOf;var q=[][h]?r(r([][h]())):(Ct(r={},h,function(){return this}),r),L=I.prototype=R.prototype=Object.create(q);function z($){return Object.setPrototypeOf?Object.setPrototypeOf($,I):($.__proto__=I,Ct($,p,"GeneratorFunction")),$.prototype=Object.create(L),$}return A.prototype=I,Ct(L,"constructor",I),Ct(I,"constructor",A),A.displayName="GeneratorFunction",Ct(I,p,"GeneratorFunction"),Ct(L),Ct(L,p,"Generator"),Ct(L,h,function(){return this}),Ct(L,"toString",function(){return"[object Generator]"}),(Jn=function(){return{w:m,m:z}})()}function Ct(u,r,i,h){var p=Object.defineProperty;try{p({},"",{})}catch{p=0}Ct=function(m,b,R,A){function I(q,L){Ct(m,q,function(z){return this._invoke(q,L,z)})}b?p?p(m,b,{value:R,enumerable:!A,configurable:!A,writable:!A}):m[b]=R:(I("next",0),I("throw",1),I("return",2))},Ct(u,r,i,h)}function li(u,r,i,h,p,m,b){try{var R=u[m](b),A=R.value}catch(I){return void i(I)}R.done?r(A):Promise.resolve(A).then(h,p)}function Qn(){var u;return u=Jn().m(function r(i,h,p,m){var b,R,A,I,q,L,z,$,ae,de,Ge,Le,Se,He,ze,Be,le,B,Q,Ae,De,J,oe,pe,ie,ee,he,te,we,Ne,dt,nr,xt,Zt;return Jn().w(function(ge){for(;;)switch(ge.p=ge.n){case 0:A=h.action,I=h.source,q=h.target,L=h.data,(z=i.bgLogger).setContext({type:S.D_.BACKGROUND,sessionId:i.sessionId||"unknown",providerId:i.providerId||"unknown",appId:i.appId||"unknown"}),ge.p=1,dt=A,ge.n=dt===i.MESSAGE_ACTIONS.CONTENT_SCRIPT_LOADED?2:dt===i.MESSAGE_ACTIONS.REQUEST_PROVIDER_DATA?4:dt===i.MESSAGE_ACTIONS.CHECK_IF_MANAGED_TAB?5:dt===i.MESSAGE_ACTIONS.START_VERIFICATION?6:dt===i.MESSAGE_ACTIONS.CANCEL_VERIFICATION?12:dt===i.MESSAGE_ACTIONS.OFFSCREEN_DOCUMENT_READY?16:dt===i.MESSAGE_ACTIONS.CLOSE_CURRENT_TAB?17:dt===i.MESSAGE_ACTIONS.FILTERED_REQUEST_FOUND?18:dt===i.MESSAGE_ACTIONS.GET_CURRENT_TAB_ID?24:dt===i.MESSAGE_ACTIONS.UPDATE_PUBLIC_DATA?25:dt===i.MESSAGE_ACTIONS.UPDATE_EXPECT_MANY_CLAIMS?26:dt===i.MESSAGE_ACTIONS.GET_PARAMETERS?33:dt===i.MESSAGE_ACTIONS.REPORT_PROVIDER_ERROR?34:dt===i.MESSAGE_ACTIONS.REQUEST_CLAIM?38:dt===i.MESSAGE_ACTIONS.INJECT_VIA_SCRIPTING?46:56;break;case 2:if(I!==i.MESSAGE_SOURCES.CONTENT_SCRIPT||q!==i.MESSAGE_SOURCES.BACKGROUND){ge.n=3;break}return ae=(($=p.tab)===null||$===void 0?void 0:$.id)&&i.managedTabs.has(p.tab.id),chrome.tabs.sendMessage(p.tab.id,{action:i.MESSAGE_ACTIONS.SHOULD_INITIALIZE,source:i.MESSAGE_SOURCES.BACKGROUND,target:i.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{shouldInitialize:ae}}).catch(function(ct){return z.error({message:"[BACKGROUND] Error sending initialization status: "+(ct==null?void 0:ct.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND})}),ae&&i.initPopupMessage&&i.initPopupMessage.has(p.tab.id)&&(de=i.initPopupMessage.get(p.tab.id),chrome.tabs.sendMessage(p.tab.id,de.message).then(function(){chrome.runtime.lastError&&z.error({message:"[BACKGROUND] Error sending (pending) SHOW_PROVIDER_VERIFICATION_POPUP to tab ".concat(p.tab.id,": ").concat(chrome.runtime.lastError.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND,eventType:S.Ru.BACKGROUND_SHOW_PROVIDER_VERIFICATION_POPUP_ERROR})}).catch(function(ct){return z.error({message:"[BACKGROUND] Error sending (pending) SHOW_PROVIDER_VERIFICATION_POPUP to tab ".concat(p.tab.id," (promise catch): ").concat(ct==null?void 0:ct.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND,eventType:S.Ru.BACKGROUND_SHOW_PROVIDER_VERIFICATION_POPUP_ERROR})})),ae&&i.providerDataMessage&&i.providerDataMessage.has(p.tab.id)&&(Ge=i.providerDataMessage.get(p.tab.id),chrome.tabs.sendMessage(p.tab.id,Ge.message).then(function(){chrome.runtime.lastError&&z.error({message:"[BACKGROUND] Error sending (pending) PROVIDER_DATA_READY to tab ".concat(p.tab.id,": ").concat(chrome.runtime.lastError.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND,eventType:S.Ru.BACKGROUND_PROVIDER_DATA_READY_ERROR})}).catch(function(ct){return z.error({message:"[BACKGROUND] Error sending (pending) PROVIDER_DATA_READY to tab ".concat(p.tab.id," (promise catch): ").concat(ct==null?void 0:ct.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND,eventType:S.Ru.BACKGROUND_PROVIDER_DATA_READY_ERROR})}),i.providerDataMessage.delete(p.tab.id)),z.info({message:"[BACKGROUND] Successfully sent (pending) SHOW_PROVIDER_VERIFICATION_POPUP and PROVIDER_DATA_READY to tab ".concat(p.tab.id),logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),m({success:!0}),ge.a(3,57);case 3:return ge.a(3,57);case 4:return I===i.MESSAGE_SOURCES.CONTENT_SCRIPT&&q===i.MESSAGE_SOURCES.BACKGROUND&&(z.setContext({sessionId:i.sessionId||"unknown",providerId:i.providerId||"unknown",appId:i.appId||"unknown",type:S.D_.BACKGROUND}),z.info({message:"[BACKGROUND] Content script requested provider data",logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),(Le=p.tab)!==null&&Le!==void 0&&Le.id&&i.managedTabs.has(p.tab.id)&&i.providerData&&i.parameters&&i.sessionId&&i.callbackUrl!==void 0?(z.info({message:"[BACKGROUND] Sending the following provider data to content script: "+JSON.stringify(i.providerData),logLevel:S.E$.INFO,type:S.D_.BACKGROUND,eventType:S.Ru.BACKGROUND_PROVIDER_DATA_READY}),m({success:!0,data:{providerData:i.providerData,parameters:i.parameters||{},sessionId:i.sessionId,callbackUrl:i.callbackUrl,providerId:i.providerId,appId:i.appId}})):(z.error({message:"[BACKGROUND] Provider data not available or tab not managed",logLevel:S.E$.INFO,type:S.D_.BACKGROUND,eventType:S.Ru.BACKGROUND_PROVIDER_DATA_NOT_AVAILABLE}),m({success:!1,error:"Provider data not available or tab not managed"}))),ge.a(3,57);case 5:return I===i.MESSAGE_SOURCES.CONTENT_SCRIPT&&q===i.MESSAGE_SOURCES.BACKGROUND&&(He=((Se=p.tab)===null||Se===void 0?void 0:Se.id)&&i.managedTabs.has(p.tab.id),z.info({message:"[BACKGROUND] Checking if tab is managed: "+He,logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),m({success:!0,isManaged:He})),ge.a(3,57);case 6:if(I!==i.MESSAGE_SOURCES.CONTENT_SCRIPT||q!==i.MESSAGE_SOURCES.BACKGROUND){ge.n=10;break}if(z.setContext({sessionId:L.sessionId||i.sessionId||"unknown",providerId:L.providerId||i.providerId||"unknown",appId:L.applicationId||i.appId||"unknown",type:S.D_.BACKGROUND}),z.info({message:"[BACKGROUND] Starting a new verification with data: "+JSON.stringify(L),logLevel:S.E$.INFO,type:S.D_.BACKGROUND,eventType:S.Ru.BACKGROUND_START_VERIFICATION}),i.loggerService.startFlushInterval(),!i.activeSessionId||i.activeSessionId===L.sessionId){ge.n=8;break}if(i.managedTabs.size!==0){ge.n=7;break}i.activeSessionId=null,ge.n=8;break;case 7:return z.error({message:"[BACKGROUND] Another verification is in progress",logLevel:S.E$.INFO,type:S.D_.BACKGROUND,eventType:S.Ru.BACKGROUND_ANOTHER_VERIFICATION_IN_PROGRESS}),m({success:!1,error:"Another verification is in progress"}),ge.a(3,57);case 8:return i.activeSessionId=L.sessionId||i.activeSessionId,p.tab&&p.tab.id&&(i.originalTabId=p.tab.id),z.info({message:"[BACKGROUND] Starting verification with session id: "+L.sessionId,logLevel:S.E$.INFO,type:S.D_.BACKGROUND,eventType:S.Ru.BACKGROUND_START_VERIFICATION}),ge.n=9,si(i,L);case 9:ze=ge.v,m({success:!0,result:ze}),ge.n=11;break;case 10:m({success:!1,error:"Action not supported"});case 11:return ge.a(3,57);case 12:if(I!==i.MESSAGE_SOURCES.CONTENT_SCRIPT||q!==i.MESSAGE_SOURCES.BACKGROUND){ge.n=14;break}return z.info({message:"[BACKGROUND] Cancelling verification with session id: "+(L==null?void 0:L.sessionId),logLevel:S.E$.INFO,type:S.D_.BACKGROUND,eventType:S.Ru.BACKGROUND_CANCEL_VERIFICATION}),ge.n=13,ci(i,L==null?void 0:L.sessionId);case 13:m({success:!0}),ge.n=15;break;case 14:z.error({message:"[BACKGROUND] CANCEL_VERIFICATION: Action not supported",logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),m({success:!1,error:"Action not supported"});case 15:return ge.a(3,57);case 16:return I===i.MESSAGE_SOURCES.OFFSCREEN&&q===i.MESSAGE_SOURCES.BACKGROUND?(z.info({message:"[BACKGROUND] Offscreen document ready",logLevel:S.E$.INFO,type:S.D_.BACKGROUND,eventType:S.Ru.BACKGROUND_OFFSCREEN_DOCUMENT_READY}),m({success:!0})):(z.error({message:"[BACKGROUND] OFFSCREEN_DOCUMENT_READY: Action not supported",logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),m({success:!1,error:"Action not supported"})),ge.a(3,57);case 17:return I===i.MESSAGE_SOURCES.CONTENT_SCRIPT&&q===i.MESSAGE_SOURCES.BACKGROUND?p.tab&&p.tab.id?chrome.tabs.remove(p.tab.id,function(){chrome.runtime.lastError?(z.error({message:"[BACKGROUND] Error closing tab: "+chrome.runtime.lastError.message,logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),m({success:!1,error:chrome.runtime.lastError.message})):(i.managedTabs.has(p.tab.id)&&i.managedTabs.delete(p.tab.id),z.info({message:"[BACKGROUND] Tab closed",logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),m({success:!0}))}):(z.error({message:"[BACKGROUND] CLOSE_CURRENT_TAB: No tab ID provided by sender.",logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),m({success:!1,error:"No tab ID found to close."})):m({success:!1,error:"Action not supported"}),ge.a(2,!0);case 18:if(I!==i.MESSAGE_SOURCES.CONTENT_SCRIPT||q!==i.MESSAGE_SOURCES.BACKGROUND){ge.n=22;break}if(!i.filteredRequests.has(L.criteria.requestHash)){ge.n=19;break}z.info({message:"[BACKGROUND] Filtered request found with hash: "+L.criteria.requestHash,logLevel:S.E$.INFO,type:S.D_.BACKGROUND,eventType:S.Ru.BACKGROUND_FILTERED_REQUEST_FOUND}),m({success:!0,result:i.filteredRequests.get(L.criteria.requestHash)}),ge.n=21;break;case 19:return i.filteredRequests.set(L.criteria.requestHash,L.request),ge.n=20,i.processFilteredRequest(L.request,L.criteria,L.sessionId,L.loginUrl);case 20:Be=ge.v,z.info({message:"[BACKGROUND] Filtered request processed with hash: "+L.criteria.requestHash,logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),m({success:!0,result:Be});case 21:ge.n=23;break;case 22:z.error({message:"[BACKGROUND] FILTERED_REQUEST_FOUND: Action not supported",logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),m({success:!1,error:"Action not supported"});case 23:return ge.a(3,57);case 24:return I===i.MESSAGE_SOURCES.CONTENT_SCRIPT&&q===i.MESSAGE_SOURCES.BACKGROUND?(z.info({message:"[BACKGROUND] Getting current tab id: "+((le=p.tab)===null||le===void 0?void 0:le.id),logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),m({success:!0,tabId:(B=p.tab)===null||B===void 0?void 0:B.id})):(z.error({message:"[BACKGROUND] GET_CURRENT_TAB_ID: Action not supported",logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),m({success:!1,error:"Action not supported"})),ge.a(3,57);case 25:return(b=p.tab)!==null&&b!==void 0&&b.id&&i.managedTabs.has(p.tab.id)?(z.info({message:"[BACKGROUND] Updating public data: "+(L==null?void 0:L.publicData),logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),i.publicData=typeof(L==null?void 0:L.publicData)=="string"?L.publicData:null,m({success:!0})):(z.error({message:"[BACKGROUND] UPDATE_PUBLIC_DATA: Tab is not managed by extension",logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),m({success:!1,error:"Tab is not managed by extension"})),ge.a(3,57);case 26:if((Q=p.tab)===null||Q===void 0||!Q.id||!i.managedTabs.has(p.tab.id)){ge.n=31;break}if(Ae=i.expectManyClaims&&!(L!=null&&L.expectMany),i.expectManyClaims=!(L==null||!L.expectMany),z.info({message:"[BACKGROUND] Updating expect many claims: "+(L==null?void 0:L.expectMany),logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),!(Ae&&i.generatedProofs.size>0)){ge.n=30;break}return ge.p=27,z.info({message:"[BACKGROUND] Turning off expect many claims, Submitting proofs",logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),ge.n=28,i.submitProofs();case 28:ge.n=30;break;case 29:ge.p=29,ge.v;case 30:m({success:!0}),ge.n=32;break;case 31:z.error({message:"[BACKGROUND] UPDATE_EXPECT_MANY_CLAIMS: Tab is not managed by extension",logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),m({success:!1,error:"Tab is not managed by extension"});case 32:return ge.a(3,57);case 33:return(R=p.tab)!==null&&R!==void 0&&R.id&&i.managedTabs.has(p.tab.id)?(z.info({message:"[BACKGROUND] Getting parameters: "+i.parameters,logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),m({success:!0,parameters:i.parameters||{}})):(z.error({message:"[BACKGROUND] UPDATE_EXPECT_MANY_CLAIMS: Tab is not managed by extension",logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),m({success:!1,error:"Tab is not managed by extension"})),ge.a(3,57);case 34:if((De=p.tab)===null||De===void 0||!De.id||!i.managedTabs.has(p.tab.id)){ge.n=36;break}return i.aborted=!0,ge.n=35,i.failSession((L==null?void 0:L.message)||"Provider error");case 35:z.info({message:"[BACKGROUND] Provider error reported: "+(L==null?void 0:L.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),m({success:!0}),ge.n=37;break;case 36:z.error({message:"[BACKGROUND] REPORT_PROVIDER_ERROR: Tab is not managed by extension",logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),m({success:!1,error:"Tab is not managed by extension"});case 37:return ge.a(3,57);case 38:if(I!==i.MESSAGE_SOURCES.CONTENT_SCRIPT||q!==i.MESSAGE_SOURCES.BACKGROUND||(J=p.tab)===null||J===void 0||!J.id||!i.managedTabs.has(p.tab.id)){ge.n=44;break}if(ge.p=39,i.sessionId||L.sessionId){ge.n=40;break}return m({success:!1,error:"Session not initialized"}),ge.a(3,57);case 40:return ge.n=41,i.processFilteredRequest(L.request,L.criteria,L.sessionId,L.loginUrl||"");case 41:oe=ge.v,z.info({message:"[BACKGROUND] Request claim processed: "+L.requestHash,logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),m({success:!0,result:oe}),ge.n=43;break;case 42:ge.p=42,nr=ge.v,z.error({message:"[BACKGROUND] Request claim processing failed: "+(nr==null?void 0:nr.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),m({success:!1,error:(nr==null?void 0:nr.message)||String(nr)});case 43:ge.n=45;break;case 44:z.error({message:"[BACKGROUND] REQUEST_CLAIM: Tab is not managed by extension",logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),m({success:!1,error:"Tab is not managed by extension"});case 45:return ge.a(3,57);case 46:if(I!==i.MESSAGE_SOURCES.CONTENT_SCRIPT||q!==i.MESSAGE_SOURCES.BACKGROUND||(pe=p.tab)===null||pe===void 0||!pe.id){ge.n=54;break}if(ie=p.tab.id,ee=L==null?void 0:L.op,ge.p=47,ee!=="REPLAY_PAGE_FETCH"){ge.n=49;break}return z.info({message:"[BACKGROUND] REPLAY_PAGE_FETCH: Executing script",logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),ge.n=48,chrome.scripting.executeScript({target:{tabId:ie},world:"MAIN",func:function(ct){try{ct!=null&&ct.showAlert&&(console.log("Fetching initial page"),alert("Fetching initial page")),fetch(window.location.href,{method:"GET",headers:{accept:"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8","accept-language":"en-GB,en;q=0.5"},credentials:"include",cache:"no-store"}).catch(function(){})}catch(Wt){z.error({message:"[BACKGROUND] REPLAY_PAGE_FETCH failed: "+(Wt==null?void 0:Wt.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND})}},args:[{showAlert:!(L==null||!L.showAlert)}]});case 48:return z.info({message:"[BACKGROUND] REPLAY_PAGE_FETCH executed in MAIN world",logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),m({success:!0}),ge.a(3,57);case 49:if(ee!=="RUN_CUSTOM_INJECTION"){ge.n=51;break}return te=String((L==null?void 0:L.code)||""),ge.n=50,chrome.scripting.executeScript({target:{tabId:p.tab.id},world:"MAIN",func:function(ct){try{var Wt=String((ct==null?void 0:ct.code)||"");return Wt?window.__reclaimCustomInjectionDone__?{status:"skipped",reason:"already_injected"}:(function(){try{var Et=(document.querySelector("script[nonce]")||{}).nonce;if(!Et)return!1;var Lt=document.createElement("script");return Lt.setAttribute("nonce",Et),Lt.textContent=Wt,(document.documentElement||document.head||document).appendChild(Lt),Lt.remove(),!0}catch{return!1}})()||(function(){try{if(!window.trustedTypes)return!1;for(var Et=(document.querySelector("script[nonce]")||{}).nonce||"",Lt=0,Lr=["reclaim-extension-sdk","reclaim","default","policy","app"];Lt<Lr.length;Lt++){var Or=Lr[Lt];try{var st=window.trustedTypes.createPolicy(Or,{createScript:function(_e){return _e}}),ve=document.createElement("script");return Et&&ve.setAttribute("nonce",Et),ve.text=st.createScript(Wt),(document.documentElement||document.head||document).appendChild(ve),ve.remove(),!0}catch{}}return!1}catch{return!1}})()||(function(){try{var Et=document.createElement("script");return Et.textContent=Wt,(document.documentElement||document.head||document).appendChild(Et),Et.remove(),!0}catch{return!1}})()?(window.__reclaimCustomInjectionDone__=!0,{status:"executed"}):{status:"error",reason:"all_strategies_failed"}:{status:"skipped",reason:"no_code"}}catch(Et){return{status:"error",reason:String((Et==null?void 0:Et.message)||Et)}}},args:[{code:te}]});case 50:return we=ge.v,Ne=we==null||(he=we[0])===null||he===void 0?void 0:he.result,z.info({message:"[BACKGROUND] RUN_CUSTOM_INJECTION result: "+JSON.stringify(Ne),logLevel:S.E$.INFO,type:S.D_.BACKGROUND,meta:{result:Ne}}),m({success:!0,result:Ne}),ge.a(3,57);case 51:ge.n=53;break;case 52:ge.p=52,xt=ge.v,z.error({message:"[BACKGROUND] INJECT_VIA_SCRIPTING failed: "+(xt==null?void 0:xt.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND,meta:{e:xt}}),m({success:!1,error:(xt==null?void 0:xt.message)||String(xt)});case 53:ge.n=55;break;case 54:m({success:!1,error:"Action not supported"});case 55:return ge.a(3,57);case 56:z.error({message:"[BACKGROUND] DEFAULT: Action not supported",logLevel:S.E$.INFO,type:S.D_.BACKGROUND}),m({success:!1,error:"Action not supported"});case 57:ge.n=59;break;case 58:ge.p=58,Zt=ge.v,z.error({message:"[BACKGROUND] Error handling "+A+": "+(Zt==null?void 0:Zt.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND,meta:{error:Zt}}),m({success:!1,error:Zt.message});case 59:return ge.a(2,!0)}},r,null,[[47,52],[39,42],[27,29],[1,58]])}),Qn=function(){var r=this,i=arguments;return new Promise(function(h,p){var m=u.apply(r,i);function b(A){li(m,h,p,b,R,"next",A)}function R(A){li(m,h,p,b,R,"throw",A)}b(void 0)})},Qn.apply(this,arguments)}function on(u){return on=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},on(u)}function Zn(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var u,r,i=typeof Symbol=="function"?Symbol:{},h=i.iterator||"@@iterator",p=i.toStringTag||"@@toStringTag";function m($,ae,de,Ge){var Le=ae&&ae.prototype instanceof R?ae:R,Se=Object.create(Le.prototype);return _t(Se,"_invoke",(function(He,ze,Be){var le,B,Q,Ae=0,De=Be||[],J=!1,oe={p:0,n:0,v:u,a:pe,f:pe.bind(u,4),d:function(ie,ee){return le=ie,B=0,Q=u,oe.n=ee,b}};function pe(ie,ee){for(B=ie,Q=ee,r=0;!J&&Ae&&!he&&r<De.length;r++){var he,te=De[r],we=oe.p,Ne=te[2];ie>3?(he=Ne===ee)&&(Q=te[(B=te[4])?5:(B=3,3)],te[4]=te[5]=u):te[0]<=we&&((he=ie<2&&we<te[1])?(B=0,oe.v=ee,oe.n=te[1]):we<Ne&&(he=ie<3||te[0]>ee||ee>Ne)&&(te[4]=ie,te[5]=ee,oe.n=Ne,B=0))}if(he||ie>1)return b;throw J=!0,ee}return function(ie,ee,he){if(Ae>1)throw TypeError("Generator is already running");for(J&&ee===1&&pe(ee,he),B=ee,Q=he;(r=B<2?u:Q)||!J;){le||(B?B<3?(B>1&&(oe.n=-1),pe(B,Q)):oe.n=Q:oe.v=Q);try{if(Ae=2,le){if(B||(ie="next"),r=le[ie]){if(!(r=r.call(le,Q)))throw TypeError("iterator result is not an object");if(!r.done)return r;Q=r.value,B<2&&(B=0)}else B===1&&(r=le.return)&&r.call(le),B<2&&(Q=TypeError("The iterator does not provide a '"+ie+"' method"),B=1);le=u}else if((r=(J=oe.n<0)?Q:He.call(ze,oe))!==b)break}catch(te){le=u,B=1,Q=te}finally{Ae=1}}return{value:r,done:J}}})($,de,Ge),!0),Se}var b={};function R(){}function A(){}function I(){}r=Object.getPrototypeOf;var q=[][h]?r(r([][h]())):(_t(r={},h,function(){return this}),r),L=I.prototype=R.prototype=Object.create(q);function z($){return Object.setPrototypeOf?Object.setPrototypeOf($,I):($.__proto__=I,_t($,p,"GeneratorFunction")),$.prototype=Object.create(L),$}return A.prototype=I,_t(L,"constructor",I),_t(I,"constructor",A),A.displayName="GeneratorFunction",_t(I,p,"GeneratorFunction"),_t(L),_t(L,p,"Generator"),_t(L,h,function(){return this}),_t(L,"toString",function(){return"[object Generator]"}),(Zn=function(){return{w:m,m:z}})()}function _t(u,r,i,h){var p=Object.defineProperty;try{p({},"",{})}catch{p=0}_t=function(m,b,R,A){function I(q,L){_t(m,q,function(z){return this._invoke(q,L,z)})}b?p?p(m,b,{value:R,enumerable:!A,configurable:!A,writable:!A}):m[b]=R:(I("next",0),I("throw",1),I("return",2))},_t(u,r,i,h)}function fi(u,r){var i=Object.keys(u);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(u);r&&(h=h.filter(function(p){return Object.getOwnPropertyDescriptor(u,p).enumerable})),i.push.apply(i,h)}return i}function hi(u){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?fi(Object(i),!0).forEach(function(h){Ja(u,h,i[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(i)):fi(Object(i)).forEach(function(h){Object.defineProperty(u,h,Object.getOwnPropertyDescriptor(i,h))})}return u}function Ja(u,r,i){return(r=(function(h){var p=(function(m,b){if(on(m)!="object"||!m)return m;var R=m[Symbol.toPrimitive];if(R!==void 0){var A=R.call(m,b);if(on(A)!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(m)})(h,"string");return on(p)=="symbol"?p:p+""})(r))in u?Object.defineProperty(u,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):u[r]=i,u}function di(u,r,i,h,p,m,b){try{var R=u[m](b),A=R.value}catch(I){return void i(I)}R.done?r(A):Promise.resolve(A).then(h,p)}function Qa(u,r,i){u.proofGenerationQueue.push({claimData:r,requestHash:i}),u.isProcessingQueue||(u.sessionTimerManager.pauseSessionTimer(),pi(u))}function pi(u){return Xn.apply(this,arguments)}function Xn(){var u;return u=Zn().m(function r(i){var h,p,m,b,R,A,I,q,L,z,$;return Zn().w(function(ae){for(;;)switch(ae.p=ae.n){case 0:if((h=i.bgLogger).setContext({sessionId:i.sessionId||"unknown",providerId:i.providerId||"unknown",appId:i.appId||"unknown",type:S.D_.BACKGROUND}),!i.aborted){ae.n=1;break}return h.info({message:"[BACKGROUND] Proof generation queue aborted",logLevel:S.E$.INFO,type:S.D_.BACKGROUND,eventType:S.Ru.BACKGROUND_PROOF_GENERATION_QUEUE_ABORTED}),ae.a(2);case 1:if(!i.isProcessingQueue&&i.proofGenerationQueue.length!==0){ae.n=3;break}if(i.proofGenerationQueue.length!==0){ae.n=2;break}return(m=Array.isArray((p=i.providerData)===null||p===void 0?void 0:p.requestData)?i.providerData.requestData.length:0)>0?i.providerData.requestData.filter(function(de){return i.generatedProofs.has(de.requestHash)}).length===m?(i.sessionTimerManager.clearAllTimers(),i.expectManyClaims||setTimeout(function(){return i.submitProofs()},0)):i.sessionTimerManager.resumeSessionTimer():(i.sessionTimerManager.clearAllTimers(),i.expectManyClaims||setTimeout(function(){return i.submitProofs()},0)),ae.a(2);case 2:i.sessionTimerManager.resumeSessionTimer();case 3:if(i.isProcessingQueue=!0,b=i.proofGenerationQueue.shift(),ae.p=4,!i.aborted){ae.n=5;break}return h.info({message:"[BACKGROUND] Proof generation aborted",logLevel:S.E$.INFO,type:S.D_.BACKGROUND,eventType:S.Ru.BACKGROUND_PROOF_GENERATION_ABORTED}),ae.a(2);case 5:return chrome.tabs.sendMessage(i.activeTabId,{action:i.MESSAGE_ACTIONS.PROOF_GENERATION_STARTED,source:i.MESSAGE_SOURCES.BACKGROUND,target:i.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{requestHash:b.requestHash}}),h.info({message:"[BACKGROUND] Proof generation started for request hash: "+b.requestHash,logLevel:S.E$.INFO,type:S.D_.BACKGROUND,eventType:S.Ru.BACKGROUND_PROOF_GENERATION_STARTED}),ae.n=6,i.generateProof(hi(hi({},b.claimData),{},{publicData:(R=i.publicData)!==null&&R!==void 0?R:null}),h);case 6:if(A=ae.v,!i.aborted){ae.n=7;break}return h.info({message:"[BACKGROUND] Proof generation aborted",logLevel:S.E$.INFO,type:S.D_.BACKGROUND,eventType:S.Ru.BACKGROUND_PROOF_GENERATION_ABORTED}),ae.a(2);case 7:if(A.success){ae.n=8;break}return h.error({message:"[BACKGROUND] Proof generation failed for request hash: "+b.requestHash+": "+A.error,logLevel:S.E$.INFO,type:S.D_.BACKGROUND,eventType:S.Ru.BACKGROUND_PROOF_GENERATION_FAILED}),i.failSession("Proof generation failed: "+A.error,b.requestHash),ae.a(2);case 8:(I=A.proof)&&(i.generatedProofs.has(b.requestHash)||i.generatedProofs.set(b.requestHash,I),h.info({message:"[BACKGROUND] Proof generation successful for request hash: "+b.requestHash,logLevel:S.E$.INFO,type:S.D_.BACKGROUND,eventType:S.Ru.BACKGROUND_PROOF_GENERATION_SUCCESS}),chrome.tabs.sendMessage(i.activeTabId,{action:i.MESSAGE_ACTIONS.PROOF_GENERATION_SUCCESS,source:i.MESSAGE_SOURCES.BACKGROUND,target:i.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{requestHash:b.requestHash}}),i.sessionTimerManager.resetSessionTimer()),ae.n=10;break;case 9:return ae.p=9,$=ae.v,h.error({message:"[BACKGROUND] Proof generation failed for request hash: "+b.requestHash+": "+($==null?void 0:$.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND,eventType:S.Ru.BACKGROUND_PROOF_GENERATION_FAILED}),i.failSession("Proof generation failed: "+$.message,b.requestHash),ae.a(2);case 10:if(ae.p=10,i.isProcessingQueue=!1,!i.aborted){ae.n=11;break}return ae.a(2);case 11:return i.proofGenerationQueue.length>0?pi(i):(L=Array.isArray((q=i.providerData)===null||q===void 0?void 0:q.requestData)?i.providerData.requestData.length:0)>0?(z=i.providerData.requestData.filter(function(de){return i.generatedProofs.has(de.requestHash)}).length,i.sessionTimerManager.clearAllTimers(),z===L?i.expectManyClaims||setTimeout(function(){return i.submitProofs()},0):i.sessionTimerManager.resumeSessionTimer()):(i.sessionTimerManager.clearAllTimers(),i.expectManyClaims||setTimeout(function(){return i.submitProofs()},0)),ae.f(10);case 12:return ae.a(2)}},r,null,[[4,9,10,12]])}),Xn=function(){var r=this,i=arguments;return new Promise(function(h,p){var m=u.apply(r,i);function b(A){di(m,h,p,b,R,"next",A)}function R(A){di(m,h,p,b,R,"throw",A)}b(void 0)})},Xn.apply(this,arguments)}function Ur(u,r){var i=typeof Symbol<"u"&&u[Symbol.iterator]||u["@@iterator"];if(!i){if(Array.isArray(u)||(i=gi(u))||r){i&&(u=i);var h=0,p=function(){};return{s:p,n:function(){return h>=u.length?{done:!0}:{done:!1,value:u[h++]}},e:function(A){throw A},f:p}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var m,b=!0,R=!1;return{s:function(){i=i.call(u)},n:function(){var A=i.next();return b=A.done,A},e:function(A){R=!0,m=A},f:function(){try{b||i.return==null||i.return()}finally{if(R)throw m}}}}function Er(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var u,r,i=typeof Symbol=="function"?Symbol:{},h=i.iterator||"@@iterator",p=i.toStringTag||"@@toStringTag";function m($,ae,de,Ge){var Le=ae&&ae.prototype instanceof R?ae:R,Se=Object.create(Le.prototype);return Dt(Se,"_invoke",(function(He,ze,Be){var le,B,Q,Ae=0,De=Be||[],J=!1,oe={p:0,n:0,v:u,a:pe,f:pe.bind(u,4),d:function(ie,ee){return le=ie,B=0,Q=u,oe.n=ee,b}};function pe(ie,ee){for(B=ie,Q=ee,r=0;!J&&Ae&&!he&&r<De.length;r++){var he,te=De[r],we=oe.p,Ne=te[2];ie>3?(he=Ne===ee)&&(Q=te[(B=te[4])?5:(B=3,3)],te[4]=te[5]=u):te[0]<=we&&((he=ie<2&&we<te[1])?(B=0,oe.v=ee,oe.n=te[1]):we<Ne&&(he=ie<3||te[0]>ee||ee>Ne)&&(te[4]=ie,te[5]=ee,oe.n=Ne,B=0))}if(he||ie>1)return b;throw J=!0,ee}return function(ie,ee,he){if(Ae>1)throw TypeError("Generator is already running");for(J&&ee===1&&pe(ee,he),B=ee,Q=he;(r=B<2?u:Q)||!J;){le||(B?B<3?(B>1&&(oe.n=-1),pe(B,Q)):oe.n=Q:oe.v=Q);try{if(Ae=2,le){if(B||(ie="next"),r=le[ie]){if(!(r=r.call(le,Q)))throw TypeError("iterator result is not an object");if(!r.done)return r;Q=r.value,B<2&&(B=0)}else B===1&&(r=le.return)&&r.call(le),B<2&&(Q=TypeError("The iterator does not provide a '"+ie+"' method"),B=1);le=u}else if((r=(J=oe.n<0)?Q:He.call(ze,oe))!==b)break}catch(te){le=u,B=1,Q=te}finally{Ae=1}}return{value:r,done:J}}})($,de,Ge),!0),Se}var b={};function R(){}function A(){}function I(){}r=Object.getPrototypeOf;var q=[][h]?r(r([][h]())):(Dt(r={},h,function(){return this}),r),L=I.prototype=R.prototype=Object.create(q);function z($){return Object.setPrototypeOf?Object.setPrototypeOf($,I):($.__proto__=I,Dt($,p,"GeneratorFunction")),$.prototype=Object.create(L),$}return A.prototype=I,Dt(L,"constructor",I),Dt(I,"constructor",A),A.displayName="GeneratorFunction",Dt(I,p,"GeneratorFunction"),Dt(L),Dt(L,p,"Generator"),Dt(L,h,function(){return this}),Dt(L,"toString",function(){return"[object Generator]"}),(Er=function(){return{w:m,m:z}})()}function Dt(u,r,i,h){var p=Object.defineProperty;try{p({},"",{})}catch{p=0}Dt=function(m,b,R,A){function I(q,L){Dt(m,q,function(z){return this._invoke(q,L,z)})}b?p?p(m,b,{value:R,enumerable:!A,configurable:!A,writable:!A}):m[b]=R:(I("next",0),I("throw",1),I("return",2))},Dt(u,r,i,h)}function bn(u){return(function(r){if(Array.isArray(r))return eo(r)})(u)||(function(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)})(u)||gi(u)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function gi(u,r){if(u){if(typeof u=="string")return eo(u,r);var i={}.toString.call(u).slice(8,-1);return i==="Object"&&u.constructor&&(i=u.constructor.name),i==="Map"||i==="Set"?Array.from(u):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?eo(u,r):void 0}}function eo(u,r){(r==null||r>u.length)&&(r=u.length);for(var i=0,h=Array(r);i<r;i++)h[i]=u[i];return h}function yi(u,r,i,h,p,m,b){try{var R=u[m](b),A=R.value}catch(I){return void i(I)}R.done?r(A):Promise.resolve(A).then(h,p)}function to(u){return function(){var r=this,i=arguments;return new Promise(function(h,p){var m=u.apply(r,i);function b(A){yi(m,h,p,b,R,"next",A)}function R(A){yi(m,h,p,b,R,"throw",A)}b(void 0)})}}function Za(u,r){return ro.apply(this,arguments)}function ro(){return ro=to(Er().m(function u(r,i){var h,p,m,b,R,A,I,q,L,z,$,ae,de,Ge,Le,Se,He,ze,Be,le,B,Q,Ae,De,J,oe,pe,ie,ee,he,te,we,Ne,dt,nr,xt,Zt,ge,ct,Wt,Et,Lt,Lr,Or;return Er().w(function(st){for(;;)switch(st.p=st.n){case 0:if(st.p=0,chrome.cookies&&chrome.cookies.getAll){st.n=1;break}return i.info({message:"[BACKGROUND] Chrome cookies API not available",logLevel:S.E$.INFO,type:S.D_.BACKGROUND,meta:{url:r}}),st.a(2,null);case 1:return h=new URL(r),p=h.hostname,h.protocol,m=function(ve){var _e=ve.split(".");if(_e.length<=2)return ve;var Je=new Set(["co.uk","ac.uk","gov.uk","co.in","com.au","com.br","com.mx","com.sg"]),et=_e.slice(-2).join("."),gt=_e.slice(-3).join(".");return Je.has(et)?_e.slice(-3).join("."):Je.has(gt)?_e.slice(-4).join("."):_e.slice(-2).join(".")},b=function(ve){var _e=m(ve),Je=new Set;return Je.add("https://".concat(ve)),Je.add("https://".concat(_e)),Je.add("https://www.".concat(_e)),bn(Je)},R=function(ve){var _e=ve.split("."),Je=new Set;Je.add(ve);for(var et=1;et<_e.length;et++)Je.add(_e.slice(et).join(".")),Je.add("."+_e.slice(et).join("."));return bn(Je)},A=(function(){var ve=to(Er().m(function _e(){var Je;return Er().w(function(et){for(;;)switch(et.p=et.n){case 0:return et.p=0,et.n=1,chrome.cookies.getAllCookieStores();case 1:return Je=et.v,et.a(2,Array.isArray(Je)&&Je.length?Je:[{id:void 0}]);case 2:return et.p=2,et.v,et.a(2,[{id:void 0}])}},_e,null,[[0,2]])}));return function(){return ve.apply(this,arguments)}})(),I=(function(){var ve=to(Er().m(function _e(Je){var et;return Er().w(function(gt){for(;;)switch(gt.p=gt.n){case 0:return gt.p=0,gt.n=1,chrome.cookies.getAll(Je);case 1:return gt.a(2,gt.v);case 2:return gt.p=2,et=gt.v,i.info({message:"[BACKGROUND] cookies.getAll failed for details: ",logLevel:S.E$.INFO,type:S.D_.BACKGROUND,meta:{details:Je,error:et==null?void 0:et.message}}),gt.a(2,[])}},_e,null,[[0,2]])}));return function(_e){return ve.apply(this,arguments)}})(),q=function(ve){return Xa(ve,h,i)},L=function(ve,_e){var Je,et,gt,no;if(!!ve.hostOnly!=!!_e.hostOnly)return ve.hostOnly?ve:_e;if((((Je=ve.path)===null||Je===void 0?void 0:Je.length)||0)!==(((et=_e.path)===null||et===void 0?void 0:et.length)||0))return(((gt=ve.path)===null||gt===void 0?void 0:gt.length)||0)>(((no=_e.path)===null||no===void 0?void 0:no.length)||0)?ve:_e;var bi=ve.expirationDate||0,Ai=_e.expirationDate||0;if(bi!==Ai)return bi>Ai?ve:_e;var Ii=ve.lastAccessed||0,Ri=_e.lastAccessed||0;return Ii!==Ri?Ii>Ri?ve:_e:ve},z=[],st.n=2,A();case 2:$=st.v,ae=[],de=function(ve){var _e=JSON.stringify(ve);ae.some(function(Je){return JSON.stringify(Je)===_e})||ae.push(ve)},Ge=R(p),Le=b(p),Se=Ur($);try{for(Se.s();!(He=Se.n()).done;){ze=He.value.id,Be=Ur(Ge);try{for(Be.s();!(le=Be.n()).done;)B=le.value,de({domain:B,storeId:ze})}catch(ve){Be.e(ve)}finally{Be.f()}de({url:r,storeId:ze}),Q=Ur(Ge);try{for(Q.s();!(Ae=Q.n()).done;){De=Ae.value,J=Ur(Le);try{for(J.s();!(oe=J.n()).done;)pe=oe.value,de({domain:De,partitionKey:{topLevelSite:pe},storeId:ze})}catch(ve){J.e(ve)}finally{J.f()}}}catch(ve){Q.e(ve)}finally{Q.f()}ie=Ur(Le);try{for(ie.s();!(ee=ie.n()).done;)he=ee.value,de({url:r,partitionKey:{topLevelSite:he},storeId:ze})}catch(ve){ie.e(ve)}finally{ie.f()}}}catch(ve){Se.e(ve)}finally{Se.f()}return st.n=3,Promise.all(ae.map(function(ve){return I(ve)}));case 3:te=st.v,we=Ur(te);try{for(we.s();!(Ne=we.n()).done;)dt=Ne.value,z.push.apply(z,bn(dt))}catch(ve){we.e(ve)}finally{we.f()}nr=function(ve){var _e;return[ve.name,ve.domain||"",ve.path||"",((_e=ve.partitionKey)===null||_e===void 0?void 0:_e.topLevelSite)||""].join("|")},xt=new Map,Zt=0,ge=z;case 4:if(!(Zt<ge.length)){st.n=7;break}if(ct=ge[Zt],q(ct)){st.n=5;break}return st.a(3,6);case 5:Wt=nr(ct),Et=xt.get(Wt),xt.set(Wt,Et?L(Et,ct):ct);case 6:Zt++,st.n=4;break;case 7:if((Lt=bn(xt.values())).length!==0){st.n=8;break}return st.a(2,null);case 8:return Lt.sort(function(ve,_e){var Je=function(gt){return gt?gt.length:0};if(Je(ve.path)!==Je(_e.path))return Je(_e.path)-Je(ve.path);if(!!ve.hostOnly!=!!_e.hostOnly)return ve.hostOnly?-1:1;var et=ve.expirationDate||0;return(_e.expirationDate||0)-et}),Lr=Lt.map(function(ve){return"".concat(ve.name,"=").concat(ve.value)}).join("; "),st.a(2,Lr||null);case 9:return st.p=9,Or=st.v,i.error({message:"[BACKGROUND] Error getting cookies for URL: "+(Or==null?void 0:Or.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND,meta:{error:Or==null?void 0:Or.message}}),st.a(2,null)}},u,null,[[0,9]])})),ro.apply(this,arguments)}function Xa(u,r,i){try{var h=u.domain.startsWith(".")?u.domain.substring(1):u.domain,p=r.hostname;if(!(p===h||p.endsWith("."+h)||u.domain.startsWith(".")&&p.endsWith(u.domain.substring(1))))return!1;var m=u.path||"/";if(!r.pathname.startsWith(m))return!1;var b=r.protocol==="https:";return!(u.secure&&!b)&&!(u.expirationDate&&u.expirationDate<Date.now()/1e3)}catch(R){return i.info({message:"[BACKGROUND] Error checking cookie inclusion: "+(R==null?void 0:R.message),logLevel:S.E$.INFO,type:S.D_.BACKGROUND,meta:{error:R==null?void 0:R.message}}),!1}}function sn(u){return sn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},sn(u)}function an(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var u,r,i=typeof Symbol=="function"?Symbol:{},h=i.iterator||"@@iterator",p=i.toStringTag||"@@toStringTag";function m($,ae,de,Ge){var Le=ae&&ae.prototype instanceof R?ae:R,Se=Object.create(Le.prototype);return Pt(Se,"_invoke",(function(He,ze,Be){var le,B,Q,Ae=0,De=Be||[],J=!1,oe={p:0,n:0,v:u,a:pe,f:pe.bind(u,4),d:function(ie,ee){return le=ie,B=0,Q=u,oe.n=ee,b}};function pe(ie,ee){for(B=ie,Q=ee,r=0;!J&&Ae&&!he&&r<De.length;r++){var he,te=De[r],we=oe.p,Ne=te[2];ie>3?(he=Ne===ee)&&(Q=te[(B=te[4])?5:(B=3,3)],te[4]=te[5]=u):te[0]<=we&&((he=ie<2&&we<te[1])?(B=0,oe.v=ee,oe.n=te[1]):we<Ne&&(he=ie<3||te[0]>ee||ee>Ne)&&(te[4]=ie,te[5]=ee,oe.n=Ne,B=0))}if(he||ie>1)return b;throw J=!0,ee}return function(ie,ee,he){if(Ae>1)throw TypeError("Generator is already running");for(J&&ee===1&&pe(ee,he),B=ee,Q=he;(r=B<2?u:Q)||!J;){le||(B?B<3?(B>1&&(oe.n=-1),pe(B,Q)):oe.n=Q:oe.v=Q);try{if(Ae=2,le){if(B||(ie="next"),r=le[ie]){if(!(r=r.call(le,Q)))throw TypeError("iterator result is not an object");if(!r.done)return r;Q=r.value,B<2&&(B=0)}else B===1&&(r=le.return)&&r.call(le),B<2&&(Q=TypeError("The iterator does not provide a '"+ie+"' method"),B=1);le=u}else if((r=(J=oe.n<0)?Q:He.call(ze,oe))!==b)break}catch(te){le=u,B=1,Q=te}finally{Ae=1}}return{value:r,done:J}}})($,de,Ge),!0),Se}var b={};function R(){}function A(){}function I(){}r=Object.getPrototypeOf;var q=[][h]?r(r([][h]())):(Pt(r={},h,function(){return this}),r),L=I.prototype=R.prototype=Object.create(q);function z($){return Object.setPrototypeOf?Object.setPrototypeOf($,I):($.__proto__=I,Pt($,p,"GeneratorFunction")),$.prototype=Object.create(L),$}return A.prototype=I,Pt(L,"constructor",I),Pt(I,"constructor",A),A.displayName="GeneratorFunction",Pt(I,p,"GeneratorFunction"),Pt(L),Pt(L,p,"Generator"),Pt(L,h,function(){return this}),Pt(L,"toString",function(){return"[object Generator]"}),(an=function(){return{w:m,m:z}})()}function Pt(u,r,i,h){var p=Object.defineProperty;try{p({},"",{})}catch{p=0}Pt=function(m,b,R,A){function I(q,L){Pt(m,q,function(z){return this._invoke(q,L,z)})}b?p?p(m,b,{value:R,enumerable:!A,configurable:!A,writable:!A}):m[b]=R:(I("next",0),I("throw",1),I("return",2))},Pt(u,r,i,h)}function mi(u,r){var i=Object.keys(u);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(u);r&&(h=h.filter(function(p){return Object.getOwnPropertyDescriptor(u,p).enumerable})),i.push.apply(i,h)}return i}function Ei(u){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?mi(Object(i),!0).forEach(function(h){eu(u,h,i[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(i)):mi(Object(i)).forEach(function(h){Object.defineProperty(u,h,Object.getOwnPropertyDescriptor(i,h))})}return u}function eu(u,r,i){return(r=(function(h){var p=(function(m,b){if(sn(m)!="object"||!m)return m;var R=m[Symbol.toPrimitive];if(R!==void 0){var A=R.call(m,b);if(sn(A)!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(m)})(h,"string");return sn(p)=="symbol"?p:p+""})(r))in u?Object.defineProperty(u,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):u[r]=i,u}function Oi(u,r,i,h,p,m,b){try{var R=u[m](b),A=R.value}catch(I){return void i(I)}R.done?r(A):Promise.resolve(A).then(h,p)}function vi(u){return function(){var r=this,i=arguments;return new Promise(function(h,p){var m=u.apply(r,i);function b(A){Oi(m,h,p,b,R,"next",A)}function R(A){Oi(m,h,p,b,R,"throw",A)}b(void 0)})}}var Ut=(0,c.y8)({sessionId:"unknown",providerId:"unknown",appId:"unknown",source:"reclaim-extension-sdk"});function tu(){C();var u={activeTabId:null,providerData:null,parameters:{},providerId:null,appId:null,sessionId:null,callbackUrl:null,publicData:null,aborted:!1,expectManyClaims:!1,originalTabId:null,managedTabs:new Set,providerRequestsByHash:new Map,generatedProofs:new Map,filteredRequests:new Map,proofGenerationQueue:[],isProcessingQueue:!1,firstRequestReceived:!1,initPopupMessage:new Map,providerDataMessage:new Map,activeSessionId:null,sessionTimerManager:new za,fetchProviderData:v,updateSessionStatus:w,submitProofOnCallback:U,RECLAIM_SESSION_STATUS:s.Ew,MESSAGE_ACTIONS:s.wx,MESSAGE_SOURCES:s.J_,generateProof:Ie,formatProof:Re.c,createClaimObject:Ha,loggerService:c.Ow,bgLogger:Ut,debugLogger:S.w9,DebugLogType:S.Ey,processFilteredRequest:null,failSession:null,submitProofs:null};return Ut.setContext({sessionId:u.sessionId||"unknown",providerId:u.providerId||"unknown",appId:u.appId||"unknown",type:a.D_.BACKGROUND}),Ut.info({message:"Background initialized INFO",logLevel:a.E$.INFO,type:a.D_.BACKGROUND,eventType:a.Ru.BACKGROUND_INITIALIZED}),Ut.all({message:"Background initialized ALL",logLevel:a.E$.ALL,type:a.D_.BACKGROUND,eventType:a.Ru.BACKGROUND_INITIALIZED}),u.failSession=function(){for(var r=arguments.length,i=new Array(r),h=0;h<r;h++)i[h]=arguments[h];return ai.apply(o,[u].concat(i))},u.submitProofs=function(){for(var r=arguments.length,i=new Array(r),h=0;h<r;h++)i[h]=arguments[h];return ui.apply(o,[u].concat(i))},u.processFilteredRequest=(function(){var r=vi(an().m(function i(h,p,m,b){var R,A,I,q,L,z,$,ae;return an().w(function(de){for(;;)switch(de.p=de.n){case 0:if(de.p=0,m=u.sessionId||m){de.n=1;break}return u.failSession("Session not initialized for claim request",p==null?void 0:p.requestHash),de.a(2,{success:!1,error:"Session not initialized"});case 1:return u.firstRequestReceived||(u.firstRequestReceived=!0,u.sessionTimerManager.startSessionTimer()),Ut.setContext({sessionId:u.sessionId||"unknown",providerId:u.providerId||"unknown",appId:u.appId||"unknown",type:a.D_.BACKGROUND}),Ut.info({message:"[BACKGROUND] Filtering request for request hash: ".concat(p.requestHash),logLevel:a.E$.INFO,type:a.D_.BACKGROUND,eventType:a.Ru.BACKGROUND_REQUEST_FILTERED}),de.n=2,Za(h.url,u.bgLogger);case 2:return(R=de.v)&&(h.cookieStr=R),Ut.log({message:"[BACKGROUND] Cookies for URL: ".concat(h.url),logLevel:a.E$.ALL,type:a.D_.BACKGROUND,meta:{request:h,criteria:p,sessionId:m,loginUrl:b,cookies:R}}),chrome.tabs.sendMessage(u.activeTabId,{action:u.MESSAGE_ACTIONS.CLAIM_CREATION_REQUESTED,source:u.MESSAGE_SOURCES.BACKGROUND,target:u.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{requestHash:p.requestHash}}),A=null,de.p=3,L=Ei(Ei({},p),{},{geoLocation:(I=(q=u.providerData)===null||q===void 0?void 0:q.geoLocation)!==null&&I!==void 0?I:""}),de.n=4,u.createClaimObject(h,L,m,u.providerId,b,u.bgLogger);case 4:A=de.v,de.n=6;break;case 5:return de.p=5,$=de.v,Ut.error({message:"[BACKGROUND] Error creating claim object: "+$.message,logLevel:a.E$.INFO,type:a.D_.BACKGROUND,eventType:a.Ru.BACKGROUND_CLAIM_CREATION_FAILED}),chrome.tabs.sendMessage(u.activeTabId,{action:u.MESSAGE_ACTIONS.CLAIM_CREATION_FAILED,source:u.MESSAGE_SOURCES.BACKGROUND,target:u.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{requestHash:p.requestHash}}),u.failSession("Claim creation failed: "+$.message,p.requestHash),de.a(2,{success:!1,error:$.message});case 6:return A&&(chrome.tabs.sendMessage(u.activeTabId,{action:u.MESSAGE_ACTIONS.CLAIM_CREATION_SUCCESS,source:u.MESSAGE_SOURCES.BACKGROUND,target:u.MESSAGE_SOURCES.CONTENT_SCRIPT,data:{requestHash:p.requestHash}}),Ut.info({message:"[BACKGROUND] Claim Object creation successful for request hash: "+p.requestHash,logLevel:a.E$.INFO,type:a.D_.BACKGROUND,eventType:a.Ru.BACKGROUND_CLAIM_CREATION_SUCCESS})),(z={url:(p==null?void 0:p.url)||(h==null?void 0:h.url)||"",expectedPageUrl:(p==null?void 0:p.expectedPageUrl)||"",urlType:(p==null?void 0:p.urlType)||"EXACT",method:(p==null?void 0:p.method)||(h==null?void 0:h.method)||"GET",responseMatches:Array.isArray(p==null?void 0:p.responseMatches)?p.responseMatches:[],responseRedactions:Array.isArray(p==null?void 0:p.responseRedactions)?p.responseRedactions:[],requestHash:p==null?void 0:p.requestHash}).requestHash&&u.providerRequestsByHash.set(z.requestHash,z),Qa(u,A,p.requestHash),Ut.info({message:"[BACKGROUND] Proof generation queued for request hash: "+p.requestHash,logLevel:a.E$.INFO,type:a.D_.BACKGROUND,eventType:a.Ru.BACKGROUND_PROOF_GENERATION_QUEUED}),de.a(2,{success:!0,message:"Proof generation queued"});case 7:return de.p=7,ae=de.v,Ut.error({message:"[BACKGROUND] Error processing filtered request: "+ae.message,logLevel:a.E$.INFO,type:a.D_.BACKGROUND,eventType:a.Ru.BACKGROUND_REQUEST_FILTERED_ERROR}),u.failSession("Error processing request: "+ae.message,p.requestHash),de.a(2,{success:!1,error:ae.message})}},i,null,[[3,5],[0,7]])}));return function(i,h,p,m){return r.apply(this,arguments)}})(),u.sessionTimerManager.setCallbacks(u.failSession),u.sessionTimerManager.setTimerDuration(3e4),chrome.runtime.onMessage.addListener(function(r,i,h){return(function(p,m,b,R){Qn.apply(this,arguments)})(u,r,i,h),!0}),chrome.tabs.onRemoved.addListener((function(){var r=vi(an().m(function i(h){var p,m;return an().w(function(b){for(;;)switch(b.p=b.n){case 0:if(u.managedTabs.has(h)&&u.managedTabs.delete(h),p=h===u.activeTabId,m=u.managedTabs.size===0,!u.activeSessionId||!p&&!m||u.aborted){b.n=4;break}return u.aborted=!0,b.p=1,Ut.error({message:"[BACKGROUND] Verification tab closed by user",logLevel:a.E$.INFO,type:a.D_.BACKGROUND,sessionId:u.activeSessionId||u.sessionId||"unknown",providerId:u.providerId||"unknown",appId:u.appId||"unknown"}),b.n=2,u.failSession("Verification tab closed by user");case 2:b.n=4;break;case 3:b.p=3,b.v;case 4:p&&(u.activeTabId=null),m&&(u.originalTabId=null,u.activeSessionId=null);case 5:return b.a(2)}},i,null,[[1,3]])}));return function(i){return r.apply(this,arguments)}})()),Ut.info({message:"[BACKGROUND]  Background initialization complete",logLevel:a.E$.INFO,type:a.D_.BACKGROUND}),u}},526:(n,e)=>{e.byteLength=function(O){var v=d(O),w=v[0],U=v[1];return 3*(w+U)/4-U},e.toByteArray=function(O){var v,w,U=d(O),T=U[0],N=U[1],_=new s((function(M,re,G){return 3*(re+G)/4-G})(0,T,N)),P=0,K=N>0?T-4:T;for(w=0;w<K;w+=4)v=o[O.charCodeAt(w)]<<18|o[O.charCodeAt(w+1)]<<12|o[O.charCodeAt(w+2)]<<6|o[O.charCodeAt(w+3)],_[P++]=v>>16&255,_[P++]=v>>8&255,_[P++]=255&v;return N===2&&(v=o[O.charCodeAt(w)]<<2|o[O.charCodeAt(w+1)]>>4,_[P++]=255&v),N===1&&(v=o[O.charCodeAt(w)]<<10|o[O.charCodeAt(w+1)]<<4|o[O.charCodeAt(w+2)]>>2,_[P++]=v>>8&255,_[P++]=255&v),_},e.fromByteArray=function(O){for(var v,w=O.length,U=w%3,T=[],N=16383,_=0,P=w-U;_<P;_+=N)T.push(E(O,_,_+N>P?P:_+N));return U===1?(v=O[w-1],T.push(t[v>>2]+t[v<<4&63]+"==")):U===2&&(v=(O[w-2]<<8)+O[w-1],T.push(t[v>>10]+t[v>>4&63]+t[v<<2&63]+"=")),T.join("")};for(var t=[],o=[],s=typeof Uint8Array<"u"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)t[a]=c[a],o[c.charCodeAt(a)]=a;function d(O){var v=O.length;if(v%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var w=O.indexOf("=");return w===-1&&(w=v),[w,w===v?0:4-w%4]}function f(O){return t[O>>18&63]+t[O>>12&63]+t[O>>6&63]+t[63&O]}function E(O,v,w){for(var U,T=[],N=v;N<w;N+=3)U=(O[N]<<16&16711680)+(O[N+1]<<8&65280)+(255&O[N+2]),T.push(f(U));return T.join("")}o[45]=62,o[95]=63},573:(n,e,t)=>{t.d(e,{c:()=>o});var o=function(c,a){var d;return{identifier:c.claim.identifier,claimData:c.claim,signatures:[s(c.signatures.claimSignature)],witnesses:[{id:c.signatures.attestorAddress,url:"wss://attestor.reclaimprotocol.org/ws"}],taskId:null,publicData:(d=c.publicData)!==null&&d!==void 0?d:null,providerRequest:a}},s=function(c){if(!c)return"";var a=Object.values(c).map(function(d){return d.toString(16).padStart(2,"0")}).join("");return"0x".concat(a)}},606:n=>{var e,t,o=n.exports={};function s(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function a(N){if(e===setTimeout)return setTimeout(N,0);if((e===s||!e)&&setTimeout)return e=setTimeout,setTimeout(N,0);try{return e(N,0)}catch{try{return e.call(null,N,0)}catch{return e.call(this,N,0)}}}(function(){try{e=typeof setTimeout=="function"?setTimeout:s}catch{e=s}try{t=typeof clearTimeout=="function"?clearTimeout:c}catch{t=c}})();var d,f=[],E=!1,O=-1;function v(){E&&d&&(E=!1,d.length?f=d.concat(f):O=-1,f.length&&w())}function w(){if(!E){var N=a(v);E=!0;for(var _=f.length;_;){for(d=f,f=[];++O<_;)d&&d[O].run();O=-1,_=f.length}d=null,E=!1,(function(P){if(t===clearTimeout)return clearTimeout(P);if((t===c||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(P);try{return t(P)}catch{try{return t.call(null,P)}catch{return t.call(this,P)}}})(N)}}function U(N,_){this.fun=N,this.array=_}function T(){}o.nextTick=function(N){var _=new Array(arguments.length-1);if(arguments.length>1)for(var P=1;P<arguments.length;P++)_[P-1]=arguments[P];f.push(new U(N,_)),f.length!==1||E||a(w)},U.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=T,o.addListener=T,o.once=T,o.off=T,o.removeListener=T,o.removeAllListeners=T,o.emit=T,o.prependListener=T,o.prependOnceListener=T,o.listeners=function(N){return[]},o.binding=function(N){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(N){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},770:(n,e,t)=>{t.d(e,{y8:()=>G,Ow:()=>re});var o=t(859);function s(D){return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},s(D)}function c(D,C){for(var j=0;j<C.length;j++){var k=C[j];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(D,a(k.key),k)}}function a(D){var C=(function(j,k){if(s(j)!="object"||!j)return j;var V=j[Symbol.toPrimitive];if(V!==void 0){var ne=V.call(j,k);if(s(ne)!="object")return ne;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(j)})(D,"string");return s(C)=="symbol"?C:C+""}var d=(function(){function D(V){var ne=V.sessionId,X=V.providerId,se=V.appId,Y=V.logLine,ue=V.type,ce=V.eventType,ye=V.logLevel,Ie=V.source,Re=V.tabId,S=V.url,x=V.meta,Pe=V.time,Te=Pe===void 0?null:Pe,qe=V.deviceId;(function(nt,Ze){if(!(nt instanceof Ze))throw new TypeError("Cannot call a class as a function")})(this,D),this.sessionId=ne,this.providerId=X,this.appId=se,this.logLine=Y,this.type=ue,this.eventType=ce,this.logLevel=ye,this.source=Ie,this.tabId=Re,this.url=S,this.meta=x||void 0,this.time=Te||new Date,this.deviceId=qe}return C=D,k=[{key:"fromDateTimeToTimeStamp",value:function(V){return(1e6*V.getTime()).toString()}}],(j=[{key:"toJson",value:function(){var V={logLine:this.logLine,ts:D.fromDateTimeToTimeStamp(this.time),logLevel:this.logLevel,sessionId:this.sessionId,providerId:this.providerId,appId:this.appId,source:this.source,deviceId:this.deviceId};return this.type&&(V.type=this.type),this.eventType&&(V.eventType=this.eventType),this.tabId&&(V.tabId=this.tabId),this.url&&(V.url=this.url),this.meta&&(V.meta=this.meta),V}}])&&c(C.prototype,j),k&&c(C,k),Object.defineProperty(C,"prototype",{writable:!1}),C;var C,j,k})();function f(D){return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},f(D)}function E(D){return(function(C){if(Array.isArray(C))return O(C)})(D)||(function(C){if(typeof Symbol<"u"&&C[Symbol.iterator]!=null||C["@@iterator"]!=null)return Array.from(C)})(D)||(function(C,j){if(C){if(typeof C=="string")return O(C,j);var k={}.toString.call(C).slice(8,-1);return k==="Object"&&C.constructor&&(k=C.constructor.name),k==="Map"||k==="Set"?Array.from(C):k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k)?O(C,j):void 0}})(D)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function O(D,C){(C==null||C>D.length)&&(C=D.length);for(var j=0,k=Array(C);j<C;j++)k[j]=D[j];return k}function v(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var D,C,j=typeof Symbol=="function"?Symbol:{},k=j.iterator||"@@iterator",V=j.toStringTag||"@@toStringTag";function ne(Re,S,x,Pe){var Te=S&&S.prototype instanceof se?S:se,qe=Object.create(Te.prototype);return w(qe,"_invoke",(function(nt,Ze,Ye){var Ue,Ee,Me,Rt=0,vt=Ye||[],be=!1,ot={p:0,n:0,v:D,a:it,f:it.bind(D,4),d:function(ke,Xe){return Ue=ke,Ee=0,Me=D,ot.n=Xe,X}};function it(ke,Xe){for(Ee=ke,Me=Xe,C=0;!be&&Rt&&!l&&C<vt.length;C++){var l,g=vt[C],y=ot.p,F=g[2];ke>3?(l=F===Xe)&&(Me=g[(Ee=g[4])?5:(Ee=3,3)],g[4]=g[5]=D):g[0]<=y&&((l=ke<2&&y<g[1])?(Ee=0,ot.v=Xe,ot.n=g[1]):y<F&&(l=ke<3||g[0]>Xe||Xe>F)&&(g[4]=ke,g[5]=Xe,ot.n=F,Ee=0))}if(l||ke>1)return X;throw be=!0,Xe}return function(ke,Xe,l){if(Rt>1)throw TypeError("Generator is already running");for(be&&Xe===1&&it(Xe,l),Ee=Xe,Me=l;(C=Ee<2?D:Me)||!be;){Ue||(Ee?Ee<3?(Ee>1&&(ot.n=-1),it(Ee,Me)):ot.n=Me:ot.v=Me);try{if(Rt=2,Ue){if(Ee||(ke="next"),C=Ue[ke]){if(!(C=C.call(Ue,Me)))throw TypeError("iterator result is not an object");if(!C.done)return C;Me=C.value,Ee<2&&(Ee=0)}else Ee===1&&(C=Ue.return)&&C.call(Ue),Ee<2&&(Me=TypeError("The iterator does not provide a '"+ke+"' method"),Ee=1);Ue=D}else if((C=(be=ot.n<0)?Me:nt.call(Ze,ot))!==X)break}catch(g){Ue=D,Ee=1,Me=g}finally{Rt=1}}return{value:C,done:be}}})(Re,x,Pe),!0),qe}var X={};function se(){}function Y(){}function ue(){}C=Object.getPrototypeOf;var ce=[][k]?C(C([][k]())):(w(C={},k,function(){return this}),C),ye=ue.prototype=se.prototype=Object.create(ce);function Ie(Re){return Object.setPrototypeOf?Object.setPrototypeOf(Re,ue):(Re.__proto__=ue,w(Re,V,"GeneratorFunction")),Re.prototype=Object.create(ye),Re}return Y.prototype=ue,w(ye,"constructor",ue),w(ue,"constructor",Y),Y.displayName="GeneratorFunction",w(ue,V,"GeneratorFunction"),w(ye),w(ye,V,"Generator"),w(ye,k,function(){return this}),w(ye,"toString",function(){return"[object Generator]"}),(v=function(){return{w:ne,m:Ie}})()}function w(D,C,j,k){var V=Object.defineProperty;try{V({},"",{})}catch{V=0}w=function(ne,X,se,Y){function ue(ce,ye){w(ne,ce,function(Ie){return this._invoke(ce,ye,Ie)})}X?V?V(ne,X,{value:se,enumerable:!Y,configurable:!Y,writable:!Y}):ne[X]=se:(ue("next",0),ue("throw",1),ue("return",2))},w(D,C,j,k)}function U(D,C,j,k,V,ne,X){try{var se=D[ne](X),Y=se.value}catch(ue){return void j(ue)}se.done?C(Y):Promise.resolve(Y).then(k,V)}function T(D){return function(){var C=this,j=arguments;return new Promise(function(k,V){var ne=D.apply(C,j);function X(Y){U(ne,k,V,X,se,"next",Y)}function se(Y){U(ne,k,V,X,se,"throw",Y)}X(void 0)})}}function N(D,C){var j=Object.keys(D);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(D);C&&(k=k.filter(function(V){return Object.getOwnPropertyDescriptor(D,V).enumerable})),j.push.apply(j,k)}return j}function _(D){for(var C=1;C<arguments.length;C++){var j=arguments[C]!=null?arguments[C]:{};C%2?N(Object(j),!0).forEach(function(k){P(D,k,j[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(j)):N(Object(j)).forEach(function(k){Object.defineProperty(D,k,Object.getOwnPropertyDescriptor(j,k))})}return D}function P(D,C,j){return(C=M(C))in D?Object.defineProperty(D,C,{value:j,enumerable:!0,configurable:!0,writable:!0}):D[C]=j,D}function K(D,C){for(var j=0;j<C.length;j++){var k=C[j];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(D,M(k.key),k)}}function M(D){var C=(function(j,k){if(f(j)!="object"||!j)return j;var V=j[Symbol.toPrimitive];if(V!==void 0){var ne=V.call(j,k);if(f(ne)!="object")return ne;throw new TypeError("@@toPrimitive must return a primitive value.")}return(k==="string"?String:Number)(j)})(D,"string");return f(C)=="symbol"?C:C+""}var re=new((function(){return D=function X(){(function(se,Y){if(!(se instanceof Y))throw new TypeError("Cannot call a class as a function")})(this,X),this.logs=[],this.isSending=!1,this.maxBatchSize=20,this.flushInterval=5e3,this.flushIntervalId=null,this.config=_({},o.KB),this.deviceId=null,this.startFlushInterval()},C=[{key:"setConfig",value:function(X){this.config=_(_({},this.config),X)}},{key:"startFlushInterval",value:function(){var X=this;this.flushIntervalId&&clearInterval(this.flushIntervalId),this.flushIntervalId=setInterval(function(){return X.flush()},this.flushInterval)}},{key:"stopFlushInterval",value:function(){this.flushIntervalId&&(clearInterval(this.flushIntervalId),this.flushIntervalId=null)}},{key:"getDeviceLoggingId",value:(ne=T(v().m(function X(){var se;return v().w(function(Y){for(;;)switch(Y.p=Y.n){case 0:if(!this.deviceId){Y.n=1;break}return Y.a(2,this.deviceId);case 1:if(Y.p=1,typeof chrome>"u"||!chrome.storage){Y.n=3;break}return Y.n=2,chrome.storage.local.get(["reclaim_device_id"]);case 2:if(!(se=Y.v).reclaim_device_id){Y.n=3;break}return this.deviceId=se.reclaim_device_id,Y.a(2,this.deviceId);case 3:Y.n=5;break;case 4:Y.p=4,Y.v;case 5:if(this.deviceId=typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():String(Date.now()),Y.p=6,typeof chrome>"u"||!chrome.storage){Y.n=7;break}return Y.n=7,chrome.storage.local.set({reclaim_device_id:this.deviceId});case 7:Y.n=9;break;case 8:Y.p=8,Y.v;case 9:return Y.a(2,this.deviceId)}},X,this,[[6,8],[1,4]])})),function(){return ne.apply(this,arguments)})},{key:"addLog",value:function(X){this.logs.push(X),this.logs.length>=this.maxBatchSize&&this.flush()}},{key:"shouldLog",value:function(X){return X<=(o.vL[this.config.logLevel]||o.E$.INFO)}},{key:"emitToConsole",value:function(X,se,Y){var ue="[".concat(X,"]"),ce="".concat(ue," ").concat(se);Y?console.log(ce,Y):console.log(ce)}},{key:"log",value:function(X){var se=X.message,Y=X.logLevel,ue=X.type,ce=X.eventType,ye=X.meta,Ie=X.sessionId,Re=X.providerId,S=X.appId,x=X.source,Pe=X.tabId,Te=X.url;if(se&&Y){if(this.shouldLog(Y)){this.config.consoleEnabled&&this.emitToConsole(Y,se,ye);var qe=new d({sessionId:Ie||"unknown",providerId:Re||"unknown",appId:S||"unknown",logLine:se,type:ue,eventType:ce,logLevel:Y,source:x||this.config.source,tabId:Pe,url:Te,meta:ye,time:new Date});this.addLog(qe)}}else console.error("Logger: message and logLevel are required")}},{key:"flush",value:(V=T(v().m(function X(){var se,Y;return v().w(function(ue){for(;;)switch(ue.p=ue.n){case 0:if(this.logs.length!==0&&!this.isSending){ue.n=1;break}return ue.a(2);case 1:return se=E(this.logs),this.logs=[],ue.p=2,this.isSending=!0,ue.n=3,this.sendLogs(se);case 3:ue.n=5;break;case 4:ue.p=4,Y=ue.v,console.error("Error flushing logs:",Y),this.logs=[].concat(E(this.logs),E(se));case 5:return ue.p=5,this.isSending=!1,ue.f(5);case 6:return ue.a(2)}},X,this,[[2,4,5,6]])})),function(){return V.apply(this,arguments)})},{key:"sendLogs",value:(k=T(v().m(function X(se){var Y,ue,ce,ye,Ie,Re,S;return v().w(function(x){for(;;)switch(x.n){case 0:if(se!=null&&se.length){x.n=1;break}return x.a(2);case 1:return x.n=2,this.getDeviceLoggingId();case 2:return Y=x.v,ue=se.map(function(Pe){var Te=Pe.toJson();return Te.deviceId=Te.deviceId||Y,Te}),ce=JSON.stringify({logs:ue,source:this.config.source,deviceId:Y}),x.n=3,fetch(o.bQ.DIAGNOSTIC_LOGGING,{method:"POST",headers:{"Content-Type":"application/json"},body:ce});case 3:if((ye=x.v).ok){x.n=5;break}return Ie=console,Re="Failed to send ".concat(se.length," logs"),x.n=4,ye.text();case 4:S=x.v,Ie.error.call(Ie,Re,S);case 5:return x.a(2)}},X,this)})),function(X){return k.apply(this,arguments)})}],C&&K(D.prototype,C),j&&K(D,j),Object.defineProperty(D,"prototype",{writable:!1}),D;var D,C,j,k,V,ne})()),G=function(){var D,C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},j=_({sessionId:"unknown",providerId:"unknown",appId:"unknown",source:((D=re.config)===null||D===void 0?void 0:D.source)||"reclaim-extension-sdk"},C);return{get context(){return _({},j)},setContext:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(j,k)},log:function(k){re.log(_(_({},j),k))},info:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};re.log(_(_({},j),{},{logLevel:"INFO"},k))},debug:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};re.log(_(_({},j),{},{logLevel:"DEBUG"},k))},all:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};re.log(_(_({},j),{},{logLevel:"ALL"},k))},error:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};re.log(_(_({},j),{},{logLevel:"ALL"},k))}}}},859:(n,e,t)=>{var o;function s(w){return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},s(w)}function c(w,U,T){return(U=(function(N){var _=(function(P,K){if(s(P)!="object"||!P)return P;var M=P[Symbol.toPrimitive];if(M!==void 0){var re=M.call(P,K);if(s(re)!="object")return re;throw new TypeError("@@toPrimitive must return a primitive value.")}return(K==="string"?String:Number)(P)})(N,"string");return s(_)=="symbol"?_:_+""})(U))in w?Object.defineProperty(w,U,{value:T,enumerable:!0,configurable:!0,writable:!0}):w[U]=T,w}t.d(e,{D_:()=>d,E$:()=>E,KB:()=>v,Ru:()=>f,bQ:()=>a,vL:()=>O});var a={DIAGNOSTIC_LOGGING:"https://logs.reclaimprotocol.org/api/business-logs/logDump"},d={BACKGROUND:"reclaim_browser_extension.BackgroundProcess",CONTENT:"reclaim_browser_extension.ContentScript",POPUP:"reclaim_browser_extension.Popup",INIT:"reclaim_browser_extension.Initialization",VERIFICATION:"reclaim_browser_extension.Verification",FETCH_DATA:"reclaim_browser_extension.FetchData",PROVIDER_DATA:"reclaim_browser_extension.ProviderData",CLAIM_CREATION:"reclaim_browser_extension.ClaimCreation",PROOF_GENERATION:"reclaim_browser_extension.ProofGeneration",PROOF_SUBMISSION:"reclaim_browser_extension.ProofSubmission",PROOF_VERIFICATION:"reclaim_browser_extension.ProofVerification",OFFSCREEN:"reclaim_browser_extension.Offscreen"},f=(c(c(c(c(c(c(c(c(c(c(o={BACKGROUND_INITIALIZED:"BACKGROUND_INITIALIZED",SESSION_FAILED:"SESSION_FAILED",BACKGROUND_PROOF_SUBMISSION:"BACKGROUND_PROOF_SUBMISSION",BACKGROUND_PROOF_SUBMISSION_CALLBACK:"BACKGROUND_PROOF_SUBMISSION_CALLBACK",BACKGROUND_PROOF_SUBMISSION_FAILED:"BACKGROUND_PROOF_SUBMISSION_FAILED",BACKGROUND_PROOF_SUBMISSION_SUCCESS:"BACKGROUND_PROOF_SUBMISSION_SUCCESS",BACKGROUND_PROOF_SUBMISSION_ERROR:"BACKGROUND_PROOF_SUBMISSION_ERROR",BACKGROUND_SESSION_CANCELLED:"BACKGROUND_SESSION_CANCELLED",BACKGROUND_FETCH_PROVIDER_DATA:"BACKGROUND_FETCH_PROVIDER_DATA",BACKGROUND_START_VERIFICATION:"BACKGROUND_START_VERIFICATION",BACKGROUND_REQUEST_FILTERED:"BACKGROUND_REQUEST_FILTERED",BACKGROUND_CLAIM_CREATION_STARTED:"BACKGROUND_CLAIM_CREATION_STARTED",BACKGROUND_CLAIM_CREATION_OFFSCREEN_DOCUMENT_READY:"BACKGROUND_CLAIM_CREATION_OFFSCREEN_DOCUMENT_READY",BACKGROUND_CLAIM_CREATION_SUCCESS:"BACKGROUND_CLAIM_CREATION_SUCCESS",BACKGROUND_CLAIM_CREATION_FAILED:"BACKGROUND_CLAIM_CREATION_FAILED",BACKGROUND_PROOF_GENERATION_QUEUED:"BACKGROUND_PROOF_GENERATION_QUEUED",BACKGROUND_REQUEST_FILTERED_ERROR:"BACKGROUND_REQUEST_FILTERED_ERROR",BACKGROUND_PROOF_GENERATION_QUEUE_ABORTED:"BACKGROUND_PROOF_GENERATION_QUEUE_ABORTED",BACKGROUND_PROOF_GENERATION_STARTED:"BACKGROUND_PROOF_GENERATION_STARTED",BACKGROUND_PROOF_GENERATION_SUCCESS:"BACKGROUND_PROOF_GENERATION_SUCCESS",BACKGROUND_PROOF_GENERATION_FAILED:"BACKGROUND_PROOF_GENERATION_FAILED",BACKGROUND_PROOF_GENERATION_ABORTED:"BACKGROUND_PROOF_GENERATION_ABORTED",BACKGROUND_SHOW_PROVIDER_VERIFICATION_POPUP_ERROR:"BACKGROUND_SHOW_PROVIDER_VERIFICATION_POPUP_ERROR",BACKGROUND_PROVIDER_DATA_READY_ERROR:"BACKGROUND_PROVIDER_DATA_READY_ERROR",BACKGROUND_PROVIDER_DATA_READY:"BACKGROUND_PROVIDER_DATA_READY",BACKGROUND_PROVIDER_DATA_NOT_AVAILABLE:"BACKGROUND_PROVIDER_DATA_NOT_AVAILABLE",BACKGROUND_ANOTHER_VERIFICATION_IN_PROGRESS:"BACKGROUND_ANOTHER_VERIFICATION_IN_PROGRESS",BACKGROUND_CANCEL_VERIFICATION:"BACKGROUND_CANCEL_VERIFICATION",BACKGROUND_OFFSCREEN_DOCUMENT_READY:"BACKGROUND_OFFSCREEN_DOCUMENT_READY",BACKGROUND_FILTERED_REQUEST_FOUND:"BACKGROUND_FILTERED_REQUEST_FOUND",OFFSCREEN_PROOF_GENERATION_STARTED:"OFFSCREEN_PROOF_GENERATION_STARTED",OFFSCREEN_PROOF_GENERATION_FAILED:"OFFSCREEN_PROOF_GENERATION_FAILED",OFFSCREEN_PROOF_GENERATION_SUCCESS:"OFFSCREEN_PROOF_GENERATION_SUCCESS"},"BACKGROUND_FETCH_PROVIDER_DATA","BACKGROUND_FETCH_PROVIDER_DATA"),"BACKGROUND_FETCH_PROVIDER_DATA_ERROR","BACKGROUND_FETCH_PROVIDER_DATA_ERROR"),"BACKGROUND_UPDATE_SESSION_STATUS","BACKGROUND_UPDATE_SESSION_STATUS"),"BACKGROUND_UPDATE_SESSION_STATUS_ERROR","BACKGROUND_UPDATE_SESSION_STATUS_ERROR"),"CONTENT_PROOF_SUBMITTED","CONTENT_PROOF_SUBMITTED"),"CONTENT_PROOF_SUBMISSION_FAILED","CONTENT_PROOF_SUBMISSION_FAILED"),"CONTENT_PROVIDER_DATA_RECEIVED","CONTENT_PROVIDER_DATA_RECEIVED"),"CONTENT_TAB_NOT_MANAGED","CONTENT_TAB_NOT_MANAGED"),"CONTENT_REMOVE_EXISTING_POPUP","CONTENT_REMOVE_EXISTING_POPUP"),"CONTENT_CLAIM_CREATION_REQUESTED","CONTENT_CLAIM_CREATION_REQUESTED"),c(c(c(c(c(c(c(c(c(c(o,"CONTENT_CLAIM_CREATION_SUCCESS","CONTENT_CLAIM_CREATION_SUCCESS"),"CONTENT_CLAIM_CREATION_FAILED","CONTENT_CLAIM_CREATION_FAILED"),"CONTENT_PROOF_GENERATION_STARTED","CONTENT_PROOF_GENERATION_STARTED"),"CONTENT_PROOF_GENERATION_SUCCESS","CONTENT_PROOF_GENERATION_SUCCESS"),"CONTENT_PROOF_GENERATION_FAILED","CONTENT_PROOF_GENERATION_FAILED"),"CONTENT_PROOF_SUBMITTED","CONTENT_PROOF_SUBMITTED"),"CONTENT_PROOF_SUBMISSION_FAILED","CONTENT_PROOF_SUBMISSION_FAILED"),"CONTENT_START_VERIFICATION","CONTENT_START_VERIFICATION"),"CONTENT_VERIFICATION_FAILED","CONTENT_VERIFICATION_FAILED"),"CONTENT_VERIFICATION_SUCCESS","CONTENT_VERIFICATION_SUCCESS"),c(c(c(c(c(c(o,"CONTENT_VERIFICATION_CANCELLED","CONTENT_VERIFICATION_CANCELLED"),"CONTENT_REPORT_PROVIDER_ERROR","CONTENT_REPORT_PROVIDER_ERROR"),"CONTENT_REQUEST_CLAIM","CONTENT_REQUEST_CLAIM"),"CONTENT_REQUEST_FILTERED","CONTENT_REQUEST_FILTERED"),"CONTENT_SET_PROVIDER_INJECTION_SCRIPT_IN_LOCAL_STORAGE_FAILED","CONTENT_SET_PROVIDER_INJECTION_SCRIPT_IN_LOCAL_STORAGE_FAILED"),"CONTENT_REQUEST_FILTERED_ERROR","CONTENT_REQUEST_FILTERED_ERROR")),E={INFO:10,DEBUG:20,ALL:30},O={INFO:E.INFO,DEBUG:E.DEBUG,ALL:E.ALL},v={logLevel:"INFO",consoleEnabled:!1,source:"reclaim-extension-sdk"}},952:(n,e,t)=>{t.d(e,{Sn:()=>s,fn:()=>o,wx:()=>f,J_:()=>d,vQ:()=>c,Ew:()=>a});var o="https://api.reclaimprotocol.org",s={PROVIDER_URL:function(E){return"".concat(o,"/api/providers/").concat(E)},SUBMIT_PROOF:function(E){return"".concat(o,"/session/").concat(E,"/proof")},UPDATE_SESSION_STATUS:function(){return"".concat(o,"/api/sdk/update/session/")},STATUS_URL:function(E){return"".concat(o,"/api/sdk/session/").concat(E)}},c={CHECK_EXTENSION:"RECLAIM_EXTENSION_CHECK",EXTENSION_RESPONSE:"RECLAIM_EXTENSION_RESPONSE",START_VERIFICATION:"RECLAIM_START_VERIFICATION",VERIFICATION_STARTED:"RECLAIM_VERIFICATION_STARTED",VERIFICATION_COMPLETED:"RECLAIM_VERIFICATION_COMPLETED",VERIFICATION_FAILED:"RECLAIM_VERIFICATION_FAILED",CANCEL_VERIFICATION:"RECLAIM_CANCEL_VERIFICATION",SET_PUBLIC_DATA:"RECLAIM_SET_PUBLIC_DATA",PARAMETERS_UPDATE:"RECLAIM_PARAMETERS_UPDATE",PARAMETERS_GET:"RECLAIM_PARAMETERS_GET",REPORT_PROVIDER_ERROR:"RECLAIM_REPORT_PROVIDER_ERROR",SET_EXPECT_MANY_CLAIMS:"RECLAIM_SET_EXPECT_MANY_CLAIMS",REQUEST_CLAIM:"RECLAIM_REQUEST_CLAIM"},a={SESSION_INIT:"SESSION_INIT",SESSION_STARTED:"SESSION_STARTED",USER_INIT_VERIFICATION:"USER_INIT_VERIFICATION",USER_STARTED_VERIFICATION:"USER_STARTED_VERIFICATION",PROOF_GENERATION_STARTED:"PROOF_GENERATION_STARTED",PROOF_GENERATION_SUCCESS:"PROOF_GENERATION_SUCCESS",PROOF_GENERATION_FAILED:"PROOF_GENERATION_FAILED",PROOF_SUBMITTED:"PROOF_SUBMITTED",PROOF_SUBMISSION_FAILED:"PROOF_SUBMISSION_FAILED",PROOF_MANUAL_VERIFICATION_SUBMITED:"PROOF_MANUAL_VERIFICATION_SUBMITED"},d={CONTENT_SCRIPT:"content-script",BACKGROUND:"background",OFFSCREEN:"offscreen"},f={START_VERIFICATION:"START_VERIFICATION",CANCEL_VERIFICATION:"CANCEL_VERIFICATION",GENERATE_PROOF_REQUEST:"GENERATE_PROOF_REQUEST",CLAIM_CREATION_REQUESTED:"CLAIM_CREATION_REQUESTED",CLAIM_CREATION_SUCCESS:"CLAIM_CREATION_SUCCESS",CLAIM_CREATION_FAILED:"CLAIM_CREATION_FAILED",PROOF_GENERATION_STARTED:"PROOF_GENERATION_STARTED",PROOF_GENERATION_SUCCESS:"PROOF_GENERATION_SUCCESS",PROOF_GENERATION_FAILED:"PROOF_GENERATION_FAILED",PROOF_SUBMITTED:"PROOF_SUBMITTED",PROOF_SUBMISSION_FAILED:"PROOF_SUBMISSION_FAILED",GENERATE_PROOF:"GENERATE_PROOF",GENERATED_PROOF_RESPONSE:"GENERATED_PROOF_RESPONSE",GENERATE_CLAIM_ON_ATTESTOR:"GENERATE_CLAIM_ON_ATTESTOR",GET_PRIVATE_KEY:"GET_PRIVATE_KEY",GET_PRIVATE_KEY_RESPONSE:"GET_PRIVATE_KEY_RESPONSE",SHOW_PROVIDER_VERIFICATION_POPUP:"SHOW_PROVIDER_VERIFICATION_POPUP",OFFSCREEN_DOCUMENT_READY:"OFFSCREEN_DOCUMENT_READY",GENERATE_PROOF_RESPONSE:"GENERATE_PROOF_RESPONSE",PING_OFFSCREEN:"PING_OFFSCREEN",CLOSE_CURRENT_TAB:"CLOSE_CURRENT_TAB",GET_CURRENT_TAB_ID:"GET_CURRENT_TAB_ID",REQUEST_PROVIDER_DATA:"REQUEST_PROVIDER_DATA",PROVIDER_DATA_READY:"PROVIDER_DATA_READY",CONTENT_SCRIPT_LOADED:"CONTENT_SCRIPT_LOADED",SHOULD_INITIALIZE:"SHOULD_INITIALIZE",CHECK_IF_MANAGED_TAB:"CHECK_IF_MANAGED_TAB",FILTERED_REQUEST_FOUND:"FILTERED_REQUEST_FOUND",INTERCEPTED_REQUEST_AND_RESPONSE:"INTERCEPTED_REQUEST_AND_RESPONSE",UPDATE_PUBLIC_DATA:"UPDATE_PUBLIC_DATA",UPDATE_EXPECT_MANY_CLAIMS:"UPDATE_EXPECT_MANY_CLAIMS",GET_PARAMETERS:"GET_PARAMETERS",REPORT_PROVIDER_ERROR:"REPORT_PROVIDER_ERROR",REQUEST_CLAIM:"REQUEST_CLAIM",INJECT_VIA_SCRIPTING:"INJECT_VIA_SCRIPTING"}},997:(n,e,t)=>{var o=t(287),s=t(606),c=t.n(s),a=t(153);function d(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var G,D,C=typeof Symbol=="function"?Symbol:{},j=C.iterator||"@@iterator",k=C.toStringTag||"@@toStringTag";function V(Ie,Re,S,x){var Pe=Re&&Re.prototype instanceof X?Re:X,Te=Object.create(Pe.prototype);return f(Te,"_invoke",(function(qe,nt,Ze){var Ye,Ue,Ee,Me=0,Rt=Ze||[],vt=!1,be={p:0,n:0,v:G,a:ot,f:ot.bind(G,4),d:function(it,ke){return Ye=it,Ue=0,Ee=G,be.n=ke,ne}};function ot(it,ke){for(Ue=it,Ee=ke,D=0;!vt&&Me&&!Xe&&D<Rt.length;D++){var Xe,l=Rt[D],g=be.p,y=l[2];it>3?(Xe=y===ke)&&(Ee=l[(Ue=l[4])?5:(Ue=3,3)],l[4]=l[5]=G):l[0]<=g&&((Xe=it<2&&g<l[1])?(Ue=0,be.v=ke,be.n=l[1]):g<y&&(Xe=it<3||l[0]>ke||ke>y)&&(l[4]=it,l[5]=ke,be.n=y,Ue=0))}if(Xe||it>1)return ne;throw vt=!0,ke}return function(it,ke,Xe){if(Me>1)throw TypeError("Generator is already running");for(vt&&ke===1&&ot(ke,Xe),Ue=ke,Ee=Xe;(D=Ue<2?G:Ee)||!vt;){Ye||(Ue?Ue<3?(Ue>1&&(be.n=-1),ot(Ue,Ee)):be.n=Ee:be.v=Ee);try{if(Me=2,Ye){if(Ue||(it="next"),D=Ye[it]){if(!(D=D.call(Ye,Ee)))throw TypeError("iterator result is not an object");if(!D.done)return D;Ee=D.value,Ue<2&&(Ue=0)}else Ue===1&&(D=Ye.return)&&D.call(Ye),Ue<2&&(Ee=TypeError("The iterator does not provide a '"+it+"' method"),Ue=1);Ye=G}else if((D=(vt=be.n<0)?Ee:qe.call(nt,be))!==ne)break}catch(l){Ye=G,Ue=1,Ee=l}finally{Me=1}}return{value:D,done:vt}}})(Ie,S,x),!0),Te}var ne={};function X(){}function se(){}function Y(){}D=Object.getPrototypeOf;var ue=[][j]?D(D([][j]())):(f(D={},j,function(){return this}),D),ce=Y.prototype=X.prototype=Object.create(ue);function ye(Ie){return Object.setPrototypeOf?Object.setPrototypeOf(Ie,Y):(Ie.__proto__=Y,f(Ie,k,"GeneratorFunction")),Ie.prototype=Object.create(ce),Ie}return se.prototype=Y,f(ce,"constructor",Y),f(Y,"constructor",se),se.displayName="GeneratorFunction",f(Y,k,"GeneratorFunction"),f(ce),f(ce,k,"Generator"),f(ce,j,function(){return this}),f(ce,"toString",function(){return"[object Generator]"}),(d=function(){return{w:V,m:ye}})()}function f(G,D,C,j){var k=Object.defineProperty;try{k({},"",{})}catch{k=0}f=function(V,ne,X,se){function Y(ue,ce){f(V,ue,function(ye){return this._invoke(ue,ce,ye)})}ne?k?k(V,ne,{value:X,enumerable:!se,configurable:!se,writable:!se}):V[ne]=X:(Y("next",0),Y("throw",1),Y("return",2))},f(G,D,C,j)}function E(G,D,C,j,k,V,ne){try{var X=G[V](ne),se=X.value}catch(Y){return void C(Y)}X.done?D(se):Promise.resolve(se).then(j,k)}function O(G){return function(){var D=this,C=arguments;return new Promise(function(j,k){var V=G.apply(D,C);function ne(se){E(V,j,k,ne,X,"next",se)}function X(se){E(V,j,k,ne,X,"throw",se)}ne(void 0)})}}var v,w,U,T=typeof window<"u"?window:typeof self<"u"?self:T!==void 0?T:Function("return this")(),N=typeof window>"u",_=typeof document<"u"&&document.contentType!==void 0;if(T.Buffer=T.Buffer||o.hp,T.process=T.process||c(),T.WebSocket!==void 0||_)_?a.w9.info(a.Ey.POLYFILLS,"Skipping WebSocket in content script context"):a.w9.info(a.Ey.POLYFILLS,"Using native WebSocket implementation");else try{var P=t(296).WebSocket;T.WebSocket=P,a.w9.info(a.Ey.POLYFILLS,"WebSocket polyfill added to global")}catch(G){a.w9.warn(a.Ey.POLYFILLS,"Failed to load WebSocket polyfill:",G)}if(T.process&&(T.process.browser=!0),typeof T.require!="function")T.require=function(G){switch(G){case"ws":if(_)return a.w9.info(a.Ey.POLYFILLS,"Blocking ws module in content script"),{};try{return{WebSocket:t(296).WebSocket}}catch(D){return a.w9.warn(a.Ey.POLYFILLS,"Failed to load WebSocket for ws module:",D),{}}case"fs":return T.fs;case"path":return T.path;case"os":return T.os;case"crypto":return T.crypto;case"worker_threads":case"koffi":case"re2":return{};default:return console.warn("Mock require called for module: ".concat(G)),{}}};else{var K=T.require;T.require=function(G){if(G==="ws"){if(_)return a.w9.info(a.Ey.POLYFILLS,"Blocking ws module in content script"),{};try{return{WebSocket:t(296).WebSocket}}catch(D){return a.w9.warn(a.Ey.POLYFILLS,"Failed to load WebSocket for ws module:",D),{}}}try{return K(G)}catch{return a.w9.warn(a.Ey.POLYFILLS,"Failed to require module: ".concat(G)),{}}}}if(c()!==void 0&&(c().browser=!0,c().version||(c().version="v16.0.0"),c().cwd||(c().cwd=function(){return"/"})),T.global===void 0&&(T.global=T),T.crypto===void 0&&(T.crypto={}),T.crypto.getRandomValues===void 0&&(T.crypto.getRandomValues=function(G){for(var D=new Uint8Array(G.length),C=0;C<D.length;C++)D[C]=Math.floor(256*Math.random());return D}),T.crypto.subtle===void 0&&(a.w9.warn(a.Ey.POLYFILLS,"WebCrypto subtle API not available. Some functionality may not work."),T.crypto.subtle={digest:(v=O(d().m(function G(D,C){var j,k,V;return d().w(function(ne){for(;;)if(ne.n===0){for(a.w9.warn(a.Ey.POLYFILLS,"Crypto subtle digest (".concat(D,") called with browser fallback")),j=Array.from(new Uint8Array(C)).reduce(function(X,se){return 31*X+se&4294967295},0),k=new Uint8Array(32),V=0;V<32;V++)k[V]=j>>8*V&255;return ne.a(2,k.buffer)}},G)})),function(G,D){return v.apply(this,arguments)})}),!N){var M=function(G,D){return typeof G=="string"&&G.startsWith("node:")&&(G=G.replace(/^node:/,"")),new re(G,D)};T.domain===void 0&&(T.domain={create:function(){return{run:function(G){return G()},on:function(){},bind:function(G){return G}}}});var re=T.URL;M.prototype=re.prototype;try{Object.getOwnPropertyNames(re).forEach(function(G){if(G!=="prototype"&&G!=="constructor")try{M[G]=re[G]}catch{}})}catch(G){a.w9.warn(a.Ey.POLYFILLS,"Could not copy all URL static properties:",G)}try{T.URL=M}catch(G){a.w9.warn(a.Ey.POLYFILLS,"Could not override URL constructor:",G)}}T.module===void 0&&(T.module={exports:{}}),T.fs=T.fs||{readFileSync:function(G){throw a.w9.warn(a.Ey.POLYFILLS,"Attempted to readFileSync: ".concat(G)),new Error("fs.readFileSync is not available in this environment")},writeFileSync:function(G,D){a.w9.warn(a.Ey.POLYFILLS,"Attempted to writeFileSync: ".concat(G))},existsSync:function(G){return a.w9.warn(a.Ey.POLYFILLS,"Attempted to check if file exists: ".concat(G)),!1},promises:{readFile:(U=O(d().m(function G(D){return d().w(function(C){for(;;)switch(C.n){case 0:throw a.w9.warn(a.Ey.POLYFILLS,"Attempted to readFile: ".concat(D)),new Error("fs.promises.readFile is not available in this environment");case 1:return C.a(2)}},G)})),function(G){return U.apply(this,arguments)}),writeFile:(w=O(d().m(function G(D,C){return d().w(function(j){for(;;)switch(j.n){case 0:a.w9.warn(a.Ey.POLYFILLS,"Attempted to writeFile: ".concat(D));case 1:return j.a(2)}},G)})),function(G,D){return w.apply(this,arguments)})}},T.os=T.os||{tmpdir:function(){return"/tmp"},homedir:function(){return"/home/user"},platform:function(){return"browser"},type:function(){return"Browser"},cpus:function(){return[{model:"Browser CPU",speed:1e3}]},totalmem:function(){return 8589934592},freemem:function(){return 4294967296}},T.path=T.path||{join:function(){for(var G=arguments.length,D=new Array(G),C=0;C<G;C++)D[C]=arguments[C];return D.join("/").replace(/\/+/g,"/")},resolve:function(){for(var G=arguments.length,D=new Array(G),C=0;C<G;C++)D[C]=arguments[C];return D.join("/").replace(/\/+/g,"/")},dirname:function(G){return G.split("/").slice(0,-1).join("/")||"."},basename:function(G,D){var C=G.split("/").pop()||"";return D&&C.endsWith(D)&&(C=C.slice(0,-D.length)),C},extname:function(G){var D=G.split("/").pop()||"",C=D.lastIndexOf(".");return C<0?"":D.slice(C)},sep:"/"},o.hp,c()}},Si={};function It(n){var e=Si[n];if(e!==void 0)return e.exports;var t=Si[n]={id:n,loaded:!1,exports:{}};return ru[n](t,t.exports,It),t.loaded=!0,t.exports}It.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return It.d(e,{a:e}),e},It.d=(n,e)=>{for(var t in e)It.o(e,t)&&!It.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},It.hmd=n=>((n=Object.create(n)).children||(n.children=[]),Object.defineProperty(n,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+n.id)}}),n),It.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),It.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})};var Ao={};It.r(Ao),It.d(Ao,{OG:()=>ko,My:()=>Qr,Ph:()=>wr,lX:()=>Bo,Id:()=>yn,fg:()=>zs,qj:()=>Jt,aT:()=>gn,lq:()=>qr,z:()=>Go,Q5:()=>mn});It(997);function Gt(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function _o(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function Ts(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Gt(n.outputLen),Gt(n.blockLen)}function Wr(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function Cs(n,e){_o(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const An=BigInt(2**32-1),Io=BigInt(32);function _s(n,e=!1){return e?{h:Number(n&An),l:Number(n>>Io&An)}:{h:0|Number(n>>Io&An),l:0|Number(n&An)}}function Ds(n,e=!1){let t=new Uint32Array(n.length),o=new Uint32Array(n.length);for(let s=0;s<n.length;s++){const{h:c,l:a}=_s(n[s],e);[t[s],o[s]]=[c,a]}return[t,o]}const Ps=(n,e,t)=>n<<t|e>>>32-t,Us=(n,e,t)=>e<<t|n>>>32-t,Ls=(n,e,t)=>e<<t-32|n>>>64-t,Fs=(n,e,t)=>n<<t-32|e>>>64-t,Fe={fromBig:_s,split:Ds,toBig:(n,e)=>BigInt(n>>>0)<<Io|BigInt(e>>>0),shrSH:(n,e,t)=>n>>>t,shrSL:(n,e,t)=>n<<32-t|e>>>t,rotrSH:(n,e,t)=>n>>>t|e<<32-t,rotrSL:(n,e,t)=>n<<32-t|e>>>t,rotrBH:(n,e,t)=>n<<64-t|e>>>t-32,rotrBL:(n,e,t)=>n>>>t-32|e<<64-t,rotr32H:(n,e)=>e,rotr32L:(n,e)=>n,rotlSH:Ps,rotlSL:Us,rotlBH:Ls,rotlBL:Fs,add:function(n,e,t,o){const s=(e>>>0)+(o>>>0);return{h:n+t+(s/2**32|0)|0,l:0|s}},add3L:(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),add3H:(n,e,t,o)=>e+t+o+(n/2**32|0)|0,add4L:(n,e,t,o)=>(n>>>0)+(e>>>0)+(t>>>0)+(o>>>0),add4H:(n,e,t,o,s)=>e+t+o+s+(n/2**32|0)|0,add5H:(n,e,t,o,s,c)=>e+t+o+s+c+(n/2**32|0)|0,add5L:(n,e,t,o,s)=>(n>>>0)+(e>>>0)+(t>>>0)+(o>>>0)+(s>>>0)},oo=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,Bs=n=>n instanceof Uint8Array,Ln=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),Fn=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),Xt=(n,e)=>n<<32-e|n>>>e;if(new Uint8Array(new Uint32Array([287454020]).buffer)[0]!==68)throw new Error("Non little-endian hardware is not supported");const nu=async()=>{};async function Ni(n,e,t){let o=Date.now();for(let s=0;s<n;s++){t(s);const c=Date.now()-o;c>=0&&c<e||(await nu(),o+=c)}}function Jr(n){if(typeof n=="string"&&(n=(function(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))})(n)),!Bs(n))throw new Error("expected Uint8Array, got "+typeof n);return n}class Do{clone(){return this._cloneInto()}}const ou={}.toString;function Gs(n,e){if(e!==void 0&&ou.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(n,e)}function kn(n){const e=o=>n().update(Jr(o)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function iu(n=32){if(oo&&typeof oo.getRandomValues=="function")return oo.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}const[ks,xs,Ms]=[[],[],[]],su=BigInt(0),un=BigInt(1),au=BigInt(2),uu=BigInt(7),cu=BigInt(256),lu=BigInt(113);for(let n=0,e=un,t=1,o=0;n<24;n++){[t,o]=[o,(2*t+3*o)%5],ks.push(2*(5*o+t)),xs.push((n+1)*(n+2)/2%64);let s=su;for(let c=0;c<7;c++)e=(e<<un^(e>>uu)*lu)%cu,e&au&&(s^=un<<(un<<BigInt(c))-un);Ms.push(s)}const[fu,hu]=Ds(Ms,!0),wi=(n,e,t)=>t>32?Ls(n,e,t):Ps(n,e,t),Ti=(n,e,t)=>t>32?Fs(n,e,t):Us(n,e,t);class Po extends Do{constructor(e,t,o,s=!1,c=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=o,this.enableXOF=s,this.rounds=c,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Gt(o),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Ln(this.state)}keccak(){(function(e,t=24){const o=new Uint32Array(10);for(let s=24-t;s<24;s++){for(let d=0;d<10;d++)o[d]=e[d]^e[d+10]^e[d+20]^e[d+30]^e[d+40];for(let d=0;d<10;d+=2){const f=(d+8)%10,E=(d+2)%10,O=o[E],v=o[E+1],w=wi(O,v,1)^o[f],U=Ti(O,v,1)^o[f+1];for(let T=0;T<50;T+=10)e[d+T]^=w,e[d+T+1]^=U}let c=e[2],a=e[3];for(let d=0;d<24;d++){const f=xs[d],E=wi(c,a,f),O=Ti(c,a,f),v=ks[d];c=e[v],a=e[v+1],e[v]=E,e[v+1]=O}for(let d=0;d<50;d+=10){for(let f=0;f<10;f++)o[f]=e[d+f];for(let f=0;f<10;f++)e[d+f]^=~o[(f+2)%10]&o[(f+4)%10]}e[0]^=fu[s],e[1]^=hu[s]}o.fill(0)})(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Wr(this);const{blockLen:t,state:o}=this,s=(e=Jr(e)).length;for(let c=0;c<s;){const a=Math.min(t-this.pos,s-c);for(let d=0;d<a;d++)o[this.pos++]^=e[c++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:o,blockLen:s}=this;e[o]^=t,128&t&&o===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Wr(this,!1),_o(e),this.finish();const t=this.state,{blockLen:o}=this;for(let s=0,c=e.length;s<c;){this.posOut>=o&&this.keccak();const a=Math.min(o-this.posOut,c-s);e.set(t.subarray(this.posOut,this.posOut+a),s),this.posOut+=a,s+=a}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Gt(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Cs(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:o,outputLen:s,rounds:c,enableXOF:a}=this;return e||(e=new Po(t,o,s,a,c)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=c,e.suffix=o,e.outputLen=s,e.enableXOF=a,e.destroyed=this.destroyed,e}}const du=(n,e,t)=>kn(()=>new Po(e,n,t)),pu=du(1,136,32),Ks="6.15.0";async function Uo(n){const e=Object.keys(n);return(await Promise.all(e.map(t=>Promise.resolve(n[t])))).reduce((t,o,s)=>(t[e[s]]=o,t),{})}function kt(n,e,t){for(let o in e){let s=e[o];Object.defineProperty(n,o,{enumerable:!0,value:s,writable:!1})}}function xr(n,e){if(n==null)return"null";if(e==null&&(e=new Set),typeof n=="object"){if(e.has(n))return"[Circular]";e.add(n)}if(Array.isArray(n))return"[ "+n.map(t=>xr(t,e)).join(", ")+" ]";if(n instanceof Uint8Array){const t="0123456789abcdef";let o="0x";for(let s=0;s<n.length;s++)o+=t[n[s]>>4],o+=t[15&n[s]];return o}if(typeof n=="object"&&typeof n.toJSON=="function")return xr(n.toJSON(),e);switch(typeof n){case"boolean":case"number":case"symbol":return n.toString();case"bigint":return BigInt(n).toString();case"string":return JSON.stringify(n);case"object":{const t=Object.keys(n);return t.sort(),"{ "+t.map(o=>`${xr(o,e)}: ${xr(n[o],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function gu(n,e,t){let o,s=n;{const c=[];if(t){if("message"in t||"code"in t||"name"in t)throw new Error(`value will overwrite populated values: ${xr(t)}`);for(const a in t){if(a==="shortMessage")continue;const d=t[a];c.push(a+"="+xr(d))}}c.push(`code=${e}`),c.push(`version=${Ks}`),c.length&&(n+=" ("+c.join(", ")+")")}switch(e){case"INVALID_ARGUMENT":o=new TypeError(n);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":o=new RangeError(n);break;default:o=new Error(n)}return kt(o,{code:e}),t&&Object.assign(o,t),o.shortMessage==null&&kt(o,{shortMessage:s}),o}function xe(n,e,t,o){if(!n)throw gu(e,t,o)}function Z(n,e,t,o){xe(n,e,"INVALID_ARGUMENT",{argument:t,value:o})}const yu=["NFD","NFC","NFKD","NFKC"].reduce((n,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");n.push(e)}catch{}return n},[]);function js(n){xe(yu.indexOf(n)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:n}})}function xn(n,e,t){if(t==null&&(t=""),n!==e){let o=t,s="new";t&&(o+=".",s+=" "+t),xe(!1,`private constructor; use ${o}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function $s(n,e,t){if(n instanceof Uint8Array)return t?new Uint8Array(n):n;if(typeof n=="string"&&n.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const o=new Uint8Array((n.length-2)/2);let s=2;for(let c=0;c<o.length;c++)o[c]=parseInt(n.substring(s,s+2),16),s+=2;return o}Z(!1,"invalid BytesLike value",e||"value",n)}function Oe(n,e){return $s(n,e,!1)}function Rr(n,e){return $s(n,e,!0)}function rr(n,e){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/))&&(typeof e!="number"||n.length===2+2*e)&&(e!==!0||n.length%2==0)}function Mn(n){return rr(n,!0)||n instanceof Uint8Array}const Ci="0123456789abcdef";function me(n){const e=Oe(n);let t="0x";for(let o=0;o<e.length;o++){const s=e[o];t+=Ci[(240&s)>>4]+Ci[15&s]}return t}function ft(n){return"0x"+n.map(e=>me(e).substring(2)).join("")}function dn(n){return rr(n,!0)?(n.length-2)/2:Oe(n).length}function Lo(n,e,t){const o=Oe(n);return t>o.length&&xe(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:o,length:o.length,offset:t}),me(o.slice(e,t))}function mu(n,e,t){const o=Oe(n);xe(e>=o.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(o),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),s.set(o,e-o.length),me(s)}function yr(n,e){return mu(n,e)}let _i=!1;const Vs=function(n){return pu(n)};let Hs=Vs;function ht(n){const e=Oe(n,"data");return me(Hs(e))}ht._=Vs,ht.lock=function(){_i=!0},ht.register=function(n){if(_i)throw new TypeError("keccak256 is locked");Hs=n},Object.freeze(ht);class Fo extends Do{constructor(e,t,o,s){super(),this.blockLen=e,this.outputLen=t,this.padOffset=o,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Fn(this.buffer)}update(e){Wr(this);const{view:t,buffer:o,blockLen:s}=this,c=(e=Jr(e)).length;for(let a=0;a<c;){const d=Math.min(s-this.pos,c-a);if(d===s){const f=Fn(e);for(;s<=c-a;a+=s)this.process(f,a);continue}o.set(e.subarray(a,a+d),this.pos),this.pos+=d,a+=d,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Wr(this),Cs(e,this),this.finished=!0;const{buffer:t,view:o,blockLen:s,isLE:c}=this;let{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(o,0),a=0);for(let v=a;v<s;v++)t[v]=0;(function(v,w,U,T){if(typeof v.setBigUint64=="function")return v.setBigUint64(w,U,T);const N=BigInt(32),_=BigInt(4294967295),P=Number(U>>N&_),K=Number(U&_),M=T?4:0,re=T?0:4;v.setUint32(w+M,P,T),v.setUint32(w+re,K,T)})(o,s-8,BigInt(8*this.length),c),this.process(o,0);const d=Fn(e),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const E=f/4,O=this.get();if(E>O.length)throw new Error("_sha2: outputLen bigger than state");for(let v=0;v<E;v++)d.setUint32(4*v,O[v],c)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const o=e.slice(0,t);return this.destroy(),o}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:o,length:s,finished:c,destroyed:a,pos:d}=this;return e.length=s,e.pos=d,e.finished=c,e.destroyed=a,s%t&&e.buffer.set(o),e}}const Eu=(n,e,t)=>n&e^~n&t,Ou=(n,e,t)=>n&e^n&t^e&t,vu=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),cr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),lr=new Uint32Array(64);class bu extends Fo{constructor(){super(64,32,8,!1),this.A=0|cr[0],this.B=0|cr[1],this.C=0|cr[2],this.D=0|cr[3],this.E=0|cr[4],this.F=0|cr[5],this.G=0|cr[6],this.H=0|cr[7]}get(){const{A:e,B:t,C:o,D:s,E:c,F:a,G:d,H:f}=this;return[e,t,o,s,c,a,d,f]}set(e,t,o,s,c,a,d,f){this.A=0|e,this.B=0|t,this.C=0|o,this.D=0|s,this.E=0|c,this.F=0|a,this.G=0|d,this.H=0|f}process(e,t){for(let v=0;v<16;v++,t+=4)lr[v]=e.getUint32(t,!1);for(let v=16;v<64;v++){const w=lr[v-15],U=lr[v-2],T=Xt(w,7)^Xt(w,18)^w>>>3,N=Xt(U,17)^Xt(U,19)^U>>>10;lr[v]=N+lr[v-7]+T+lr[v-16]|0}let{A:o,B:s,C:c,D:a,E:d,F:f,G:E,H:O}=this;for(let v=0;v<64;v++){const w=O+(Xt(d,6)^Xt(d,11)^Xt(d,25))+Eu(d,f,E)+vu[v]+lr[v]|0,U=(Xt(o,2)^Xt(o,13)^Xt(o,22))+Ou(o,s,c)|0;O=E,E=f,f=d,d=a+w|0,a=c,c=s,s=o,o=w+U|0}o=o+this.A|0,s=s+this.B|0,c=c+this.C|0,a=a+this.D|0,d=d+this.E|0,f=f+this.F|0,E=E+this.G|0,O=O+this.H|0,this.set(o,s,c,a,d,f,E,O)}roundClean(){lr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const tn=kn(()=>new bu),Au=(BigInt(0),BigInt(1)),Iu=BigInt(2),Kn=n=>n instanceof Uint8Array,Ru=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function Qr(n){if(!Kn(n))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=Ru[n[t]];return e}function qs(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}function gn(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const t=new Uint8Array(e/2);for(let o=0;o<t.length;o++){const s=2*o,c=n.slice(s,s+2),a=Number.parseInt(c,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");t[o]=a}return t}function wr(n){return qs(Qr(n))}function Bo(n){if(!Kn(n))throw new Error("Uint8Array expected");return qs(Qr(Uint8Array.from(n).reverse()))}function qr(n,e){return gn(n.toString(16).padStart(2*e,"0"))}function Go(n,e){return qr(n,e).reverse()}function Jt(n,e,t){let o;if(typeof e=="string")try{o=gn(e)}catch(c){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${c}`)}else{if(!Kn(e))throw new Error(`${n} must be hex string or Uint8Array`);o=Uint8Array.from(e)}const s=o.length;if(typeof t=="number"&&s!==t)throw new Error(`${n} expected ${t} bytes, got ${s}`);return o}function yn(...n){const e=new Uint8Array(n.reduce((o,s)=>o+s.length,0));let t=0;return n.forEach(o=>{if(!Kn(o))throw new Error("Uint8Array expected");e.set(o,t),t+=o.length}),e}const ko=n=>(Iu<<BigInt(n-1))-Au,io=n=>new Uint8Array(n),Di=n=>Uint8Array.from(n);function zs(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let o=io(n),s=io(n),c=0;const a=()=>{o.fill(1),s.fill(0),c=0},d=(...O)=>t(s,o,...O),f=(O=io())=>{s=d(Di([0]),O),o=d(),O.length!==0&&(s=d(Di([1]),O),o=d())},E=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let O=0;const v=[];for(;O<e;){o=d();const w=o.slice();v.push(w),O+=o.length}return yn(...v)};return(O,v)=>{let w;for(a(),f(O);!(w=v(E()));)f();return a(),w}}const Su={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||n instanceof Uint8Array,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function mn(n,e,t={}){const o=(s,c,a)=>{const d=Su[c];if(typeof d!="function")throw new Error(`Invalid validator "${c}", expected function`);const f=n[s];if(!(a&&f===void 0||d(f,n)))throw new Error(`Invalid param ${String(s)}=${f} (${typeof f}), expected ${c}`)};for(const[s,c]of Object.entries(e))o(s,c,!1);for(const[s,c]of Object.entries(t))o(s,c,!0);return n}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mt=BigInt(0),ut=BigInt(1),vr=BigInt(2),Nu=BigInt(3),so=BigInt(4),Pi=BigInt(5),Ui=BigInt(8);BigInt(9),BigInt(16);function St(n,e){const t=n%e;return t>=mt?t:e+t}function wu(n,e,t){if(t<=mt||e<mt)throw new Error("Expected power/modulo > 0");if(t===ut)return mt;let o=ut;for(;e>mt;)e&ut&&(o=o*n%t),n=n*n%t,e>>=ut;return o}function Mt(n,e,t){let o=n;for(;e-- >mt;)o*=o,o%=t;return o}function Ro(n,e){if(n===mt||e<=mt)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=St(n,e),o=e,s=mt,c=ut;for(;t!==mt;){const a=o/t,d=o%t,f=s-c*a;o=t,t=d,s=c,c=f}if(o!==ut)throw new Error("invert: does not exist");return St(s,e)}function Tu(n){if(n%so===Nu){const e=(n+ut)/so;return function(t,o){const s=t.pow(o,e);if(!t.eql(t.sqr(s),o))throw new Error("Cannot find square root");return s}}if(n%Ui===Pi){const e=(n-Pi)/Ui;return function(t,o){const s=t.mul(o,vr),c=t.pow(s,e),a=t.mul(o,c),d=t.mul(t.mul(a,vr),c),f=t.mul(a,t.sub(d,t.ONE));if(!t.eql(t.sqr(f),o))throw new Error("Cannot find square root");return f}}return(function(e){const t=(e-ut)/vr;let o,s,c;for(o=e-ut,s=0;o%vr===mt;o/=vr,s++);for(c=vr;c<e&&wu(c,t,e)!==e-ut;c++);if(s===1){const d=(e+ut)/so;return function(f,E){const O=f.pow(E,d);if(!f.eql(f.sqr(O),E))throw new Error("Cannot find square root");return O}}const a=(o+ut)/vr;return function(d,f){if(d.pow(f,t)===d.neg(d.ONE))throw new Error("Cannot find square root");let E=s,O=d.pow(d.mul(d.ONE,c),o),v=d.pow(f,a),w=d.pow(f,o);for(;!d.eql(w,d.ONE);){if(d.eql(w,d.ZERO))return d.ZERO;let U=1;for(let N=d.sqr(w);U<E&&!d.eql(N,d.ONE);U++)N=d.sqr(N);const T=d.pow(O,ut<<BigInt(E-U-1));O=d.sqr(T),v=d.mul(v,T),w=d.mul(w,O),E=U}return v}})(n)}const Cu=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ys(n,e){const t=e!==void 0?e:n.toString(2).length;return{nBitLength:t,nByteLength:Math.ceil(t/8)}}function Ws(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function Li(n){const e=Ws(n);return e+Math.ceil(e/2)}class Js extends Do{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Ts(e);const o=Jr(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,c=new Uint8Array(s);c.set(o.length>s?e.create().update(o).digest():o);for(let a=0;a<c.length;a++)c[a]^=54;this.iHash.update(c),this.oHash=e.create();for(let a=0;a<c.length;a++)c[a]^=106;this.oHash.update(c),c.fill(0)}update(e){return Wr(this),this.iHash.update(e),this}digestInto(e){Wr(this),_o(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:o,finished:s,destroyed:c,blockLen:a,outputLen:d}=this;return e.finished=s,e.destroyed=c,e.blockLen=a,e.outputLen=d,e.oHash=t._cloneInto(e.oHash),e.iHash=o._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const jn=(n,e,t)=>new Js(n,e).update(t).digest();jn.create=(n,e)=>new Js(n,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _u=BigInt(0),ao=BigInt(1);function Qs(n){return mn(n.Fp,Cu.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),mn(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Ys(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}const{Ph:Du,aT:Pu}=Ao,Tr={Err:class extends Error{constructor(n=""){super(n)}},_parseInt(n){const{Err:e}=Tr;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");const t=n[1],o=n.subarray(2,t+2);if(!t||o.length!==t)throw new e("Invalid signature integer: wrong length");if(128&o[0])throw new e("Invalid signature integer: negative");if(o[0]===0&&!(128&o[1]))throw new e("Invalid signature integer: unnecessary leading zero");return{d:Du(o),l:n.subarray(t+2)}},toSig(n){const{Err:e}=Tr,t=typeof n=="string"?Pu(n):n;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let o=t.length;if(o<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==o-2)throw new e("Invalid signature: incorrect length");const{d:s,l:c}=Tr._parseInt(t.subarray(2)),{d:a,l:d}=Tr._parseInt(c);if(d.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:a}},hexFromSig(n){const e=E=>8&Number.parseInt(E[0],16)?"00"+E:E,t=E=>{const O=E.toString(16);return 1&O.length?`0${O}`:O},o=e(t(n.s)),s=e(t(n.r)),c=o.length/2,a=s.length/2,d=t(c),f=t(a);return`30${t(a+c+4)}02${f}${s}02${d}${o}`}},sr=BigInt(0),Ht=BigInt(1),Fi=(BigInt(2),BigInt(3));BigInt(4);function Uu(n){const e=(function(T){const N=Qs(T);mn(N,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:_,Fp:P,a:K}=N;if(_){if(!P.eql(K,P.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof _!="object"||typeof _.beta!="bigint"||typeof _.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...N})})(n),{Fp:t}=e,o=e.toBytes||((T,N,_)=>{const P=N.toAffine();return yn(Uint8Array.from([4]),t.toBytes(P.x),t.toBytes(P.y))}),s=e.fromBytes||(T=>{const N=T.subarray(1);return{x:t.fromBytes(N.subarray(0,t.BYTES)),y:t.fromBytes(N.subarray(t.BYTES,2*t.BYTES))}});function c(T){const{a:N,b:_}=e,P=t.sqr(T),K=t.mul(P,T);return t.add(t.add(K,t.mul(T,N)),_)}if(!t.eql(t.sqr(e.Gy),c(e.Gx)))throw new Error("bad generator point: equation left != right");function a(T){return typeof T=="bigint"&&sr<T&&T<e.n}function d(T){if(!a(T))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function f(T){const{allowedPrivateKeyLengths:N,nByteLength:_,wrapPrivateKey:P,n:K}=e;if(N&&typeof T!="bigint"){if(T instanceof Uint8Array&&(T=Qr(T)),typeof T!="string"||!N.includes(T.length))throw new Error("Invalid key");T=T.padStart(2*_,"0")}let M;try{M=typeof T=="bigint"?T:wr(Jt("private key",T,_))}catch{throw new Error(`private key must be ${_} bytes, hex or bigint, not ${typeof T}`)}return P&&(M=St(M,K)),d(M),M}const E=new Map;function O(T){if(!(T instanceof v))throw new Error("ProjectivePoint expected")}class v{constructor(N,_,P){if(this.px=N,this.py=_,this.pz=P,N==null||!t.isValid(N))throw new Error("x required");if(_==null||!t.isValid(_))throw new Error("y required");if(P==null||!t.isValid(P))throw new Error("z required")}static fromAffine(N){const{x:_,y:P}=N||{};if(!N||!t.isValid(_)||!t.isValid(P))throw new Error("invalid affine point");if(N instanceof v)throw new Error("projective point not allowed");const K=M=>t.eql(M,t.ZERO);return K(_)&&K(P)?v.ZERO:new v(_,P,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(N){const _=t.invertBatch(N.map(P=>P.pz));return N.map((P,K)=>P.toAffine(_[K])).map(v.fromAffine)}static fromHex(N){const _=v.fromAffine(s(Jt("pointHex",N)));return _.assertValidity(),_}static fromPrivateKey(N){return v.BASE.multiply(f(N))}_setWindowSize(N){this._WINDOW_SIZE=N,E.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:N,y:_}=this.toAffine();if(!t.isValid(N)||!t.isValid(_))throw new Error("bad point: x or y not FE");const P=t.sqr(_),K=c(N);if(!t.eql(P,K))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:N}=this.toAffine();if(t.isOdd)return!t.isOdd(N);throw new Error("Field doesn't support isOdd")}equals(N){O(N);const{px:_,py:P,pz:K}=this,{px:M,py:re,pz:G}=N,D=t.eql(t.mul(_,G),t.mul(M,K)),C=t.eql(t.mul(P,G),t.mul(re,K));return D&&C}negate(){return new v(this.px,t.neg(this.py),this.pz)}double(){const{a:N,b:_}=e,P=t.mul(_,Fi),{px:K,py:M,pz:re}=this;let G=t.ZERO,D=t.ZERO,C=t.ZERO,j=t.mul(K,K),k=t.mul(M,M),V=t.mul(re,re),ne=t.mul(K,M);return ne=t.add(ne,ne),C=t.mul(K,re),C=t.add(C,C),G=t.mul(N,C),D=t.mul(P,V),D=t.add(G,D),G=t.sub(k,D),D=t.add(k,D),D=t.mul(G,D),G=t.mul(ne,G),C=t.mul(P,C),V=t.mul(N,V),ne=t.sub(j,V),ne=t.mul(N,ne),ne=t.add(ne,C),C=t.add(j,j),j=t.add(C,j),j=t.add(j,V),j=t.mul(j,ne),D=t.add(D,j),V=t.mul(M,re),V=t.add(V,V),j=t.mul(V,ne),G=t.sub(G,j),C=t.mul(V,k),C=t.add(C,C),C=t.add(C,C),new v(G,D,C)}add(N){O(N);const{px:_,py:P,pz:K}=this,{px:M,py:re,pz:G}=N;let D=t.ZERO,C=t.ZERO,j=t.ZERO;const k=e.a,V=t.mul(e.b,Fi);let ne=t.mul(_,M),X=t.mul(P,re),se=t.mul(K,G),Y=t.add(_,P),ue=t.add(M,re);Y=t.mul(Y,ue),ue=t.add(ne,X),Y=t.sub(Y,ue),ue=t.add(_,K);let ce=t.add(M,G);return ue=t.mul(ue,ce),ce=t.add(ne,se),ue=t.sub(ue,ce),ce=t.add(P,K),D=t.add(re,G),ce=t.mul(ce,D),D=t.add(X,se),ce=t.sub(ce,D),j=t.mul(k,ue),D=t.mul(V,se),j=t.add(D,j),D=t.sub(X,j),j=t.add(X,j),C=t.mul(D,j),X=t.add(ne,ne),X=t.add(X,ne),se=t.mul(k,se),ue=t.mul(V,ue),X=t.add(X,se),se=t.sub(ne,se),se=t.mul(k,se),ue=t.add(ue,se),ne=t.mul(X,ue),C=t.add(C,ne),ne=t.mul(ce,ue),D=t.mul(Y,D),D=t.sub(D,ne),ne=t.mul(Y,X),j=t.mul(ce,j),j=t.add(j,ne),new v(D,C,j)}subtract(N){return this.add(N.negate())}is0(){return this.equals(v.ZERO)}wNAF(N){return U.wNAFCached(this,E,N,_=>{const P=t.invertBatch(_.map(K=>K.pz));return _.map((K,M)=>K.toAffine(P[M])).map(v.fromAffine)})}multiplyUnsafe(N){const _=v.ZERO;if(N===sr)return _;if(d(N),N===Ht)return this;const{endo:P}=e;if(!P)return U.unsafeLadder(this,N);let{k1neg:K,k1:M,k2neg:re,k2:G}=P.splitScalar(N),D=_,C=_,j=this;for(;M>sr||G>sr;)M&Ht&&(D=D.add(j)),G&Ht&&(C=C.add(j)),j=j.double(),M>>=Ht,G>>=Ht;return K&&(D=D.negate()),re&&(C=C.negate()),C=new v(t.mul(C.px,P.beta),C.py,C.pz),D.add(C)}multiply(N){d(N);let _,P,K=N;const{endo:M}=e;if(M){const{k1neg:re,k1:G,k2neg:D,k2:C}=M.splitScalar(K);let{p:j,f:k}=this.wNAF(G),{p:V,f:ne}=this.wNAF(C);j=U.constTimeNegate(re,j),V=U.constTimeNegate(D,V),V=new v(t.mul(V.px,M.beta),V.py,V.pz),_=j.add(V),P=k.add(ne)}else{const{p:re,f:G}=this.wNAF(K);_=re,P=G}return v.normalizeZ([_,P])[0]}multiplyAndAddUnsafe(N,_,P){const K=v.BASE,M=(G,D)=>D!==sr&&D!==Ht&&G.equals(K)?G.multiply(D):G.multiplyUnsafe(D),re=M(this,_).add(M(N,P));return re.is0()?void 0:re}toAffine(N){const{px:_,py:P,pz:K}=this,M=this.is0();N==null&&(N=M?t.ONE:t.inv(K));const re=t.mul(_,N),G=t.mul(P,N),D=t.mul(K,N);if(M)return{x:t.ZERO,y:t.ZERO};if(!t.eql(D,t.ONE))throw new Error("invZ was invalid");return{x:re,y:G}}isTorsionFree(){const{h:N,isTorsionFree:_}=e;if(N===Ht)return!0;if(_)return _(v,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:N,clearCofactor:_}=e;return N===Ht?this:_?_(v,this):this.multiplyUnsafe(e.h)}toRawBytes(N=!0){return this.assertValidity(),o(v,this,N)}toHex(N=!0){return Qr(this.toRawBytes(N))}}v.BASE=new v(e.Gx,e.Gy,t.ONE),v.ZERO=new v(t.ZERO,t.ONE,t.ZERO);const w=e.nBitLength,U=(function(T,N){const _=(K,M)=>{const re=M.negate();return K?re:M},P=K=>({windows:Math.ceil(N/K)+1,windowSize:2**(K-1)});return{constTimeNegate:_,unsafeLadder(K,M){let re=T.ZERO,G=K;for(;M>_u;)M&ao&&(re=re.add(G)),G=G.double(),M>>=ao;return re},precomputeWindow(K,M){const{windows:re,windowSize:G}=P(M),D=[];let C=K,j=C;for(let k=0;k<re;k++){j=C,D.push(j);for(let V=1;V<G;V++)j=j.add(C),D.push(j);C=j.double()}return D},wNAF(K,M,re){const{windows:G,windowSize:D}=P(K);let C=T.ZERO,j=T.BASE;const k=BigInt(2**K-1),V=2**K,ne=BigInt(K);for(let X=0;X<G;X++){const se=X*D;let Y=Number(re&k);re>>=ne,Y>D&&(Y-=V,re+=ao);const ue=se,ce=se+Math.abs(Y)-1,ye=X%2!=0,Ie=Y<0;Y===0?j=j.add(_(ye,M[ue])):C=C.add(_(Ie,M[ce]))}return{p:C,f:j}},wNAFCached(K,M,re,G){const D=K._WINDOW_SIZE||1;let C=M.get(K);return C||(C=this.precomputeWindow(K,D),D!==1&&M.set(K,G(C))),this.wNAF(D,C,re)}}})(v,e.endo?Math.ceil(w/2):w);return{CURVE:e,ProjectivePoint:v,normPrivateKeyToScalar:f,weierstrassEquation:c,isWithinCurveOrder:a}}function Lu(n){const e=(function(k){const V=Qs(k);return mn(V,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...V})})(n),{Fp:t,n:o}=e,s=t.BYTES+1,c=2*t.BYTES+1;function a(k){return St(k,o)}function d(k){return Ro(k,o)}const{ProjectivePoint:f,normPrivateKeyToScalar:E,weierstrassEquation:O,isWithinCurveOrder:v}=Uu({...e,toBytes(k,V,ne){const X=V.toAffine(),se=t.toBytes(X.x),Y=yn;return ne?Y(Uint8Array.from([V.hasEvenY()?2:3]),se):Y(Uint8Array.from([4]),se,t.toBytes(X.y))},fromBytes(k){const V=k.length,ne=k[0],X=k.subarray(1);if(V!==s||ne!==2&&ne!==3){if(V===c&&ne===4)return{x:t.fromBytes(X.subarray(0,t.BYTES)),y:t.fromBytes(X.subarray(t.BYTES,2*t.BYTES))};throw new Error(`Point of length ${V} was invalid. Expected ${s} compressed bytes or ${c} uncompressed bytes`)}{const Y=wr(X);if(!(sr<(se=Y)&&se<t.ORDER))throw new Error("Point is not on curve");const ue=O(Y);let ce=t.sqrt(ue);return!(1&~ne)!=((ce&Ht)===Ht)&&(ce=t.neg(ce)),{x:Y,y:ce}}var se}}),w=k=>Qr(qr(k,e.nByteLength));function U(k){return k>o>>Ht}const T=(k,V,ne)=>wr(k.slice(V,ne));class N{constructor(V,ne,X){this.r=V,this.s=ne,this.recovery=X,this.assertValidity()}static fromCompact(V){const ne=e.nByteLength;return V=Jt("compactSignature",V,2*ne),new N(T(V,0,ne),T(V,ne,2*ne))}static fromDER(V){const{r:ne,s:X}=Tr.toSig(Jt("DER",V));return new N(ne,X)}assertValidity(){if(!v(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!v(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(V){return new N(this.r,this.s,V)}recoverPublicKey(V){const{r:ne,s:X,recovery:se}=this,Y=M(Jt("msgHash",V));if(se==null||![0,1,2,3].includes(se))throw new Error("recovery id invalid");const ue=se===2||se===3?ne+e.n:ne;if(ue>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const ce=1&se?"03":"02",ye=f.fromHex(ce+w(ue)),Ie=d(ue),Re=a(-Y*Ie),S=a(X*Ie),x=f.BASE.multiplyAndAddUnsafe(ye,Re,S);if(!x)throw new Error("point at infinify");return x.assertValidity(),x}hasHighS(){return U(this.s)}normalizeS(){return this.hasHighS()?new N(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return gn(this.toDERHex())}toDERHex(){return Tr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return gn(this.toCompactHex())}toCompactHex(){return w(this.r)+w(this.s)}}const _={isValidPrivateKey(k){try{return E(k),!0}catch{return!1}},normPrivateKeyToScalar:E,randomPrivateKey:()=>{const k=Li(e.n);return(function(V,ne,X=!1){const se=V.length,Y=Ws(ne),ue=Li(ne);if(se<16||se<ue||se>1024)throw new Error(`expected ${ue}-1024 bytes of input, got ${se}`);const ce=St(X?wr(V):Bo(V),ne-ut)+ut;return X?Go(ce,Y):qr(ce,Y)})(e.randomBytes(k),e.n)},precompute:(k=8,V=f.BASE)=>(V._setWindowSize(k),V.multiply(BigInt(3)),V)};function P(k){const V=k instanceof Uint8Array,ne=typeof k=="string",X=(V||ne)&&k.length;return V?X===s||X===c:ne?X===2*s||X===2*c:k instanceof f}const K=e.bits2int||function(k){const V=wr(k),ne=8*k.length-e.nBitLength;return ne>0?V>>BigInt(ne):V},M=e.bits2int_modN||function(k){return a(K(k))},re=ko(e.nBitLength);function G(k){if(typeof k!="bigint")throw new Error("bigint expected");if(!(sr<=k&&k<re))throw new Error(`bigint expected < 2^${e.nBitLength}`);return qr(k,e.nByteLength)}function D(k,V,ne=C){if(["recovered","canonical"].some(Pe=>Pe in ne))throw new Error("sign() legacy options not supported");const{hash:X,randomBytes:se}=e;let{lowS:Y,prehash:ue,extraEntropy:ce}=ne;Y==null&&(Y=!0),k=Jt("msgHash",k),ue&&(k=Jt("prehashed msgHash",X(k)));const ye=M(k),Ie=E(V),Re=[G(Ie),G(ye)];if(ce!=null){const Pe=ce===!0?se(t.BYTES):ce;Re.push(Jt("extraEntropy",Pe))}const S=yn(...Re),x=ye;return{seed:S,k2sig:function(Pe){const Te=K(Pe);if(!v(Te))return;const qe=d(Te),nt=f.BASE.multiply(Te).toAffine(),Ze=a(nt.x);if(Ze===sr)return;const Ye=a(qe*a(x+Ze*Ie));if(Ye===sr)return;let Ue=(nt.x===Ze?0:2)|Number(nt.y&Ht),Ee=Ye;return Y&&U(Ye)&&(Ee=(function(Me){return U(Me)?a(-Me):Me})(Ye),Ue^=1),new N(Ze,Ee,Ue)}}}const C={lowS:e.lowS,prehash:!1},j={lowS:e.lowS,prehash:!1};return f.BASE._setWindowSize(8),{CURVE:e,getPublicKey:function(k,V=!0){return f.fromPrivateKey(k).toRawBytes(V)},getSharedSecret:function(k,V,ne=!0){if(P(k))throw new Error("first arg must be private key");if(!P(V))throw new Error("second arg must be public key");return f.fromHex(V).multiply(E(k)).toRawBytes(ne)},sign:function(k,V,ne=C){const{seed:X,k2sig:se}=D(k,V,ne),Y=e;return zs(Y.hash.outputLen,Y.nByteLength,Y.hmac)(X,se)},verify:function(k,V,ne,X=j){var nt;const se=k;if(V=Jt("msgHash",V),ne=Jt("publicKey",ne),"strict"in X)throw new Error("options.strict was renamed to lowS");const{lowS:Y,prehash:ue}=X;let ce,ye;try{if(typeof se=="string"||se instanceof Uint8Array)try{ce=N.fromDER(se)}catch(Ze){if(!(Ze instanceof Tr.Err))throw Ze;ce=N.fromCompact(se)}else{if(typeof se!="object"||typeof se.r!="bigint"||typeof se.s!="bigint")throw new Error("PARSE");{const{r:Ze,s:Ye}=se;ce=new N(Ze,Ye)}}ye=f.fromHex(ne)}catch(Ze){if(Ze.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Y&&ce.hasHighS())return!1;ue&&(V=e.hash(V));const{r:Ie,s:Re}=ce,S=M(V),x=d(Re),Pe=a(S*x),Te=a(Ie*x),qe=(nt=f.BASE.multiplyAndAddUnsafe(ye,Pe,Te))==null?void 0:nt.toAffine();return!!qe&&a(qe.x)===Ie},ProjectivePoint:f,Signature:N,utils:_}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Fu(n){return{hash:n,hmac:(e,...t)=>jn(n,e,(function(...o){const s=new Uint8Array(o.reduce((a,d)=>a+d.length,0));let c=0;return o.forEach(a=>{if(!Bs(a))throw new Error("Uint8Array expected");s.set(a,c),c+=a.length}),s})(...t)),randomBytes:iu}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Zs=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Bi=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Bu=BigInt(1),So=BigInt(2),Gi=(n,e)=>(n+e/So)/e;function Gu(n){const e=Zs,t=BigInt(3),o=BigInt(6),s=BigInt(11),c=BigInt(22),a=BigInt(23),d=BigInt(44),f=BigInt(88),E=n*n*n%e,O=E*E*n%e,v=Mt(O,t,e)*O%e,w=Mt(v,t,e)*O%e,U=Mt(w,So,e)*E%e,T=Mt(U,s,e)*U%e,N=Mt(T,c,e)*T%e,_=Mt(N,d,e)*N%e,P=Mt(_,f,e)*_%e,K=Mt(P,d,e)*N%e,M=Mt(K,t,e)*O%e,re=Mt(M,a,e)*T%e,G=Mt(re,o,e)*E%e,D=Mt(G,So,e);if(!No.eql(No.sqr(D),n))throw new Error("Cannot find square root");return D}const No=(function(n,e,t=!1,o={}){if(n<=mt)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:s,nByteLength:c}=Ys(n,e);if(c>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=Tu(n),d=Object.freeze({ORDER:n,BITS:s,BYTES:c,MASK:ko(s),ZERO:mt,ONE:ut,create:f=>St(f,n),isValid:f=>{if(typeof f!="bigint")throw new Error("Invalid field element: expected bigint, got "+typeof f);return mt<=f&&f<n},is0:f=>f===mt,isOdd:f=>(f&ut)===ut,neg:f=>St(-f,n),eql:(f,E)=>f===E,sqr:f=>St(f*f,n),add:(f,E)=>St(f+E,n),sub:(f,E)=>St(f-E,n),mul:(f,E)=>St(f*E,n),pow:(f,E)=>(function(O,v,w){if(w<mt)throw new Error("Expected power > 0");if(w===mt)return O.ONE;if(w===ut)return v;let U=O.ONE,T=v;for(;w>mt;)w&ut&&(U=O.mul(U,T)),T=O.sqr(T),w>>=ut;return U})(d,f,E),div:(f,E)=>St(f*Ro(E,n),n),sqrN:f=>f*f,addN:(f,E)=>f+E,subN:(f,E)=>f-E,mulN:(f,E)=>f*E,inv:f=>Ro(f,n),sqrt:o.sqrt||(f=>a(d,f)),invertBatch:f=>(function(E,O){const v=new Array(O.length),w=O.reduce((T,N,_)=>E.is0(N)?T:(v[_]=T,E.mul(T,N)),E.ONE),U=E.inv(w);return O.reduceRight((T,N,_)=>E.is0(N)?T:(v[_]=E.mul(T,v[_]),E.mul(T,N)),U),v})(d,f),cmov:(f,E,O)=>O?E:f,toBytes:f=>t?Go(f,c):qr(f,c),fromBytes:f=>{if(f.length!==c)throw new Error(`Fp.fromBytes: expected ${c}, got ${f.length}`);return t?Bo(f):wr(f)}});return Object.freeze(d)})(Zs,void 0,void 0,{sqrt:Gu}),dr=(function(n,e){const t=o=>Lu({...n,...Fu(o)});return Object.freeze({...t(e),create:t})})({a:BigInt(0),b:BigInt(7),Fp:No,n:Bi,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=Bi,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),o=-Bu*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),c=t,a=BigInt("0x100000000000000000000000000000000"),d=Gi(c*n,e),f=Gi(-o*n,e);let E=St(n-d*t-f*s,e),O=St(-d*o-f*c,e);const v=E>a,w=O>a;if(v&&(E=e-E),w&&(O=e-O),E>a||O>a)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:v,k1:E,k2neg:w,k2:O}}}},tn);BigInt(0);dr.ProjectivePoint;const xo=BigInt(0),br=BigInt(1),Mr=9007199254740991;function tt(n,e){switch(typeof n){case"bigint":return n;case"number":return Z(Number.isInteger(n),"underflow",e||"value",n),Z(n>=-Mr&&n<=Mr,"overflow",e||"value",n),BigInt(n);case"string":try{if(n==="")throw new Error("empty string");return n[0]==="-"&&n[1]!=="-"?-BigInt(n.substring(1)):BigInt(n)}catch(t){Z(!1,`invalid BigNumberish string: ${t.message}`,e||"value",n)}}Z(!1,"invalid BigNumberish value",e||"value",n)}function Mo(n,e){const t=tt(n,e);return xe(t>=xo,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:n}),t}const ki="0123456789abcdef";function Xs(n){if(n instanceof Uint8Array){let e="0x0";for(const t of n)e+=ki[t>>4],e+=ki[15&t];return BigInt(e)}return tt(n)}function Yt(n,e){switch(typeof n){case"bigint":return Z(n>=-Mr&&n<=Mr,"overflow",e||"value",n),Number(n);case"number":return Z(Number.isInteger(n),"underflow",e||"value",n),Z(n>=-Mr&&n<=Mr,"overflow",e||"value",n),n;case"string":try{if(n==="")throw new Error("empty string");return Yt(BigInt(n),e)}catch(t){Z(!1,`invalid numeric string: ${t.message}`,e||"value",n)}}Z(!1,"invalid numeric value",e||"value",n)}function Zr(n,e){let t=Mo(n,"value").toString(16);{const o=Yt(e,"width");for(xe(2*o>=t.length,`value exceeds width (${o} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:n});t.length<2*o;)t="0"+t}return"0x"+t}function lt(n){const e=Mo(n,"value");if(e===xo)return new Uint8Array([]);let t=e.toString(16);t.length%2&&(t="0"+t);const o=new Uint8Array(t.length/2);for(let s=0;s<o.length;s++){const c=2*s;o[s]=parseInt(t.substring(c,c+2),16)}return o}const xi="0x0000000000000000000000000000000000000000000000000000000000000000",Mi=BigInt(0),Ki=BigInt(1),ji=BigInt(2),$i=BigInt(27),Vi=BigInt(28),In=BigInt(35),Fr={};function Hi(n){return yr(lt(n),32)}class pt{#e;#t;#r;#n;get r(){return this.#e}set r(e){Z(dn(e)===32,"invalid r","value",e),this.#e=me(e)}get s(){return Z(parseInt(this.#t.substring(0,3))<8,"non-canonical s; use ._s","s",this.#t),this.#t}set s(e){Z(dn(e)===32,"invalid s","value",e),this.#t=me(e)}get _s(){return this.#t}isValid(){return parseInt(this.#t.substring(0,3))<8}get v(){return this.#r}set v(e){const t=Yt(e,"value");Z(t===27||t===28,"invalid v","v",e),this.#r=t}get networkV(){return this.#n}get legacyChainId(){const e=this.networkV;return e==null?null:pt.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=Oe(this.s);return this.yParity&&(e[0]|=128),me(e)}get compactSerialized(){return ft([this.r,this.yParityAndS])}get serialized(){return ft([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(e,t,o,s){xn(e,Fr,"Signature"),this.#e=t,this.#t=o,this.#r=s,this.#n=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new pt(Fr,this.r,this._s,this.v);return this.networkV&&(e.#n=this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const t=tt(e,"v");return t==$i||t==Vi?Mi:(Z(t>=In,"invalid EIP-155 v","v",e),(t-In)/ji)}static getChainIdV(e,t){return tt(e)*ji+BigInt(35+t-27)}static getNormalizedV(e){const t=tt(e);return t===Mi||t===$i?27:t===Ki||t===Vi?28:(Z(t>=In,"invalid v","v",e),t&Ki?27:28)}static from(e){function t(E,O){Z(E,O,"signature",e)}if(e==null)return new pt(Fr,xi,xi,27);if(typeof e=="string"){const E=Oe(e,"signature");if(E.length===64){const O=me(E.slice(0,32)),v=E.slice(32,64),w=128&v[0]?28:27;return v[0]&=127,new pt(Fr,O,me(v),w)}if(E.length===65){const O=me(E.slice(0,32)),v=me(E.slice(32,64)),w=pt.getNormalizedV(E[64]);return new pt(Fr,O,v,w)}t(!1,"invalid raw signature length")}if(e instanceof pt)return e.clone();const o=e.r;t(o!=null,"missing r");const s=Hi(o),c=(function(E,O){if(E!=null)return Hi(E);if(O!=null){t(rr(O,32),"invalid yParityAndS");const v=Oe(O);return v[0]&=127,me(v)}t(!1,"missing s")})(e.s,e.yParityAndS),{networkV:a,v:d}=(function(E,O,v){if(E!=null){const w=tt(E);return{networkV:w>=In?w:void 0,v:pt.getNormalizedV(w)}}if(O!=null)return t(rr(O,32),"invalid yParityAndS"),{v:128&Oe(O)[0]?28:27};if(v!=null){switch(Yt(v,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")})(e.v,e.yParityAndS,e.yParity),f=new pt(Fr,s,c,d);return a&&(f.#n=a),t(e.yParity==null||Yt(e.yParity,"sig.yParity")===f.yParity,"yParity mismatch"),t(e.yParityAndS==null||e.yParityAndS===f.yParityAndS,"yParityAndS mismatch"),f}}class Nt{#e;constructor(e){Z(dn(e)===32,"invalid private key","privateKey","[REDACTED]"),this.#e=me(e)}get privateKey(){return this.#e}get publicKey(){return Nt.computePublicKey(this.#e)}get compressedPublicKey(){return Nt.computePublicKey(this.#e,!0)}sign(e){Z(dn(e)===32,"invalid digest length","digest",e);const t=dr.sign(Rr(e),Rr(this.#e),{lowS:!0});return pt.from({r:Zr(t.r,32),s:Zr(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){const t=Nt.computePublicKey(e);return me(dr.getSharedSecret(Rr(this.#e),Oe(t),!1))}static computePublicKey(e,t){let o=Oe(e,"key");if(o.length===32)return me(dr.getPublicKey(o,!!t));if(o.length===64){const s=new Uint8Array(65);s[0]=4,s.set(o,1),o=s}return me(dr.ProjectivePoint.fromHex(o).toRawBytes(t))}static recoverPublicKey(e,t){Z(dn(e)===32,"invalid digest length","digest",e);const o=pt.from(t);let s=dr.Signature.fromCompact(Rr(ft([o.r,o.s])));s=s.addRecoveryBit(o.yParity);const c=s.recoverPublicKey(Rr(e));return Z(c!=null,"invalid signature for digest","signature",t),"0x"+c.toHex(!1)}static addPoints(e,t,o){const s=dr.ProjectivePoint.fromHex(Nt.computePublicKey(e).substring(2)),c=dr.ProjectivePoint.fromHex(Nt.computePublicKey(t).substring(2));return"0x"+s.add(c).toHex(!!o)}}const ku=BigInt(0),xu=BigInt(36);function qi(n){const e=(n=n.toLowerCase()).substring(2).split(""),t=new Uint8Array(40);for(let s=0;s<40;s++)t[s]=e[s].charCodeAt(0);const o=Oe(ht(t));for(let s=0;s<40;s+=2)o[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(15&o[s>>1])>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const Ko={};for(let n=0;n<10;n++)Ko[String(n)]=String(n);for(let n=0;n<26;n++)Ko[String.fromCharCode(65+n)]=String(10+n);function Mu(n){let e=(n=(n=n.toUpperCase()).substring(4)+n.substring(0,2)+"00").split("").map(o=>Ko[o]).join("");for(;e.length>=15;){let o=e.substring(0,15);e=parseInt(o,10)%97+e.substring(o.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}const Ku=(function(){const n={};for(let e=0;e<36;e++)n["0123456789abcdefghijklmnopqrstuvwxyz"[e]]=BigInt(e);return n})();function wt(n){if(Z(typeof n=="string","invalid address","address",n),n.match(/^(0x)?[0-9a-fA-F]{40}$/)){n.startsWith("0x")||(n="0x"+n);const e=qi(n);return Z(!n.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===n,"bad address checksum","address",n),e}if(n.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){Z(n.substring(2,4)===Mu(n),"bad icap checksum","address",n);let e=(function(t){t=t.toLowerCase();let o=ku;for(let s=0;s<t.length;s++)o=o*xu+Ku[t[s]];return o})(n.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return qi("0x"+e)}Z(!1,"invalid address","address",n)}async function uo(n,e){const t=await e;return t!=null&&t!=="0x0000000000000000000000000000000000000000"||(xe(typeof n!="string","unconfigured name","UNCONFIGURED_NAME",{value:n}),Z(!1,"invalid AddressLike value; did not resolve to a value address","target",n)),wt(t)}function pn(n,e){return typeof n=="string"?n.match(/^0x[0-9a-f]{40}$/i)?wt(n):(xe(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),uo(n,e.resolveName(n))):(t=n)&&typeof t.getAddress=="function"?uo(n,n.getAddress()):n&&typeof n.then=="function"?uo(n,n):void Z(!1,"unsupported addressable value","target",n);var t}function Cr(n,e){Z(typeof n=="string","invalid string value","str",n),e!=null&&(js(e),n=n.normalize(e));let t=[];for(let o=0;o<n.length;o++){const s=n.charCodeAt(o);if(s<128)t.push(s);else if(s<2048)t.push(s>>6|192),t.push(63&s|128);else if((64512&s)==55296){o++;const c=n.charCodeAt(o);Z(o<n.length&&(64512&c)==56320,"invalid surrogate pair","str",n);const a=65536+((1023&s)<<10)+(1023&c);t.push(a>>18|240),t.push(a>>12&63|128),t.push(a>>6&63|128),t.push(63&a|128)}else t.push(s>>12|224),t.push(s>>6&63|128),t.push(63&s|128)}return new Uint8Array(t)}function ju(n){return typeof n=="string"&&(n=Cr(n)),ht(ft([Cr(`Ethereum Signed Message:
`),Cr(String(n.length)),n]))}function zi(n){const e=[];for(;n;)e.unshift(255&n),n>>=8;return e}function ea(n){if(Array.isArray(n)){let o=[];if(n.forEach(function(c){o=o.concat(ea(c))}),o.length<=55)return o.unshift(192+o.length),o;const s=zi(o.length);return s.unshift(247+s.length),s.concat(o)}const e=Array.prototype.slice.call(Oe(n,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const t=zi(e.length);return t.unshift(183+t.length),t.concat(e)}const Yi="0123456789abcdef";function pr(n){let e="0x";for(const t of ea(n))e+=Yi[t>>4],e+=Yi[15&t];return e}function $u(n){return Z(typeof n.address=="string","invalid address for hashAuthorization","auth.address",n),ht(ft(["0x05",pr([n.chainId!=null?lt(n.chainId):"0x",wt(n.address),n.nonce!=null?lt(n.nonce):"0x"])]))}function $n(n){return ht(Cr(n))}const ta=new Uint8Array(32);ta.fill(0);const Vu=BigInt(-1),ra=BigInt(0),na=BigInt(1),Hu=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),qu=Zr(na,32),zu=Zr(ra,32),Wi={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},co=["name","version","chainId","verifyingContract","salt"];function Ji(n){return function(e){return Z(typeof e=="string",`invalid domain value for ${JSON.stringify(n)}`,`domain.${n}`,e),e}}const Yu={name:Ji("name"),version:Ji("version"),chainId:function(n){const e=tt(n,"domain.chainId");return Z(e>=0,"invalid chain ID","domain.chainId",n),Number.isSafeInteger(e)?Number(e):(function(t){let o=me(Mn(t)?t:lt(t)).substring(2);for(;o.startsWith("0");)o=o.substring(1);return o===""&&(o="0"),"0x"+o})(e)},verifyingContract:function(n){try{return wt(n).toLowerCase()}catch{}Z(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",n)},salt:function(n){const e=Oe(n,"domain.salt");return Z(e.length===32,'invalid domain value "salt"',"domain.salt",n),me(e)}};function lo(n){{const e=n.match(/^(u?)int(\d+)$/);if(e){const t=e[1]==="",o=parseInt(e[2]);Z(o%8==0&&o!==0&&o<=256&&e[2]===String(o),"invalid numeric width","type",n);const s=(function(a,d){const f=Mo(a,"value"),E=BigInt(Yt(d,"bits"));return f&(br<<E)-br})(Hu,t?o-1:o),c=t?(s+na)*Vu:ra;return function(a){const d=tt(a,"value");return Z(d>=c&&d<=s,`value out-of-bounds for ${n}`,"value",d),Zr(t?(function(f,E){let O=tt(f,"value");const v=BigInt(Yt(E,"width")),w=br<<v-br;return O<xo?(O=-O,xe(O<=w,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:f}),(~O&(br<<v)-br)+br):(xe(O<w,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:f}),O)})(d,256):d,32)}}}{const e=n.match(/^bytes(\d+)$/);if(e){const t=parseInt(e[1]);return Z(t!==0&&t<=32&&e[1]===String(t),"invalid bytes width","type",n),function(o){return Z(Oe(o).length===t,`invalid length for ${n}`,"value",o),(function(s){const c=Oe(s),a=c.length%32;return a?ft([c,ta.slice(a)]):me(c)})(o)}}}switch(n){case"address":return function(e){return yr(wt(e),32)};case"bool":return function(e){return e?qu:zu};case"bytes":return function(e){return ht(e)};case"string":return function(e){return $n(e)}}return null}function Qi(n,e){return`${n}(${e.map(({name:t,type:o})=>o+" "+t).join(",")})`}function Rn(n){const e=n.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:n}}class Ft{primaryType;#e;get types(){return JSON.parse(this.#e)}#t;#r;constructor(e){this.#t=new Map,this.#r=new Map;const t=new Map,o=new Map,s=new Map,c={};Object.keys(e).forEach(d=>{c[d]=e[d].map(({name:f,type:E})=>{let{base:O,index:v}=Rn(E);return O!=="int"||e.int||(O="int256"),O!=="uint"||e.uint||(O="uint256"),{name:f,type:O+(v||"")}}),t.set(d,new Set),o.set(d,[]),s.set(d,new Set)}),this.#e=JSON.stringify(c);for(const d in c){const f=new Set;for(const E of c[d]){Z(!f.has(E.name),`duplicate variable name ${JSON.stringify(E.name)} in ${JSON.stringify(d)}`,"types",e),f.add(E.name);const O=Rn(E.type).base;Z(O!==d,`circular type reference to ${JSON.stringify(O)}`,"types",e),lo(O)||(Z(o.has(O),`unknown type ${JSON.stringify(O)}`,"types",e),o.get(O).push(d),t.get(d).add(O))}}const a=Array.from(o.keys()).filter(d=>o.get(d).length===0);Z(a.length!==0,"missing primary type","types",e),Z(a.length===1,`ambiguous primary types or unused types: ${a.map(d=>JSON.stringify(d)).join(", ")}`,"types",e),kt(this,{primaryType:a[0]}),(function d(f,E){Z(!E.has(f),`circular type reference to ${JSON.stringify(f)}`,"types",e),E.add(f);for(const O of t.get(f))if(o.has(O)){d(O,E);for(const v of E)s.get(v).add(O)}E.delete(f)})(this.primaryType,new Set);for(const[d,f]of s){const E=Array.from(f);E.sort(),this.#t.set(d,Qi(d,c[d])+E.map(O=>Qi(O,c[O])).join(""))}}getEncoder(e){let t=this.#r.get(e);return t||(t=this.#n(e),this.#r.set(e,t)),t}#n(e){{const s=lo(e);if(s)return s}const t=Rn(e).array;if(t){const s=t.prefix,c=this.getEncoder(s);return a=>{Z(t.count===-1||t.count===a.length,`array length mismatch; expected length ${t.count}`,"value",a);let d=a.map(c);return this.#t.has(s)&&(d=d.map(ht)),ht(ft(d))}}const o=this.types[e];if(o){const s=$n(this.#t.get(e));return c=>{const a=o.map(({name:d,type:f})=>{const E=this.getEncoder(f)(c[d]);return this.#t.has(f)?ht(E):E});return a.unshift(s),ft(a)}}Z(!1,`unknown type: ${e}`,"type",e)}encodeType(e){const t=this.#t.get(e);return Z(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return ht(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,o){if(lo(e))return o(e,t);const s=Rn(e).array;if(s)return Z(s.count===-1||s.count===t.length,`array length mismatch; expected length ${s.count}`,"value",t),t.map(a=>this._visit(s.prefix,a,o));const c=this.types[e];if(c)return c.reduce((a,{name:d,type:f})=>(a[d]=this._visit(f,t[d],o),a),{});Z(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new Ft(e)}static getPrimaryType(e){return Ft.from(e).primaryType}static hashStruct(e,t,o){return Ft.from(t).hashStruct(e,o)}static hashDomain(e){const t=[];for(const o in e){if(e[o]==null)continue;const s=Wi[o];Z(s,`invalid typed-data domain key: ${JSON.stringify(o)}`,"domain",e),t.push({name:o,type:s})}return t.sort((o,s)=>co.indexOf(o.name)-co.indexOf(s.name)),Ft.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,o){return ft(["0x1901",Ft.hashDomain(e),Ft.from(t).hash(o)])}static hash(e,t,o){return ht(Ft.encode(e,t,o))}static async resolveNames(e,t,o,s){e=Object.assign({},e);for(const d in e)e[d]==null&&delete e[d];const c={};e.verifyingContract&&!rr(e.verifyingContract,20)&&(c[e.verifyingContract]="0x");const a=Ft.from(t);a.visit(o,(d,f)=>(d!=="address"||rr(f,20)||(c[f]="0x"),f));for(const d in c)c[d]=await s(d);return e.verifyingContract&&c[e.verifyingContract]&&(e.verifyingContract=c[e.verifyingContract]),{domain:e,value:o=a.visit(o,(d,f)=>d==="address"&&c[f]?c[f]:f)}}static getPayload(e,t,o){Ft.hashDomain(e);const s={},c=[];co.forEach(f=>{const E=e[f];E!=null&&(s[f]=Yu[f](E),c.push({name:f,type:Wi[f]}))});const a=Ft.from(t);t=a.types;const d=Object.assign({},t);return Z(d.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",t),d.EIP712Domain=c,a.encode(o),{types:d,domain:s,primaryType:a.primaryType,message:a.visit(o,(f,E)=>{if(f.match(/^bytes(\d*)/))return me(Oe(E));if(f.match(/^u?int/))return tt(E).toString();switch(f){case"address":return E.toLowerCase();case"bool":return!!E;case"string":return Z(typeof E=="string","invalid string","value",E),E}Z(!1,"unsupported type","type",f)})}}}const Zi="0x0000000000000000000000000000000000000000";function Wu(n,e,t,o){Ts(n);const s=Gs({dkLen:32,asyncTick:10},o),{c,dkLen:a,asyncTick:d}=s;if(Gt(c),Gt(a),Gt(d),c<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const f=Jr(e),E=Jr(t),O=new Uint8Array(a),v=jn.create(n,f),w=v._cloneInto().update(E);return{c,dkLen:a,asyncTick:d,DK:O,PRF:v,PRFSalt:w}}function Ju(n,e,t,o,s){return n.destroy(),e.destroy(),o&&o.destroy(),s.fill(0),t}function jo(n,e,t,o){const{c:s,dkLen:c,DK:a,PRF:d,PRFSalt:f}=Wu(n,e,t,o);let E;const O=new Uint8Array(4),v=Fn(O),w=new Uint8Array(d.outputLen);for(let U=1,T=0;T<c;U++,T+=d.outputLen){const N=a.subarray(T,T+d.outputLen);v.setInt32(0,U,!1),(E=f._cloneInto(E)).update(O).digestInto(w),N.set(w.subarray(0,N.length));for(let _=1;_<s;_++){d._cloneInto(E).update(w).digestInto(w);for(let P=0;P<N.length;P++)N[P]^=w[P]}}return Ju(d,f,a,E,w)}const[Qu,Zu]=Fe.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),fr=new Uint32Array(80),hr=new Uint32Array(80);class Xu extends Fo{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:o,Bl:s,Ch:c,Cl:a,Dh:d,Dl:f,Eh:E,El:O,Fh:v,Fl:w,Gh:U,Gl:T,Hh:N,Hl:_}=this;return[e,t,o,s,c,a,d,f,E,O,v,w,U,T,N,_]}set(e,t,o,s,c,a,d,f,E,O,v,w,U,T,N,_){this.Ah=0|e,this.Al=0|t,this.Bh=0|o,this.Bl=0|s,this.Ch=0|c,this.Cl=0|a,this.Dh=0|d,this.Dl=0|f,this.Eh=0|E,this.El=0|O,this.Fh=0|v,this.Fl=0|w,this.Gh=0|U,this.Gl=0|T,this.Hh=0|N,this.Hl=0|_}process(e,t){for(let M=0;M<16;M++,t+=4)fr[M]=e.getUint32(t),hr[M]=e.getUint32(t+=4);for(let M=16;M<80;M++){const re=0|fr[M-15],G=0|hr[M-15],D=Fe.rotrSH(re,G,1)^Fe.rotrSH(re,G,8)^Fe.shrSH(re,G,7),C=Fe.rotrSL(re,G,1)^Fe.rotrSL(re,G,8)^Fe.shrSL(re,G,7),j=0|fr[M-2],k=0|hr[M-2],V=Fe.rotrSH(j,k,19)^Fe.rotrBH(j,k,61)^Fe.shrSH(j,k,6),ne=Fe.rotrSL(j,k,19)^Fe.rotrBL(j,k,61)^Fe.shrSL(j,k,6),X=Fe.add4L(C,ne,hr[M-7],hr[M-16]),se=Fe.add4H(X,D,V,fr[M-7],fr[M-16]);fr[M]=0|se,hr[M]=0|X}let{Ah:o,Al:s,Bh:c,Bl:a,Ch:d,Cl:f,Dh:E,Dl:O,Eh:v,El:w,Fh:U,Fl:T,Gh:N,Gl:_,Hh:P,Hl:K}=this;for(let M=0;M<80;M++){const re=Fe.rotrSH(v,w,14)^Fe.rotrSH(v,w,18)^Fe.rotrBH(v,w,41),G=Fe.rotrSL(v,w,14)^Fe.rotrSL(v,w,18)^Fe.rotrBL(v,w,41),D=v&U^~v&N,C=w&T^~w&_,j=Fe.add5L(K,G,C,Zu[M],hr[M]),k=Fe.add5H(j,P,re,D,Qu[M],fr[M]),V=0|j,ne=Fe.rotrSH(o,s,28)^Fe.rotrBH(o,s,34)^Fe.rotrBH(o,s,39),X=Fe.rotrSL(o,s,28)^Fe.rotrBL(o,s,34)^Fe.rotrBL(o,s,39),se=o&c^o&d^c&d,Y=s&a^s&f^a&f;P=0|N,K=0|_,N=0|U,_=0|T,U=0|v,T=0|w,{h:v,l:w}=Fe.add(0|E,0|O,0|k,0|V),E=0|d,O=0|f,d=0|c,f=0|a,c=0|o,a=0|s;const ue=Fe.add3L(V,X,Y);o=Fe.add3H(ue,k,ne,se),s=0|ue}({h:o,l:s}=Fe.add(0|this.Ah,0|this.Al,0|o,0|s)),{h:c,l:a}=Fe.add(0|this.Bh,0|this.Bl,0|c,0|a),{h:d,l:f}=Fe.add(0|this.Ch,0|this.Cl,0|d,0|f),{h:E,l:O}=Fe.add(0|this.Dh,0|this.Dl,0|E,0|O),{h:v,l:w}=Fe.add(0|this.Eh,0|this.El,0|v,0|w),{h:U,l:T}=Fe.add(0|this.Fh,0|this.Fl,0|U,0|T),{h:N,l:_}=Fe.add(0|this.Gh,0|this.Gl,0|N,0|_),{h:P,l:K}=Fe.add(0|this.Hh,0|this.Hl,0|P,0|K),this.set(o,s,c,a,d,f,E,O,v,w,U,T,N,_,P,K)}roundClean(){fr.fill(0),hr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const $o=kn(()=>new Xu),Xi=(function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate global object")})(),es=Xi.crypto||Xi.msCrypto;function ec(n){switch(n){case"sha256":return tn.create();case"sha512":return $o.create()}Z(!1,"invalid hashing algorithm name","algorithm",n)}const oa=function(n){return ec("sha256").update(n).digest()};let ia=oa,ts=!1;function zt(n){const e=Oe(n,"data");return me(ia(e))}function tc(n){let e=n.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function rs(n,e,t){let o=0;for(let s=0;s<t;s++)o=256*o+n[e+s];return o}function ns(n,e,t,o){const s=[];for(;t<e+1+o;){const c=sa(n,t);s.push(c.result),xe((t+=c.consumed)<=e+1+o,"child data too short","BUFFER_OVERRUN",{buffer:n,length:o,offset:e})}return{consumed:1+o,result:s}}function sa(n,e){xe(n.length!==0,"data too short","BUFFER_OVERRUN",{buffer:n,length:0,offset:1});const t=o=>{xe(o<=n.length,"data short segment too short","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:o})};if(n[e]>=248){const o=n[e]-247;t(e+1+o);const s=rs(n,e+1,o);return t(e+1+o+s),ns(n,e,e+1+o,o+s)}if(n[e]>=192){const o=n[e]-192;return t(e+1+o),ns(n,e,e+1,o)}if(n[e]>=184){const o=n[e]-183;t(e+1+o);const s=rs(n,e+1,o);return t(e+1+o+s),{consumed:1+o+s,result:me(n.slice(e+1+o,e+1+o+s))}}if(n[e]>=128){const o=n[e]-128;return t(e+1+o),{consumed:1+o,result:me(n.slice(e+1,e+1+o))}}return{consumed:1,result:tc(n[e])}}function cn(n){const e=Oe(n,"data"),t=sa(e,0);return Z(t.consumed===e.length,"unexpected junk after rlp payload","data",n),t.result}function fo(n,e){return{address:wt(n),storageKeys:e.map((t,o)=>(Z(rr(t,32),"invalid slot",`storageKeys[${o}]`,t),t.toLowerCase()))}}function Vn(n){if(Array.isArray(n))return n.map((t,o)=>Array.isArray(t)?(Z(t.length===2,"invalid slot set",`value[${o}]`,t),fo(t[0],t[1])):(Z(t!=null&&typeof t=="object","invalid address-slot set","value",n),fo(t.address,t.storageKeys)));Z(n!=null&&typeof n=="object","invalid access list","value",n);const e=Object.keys(n).map(t=>{const o=n[t].reduce((s,c)=>(s[c]=!0,s),{});return fo(t,Object.keys(o).sort())});return e.sort((t,o)=>t.address.localeCompare(o.address)),e}function vn(n){let e;return e=typeof n=="string"?Nt.computePublicKey(n,!1):n.publicKey,wt(ht("0x"+e.substring(4)).substring(26))}zt._=oa,zt.lock=function(){ts=!0},zt.register=function(n){if(ts)throw new Error("sha256 is locked");ia=n},Object.freeze(zt),Object.freeze(zt);const yt=BigInt(0),rc=BigInt(2),nc=BigInt(27),oc=BigInt(28),ic=BigInt(35),sc=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),ho=131072;function os(n,e){let t=n.toString(16);for(;t.length<2;)t="0"+t;return t+=zt(e).substring(4),"0x"+t}function kr(n){return n==="0x"?null:wt(n)}function Sn(n,e){try{return Vn(n)}catch(t){Z(!1,t.message,e,n)}}function ac(n,e){try{if(!Array.isArray(n))throw new Error("authorizationList: invalid array");const t=[];for(let o=0;o<n.length;o++){const s=n[o];if(!Array.isArray(s))throw new Error(`authorization[${o}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${o}]: wrong length`);if(!s[1])throw new Error(`authorization[${o}]: null address`);t.push({address:kr(s[1]),nonce:Qe(s[2],"nonce"),chainId:Qe(s[0],"chainId"),signature:pt.from({yParity:Sr(s[3],"yParity"),r:yr(s[4],32),s:yr(s[5],32)})})}return t}catch(t){Z(!1,t.message,e,n)}}function Sr(n,e){return n==="0x"?0:Yt(n,e)}function Qe(n,e){if(n==="0x")return yt;const t=tt(n,e);return Z(t<=sc,"value exceeds uint size",e,t),t}function je(n,e){const t=tt(n,"value"),o=lt(t);return Z(o.length<=32,"value too large",`tx.${e}`,t),o}function Nn(n){return Vn(n).map(e=>[e.address,e.storageKeys])}function uc(n,e){Z(Array.isArray(n),`invalid ${e}`,"value",n);for(let t=0;t<n.length;t++)Z(rr(n[t],32),"invalid ${ param } hash",`value[${t}]`,n[t]);return n}function wn(n,e){let t;try{if(t=Sr(e[0],"yParity"),t!==0&&t!==1)throw new Error("bad yParity")}catch{Z(!1,"invalid yParity","yParity",e[0])}const o=yr(e[1],32),s=yr(e[2],32),c=pt.from({r:o,s,yParity:t});n.signature=c}class Qt{#e;#t;#r;#n;#u;#c;#l;#f;#h;#d;#p;#g;#a;#i;#o;#s;#y;get type(){return this.#e}set type(e){switch(e){case null:this.#e=null;break;case 0:case"legacy":this.#e=0;break;case 1:case"berlin":case"eip-2930":this.#e=1;break;case 2:case"london":case"eip-1559":this.#e=2;break;case 3:case"cancun":case"eip-4844":this.#e=3;break;case 4:case"pectra":case"eip-7702":this.#e=4;break;default:Z(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=this.#t;return e==null&&this.type===3?Zi:e}set to(e){this.#t=e==null?null:wt(e)}get nonce(){return this.#n}set nonce(e){this.#n=Yt(e,"value")}get gasLimit(){return this.#u}set gasLimit(e){this.#u=tt(e)}get gasPrice(){const e=this.#c;return e!=null||this.type!==0&&this.type!==1?e:yt}set gasPrice(e){this.#c=e==null?null:tt(e,"gasPrice")}get maxPriorityFeePerGas(){const e=this.#l;return e??(this.type===2||this.type===3?yt:null)}set maxPriorityFeePerGas(e){this.#l=e==null?null:tt(e,"maxPriorityFeePerGas")}get maxFeePerGas(){const e=this.#f;return e??(this.type===2||this.type===3?yt:null)}set maxFeePerGas(e){this.#f=e==null?null:tt(e,"maxFeePerGas")}get data(){return this.#r}set data(e){this.#r=me(e)}get value(){return this.#h}set value(e){this.#h=tt(e,"value")}get chainId(){return this.#d}set chainId(e){this.#d=tt(e)}get signature(){return this.#p||null}set signature(e){this.#p=e==null?null:pt.from(e)}get accessList(){const e=this.#g||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){this.#g=e==null?null:Vn(e)}get authorizationList(){const e=this.#y||null;return e==null&&this.type===4?[]:e}set authorizationList(e){this.#y=e==null?null:e.map(t=>{return{address:wt((o=t).address),nonce:tt(o.nonce!=null?o.nonce:0),chainId:tt(o.chainId!=null?o.chainId:0),signature:pt.from(o.signature)};var o})}get maxFeePerBlobGas(){const e=this.#a;return e==null&&this.type===3?yt:e}set maxFeePerBlobGas(e){this.#a=e==null?null:tt(e,"maxFeePerBlobGas")}get blobVersionedHashes(){let e=this.#i;return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){Z(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)Z(rr(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}this.#i=e}get blobs(){return this.#s==null?null:this.#s.map(e=>Object.assign({},e))}set blobs(e){if(e==null)return void(this.#s=null);const t=[],o=[];for(let s=0;s<e.length;s++){const c=e[s];if(Mn(c)){xe(this.#o,"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let a=Oe(c);if(Z(a.length<=ho,"blob is too large",`blobs[${s}]`,c),a.length!==ho){const E=new Uint8Array(ho);E.set(a),a=E}const d=this.#o.blobToKzgCommitment(a),f=me(this.#o.computeBlobKzgProof(a,d));t.push({data:me(a),commitment:me(d),proof:f}),o.push(os(1,d))}else{const a=me(c.commitment);t.push({data:me(c.data),commitment:a,proof:me(c.proof)}),o.push(os(1,a))}}this.#s=t,this.#i=o}get kzg(){return this.#o}set kzg(e){this.#o=e==null?null:(function(t){return{blobToKzgCommitment:o=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Oe(t.blobToKzgCommitment(me(o)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Oe(t.blobToKzgCommitment(o));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return Oe(t.blobToKZGCommitment(me(o)));Z(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(o,s)=>"computeBlobProof"in t&&typeof t.computeBlobProof=="function"?Oe(t.computeBlobProof(me(o),me(s))):"computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function"?t.computeBlobKzgProof(o,s):"computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function"?Oe(t.computeBlobKZGProof(me(o),me(s))):void Z(!1,"unsupported KZG library","kzg",t)}})(e)}constructor(){this.#e=null,this.#t=null,this.#n=0,this.#u=yt,this.#c=null,this.#l=null,this.#f=null,this.#r="0x",this.#h=yt,this.#d=yt,this.#p=null,this.#g=null,this.#a=null,this.#i=null,this.#o=null,this.#s=null,this.#y=null}get hash(){return this.signature==null?null:ht(this.#m(!0,!1))}get unsignedHash(){return ht(this.unsignedSerialized)}get from(){return this.signature==null?null:(e=this.unsignedHash,t=this.signature,vn(Nt.recoverPublicKey(e,t)));var e,t}get fromPublicKey(){return this.signature==null?null:Nt.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}#m(e,t){xe(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const o=e?this.signature:null;switch(this.inferType()){case 0:return(function(s,c){const a=[je(s.nonce,"nonce"),je(s.gasPrice||0,"gasPrice"),je(s.gasLimit,"gasLimit"),s.to||"0x",je(s.value,"value"),s.data];let d=yt;if(s.chainId!=yt)d=tt(s.chainId,"tx.chainId"),Z(!c||c.networkV==null||c.legacyChainId===d,"tx.chainId/sig.v mismatch","sig",c);else if(s.signature){const E=s.signature.legacyChainId;E!=null&&(d=E)}if(!c)return d!==yt&&(a.push(lt(d)),a.push("0x"),a.push("0x")),pr(a);let f=BigInt(27+c.yParity);return d!==yt?f=pt.getChainIdV(d,c.v):BigInt(c.v)!==f&&Z(!1,"tx.chainId/sig.v mismatch","sig",c),a.push(lt(f)),a.push(lt(c.r)),a.push(lt(c.s)),pr(a)})(this,o);case 1:return(function(s,c){const a=[je(s.chainId,"chainId"),je(s.nonce,"nonce"),je(s.gasPrice||0,"gasPrice"),je(s.gasLimit,"gasLimit"),s.to||"0x",je(s.value,"value"),s.data,Nn(s.accessList||[])];return c&&(a.push(je(c.yParity,"recoveryParam")),a.push(lt(c.r)),a.push(lt(c.s))),ft(["0x01",pr(a)])})(this,o);case 2:return(function(s,c){const a=[je(s.chainId,"chainId"),je(s.nonce,"nonce"),je(s.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),je(s.maxFeePerGas||0,"maxFeePerGas"),je(s.gasLimit,"gasLimit"),s.to||"0x",je(s.value,"value"),s.data,Nn(s.accessList||[])];return c&&(a.push(je(c.yParity,"yParity")),a.push(lt(c.r)),a.push(lt(c.s))),ft(["0x02",pr(a)])})(this,o);case 3:return(function(s,c,a){const d=[je(s.chainId,"chainId"),je(s.nonce,"nonce"),je(s.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),je(s.maxFeePerGas||0,"maxFeePerGas"),je(s.gasLimit,"gasLimit"),s.to||Zi,je(s.value,"value"),s.data,Nn(s.accessList||[]),je(s.maxFeePerBlobGas||0,"maxFeePerBlobGas"),uc(s.blobVersionedHashes||[],"blobVersionedHashes")];return c&&(d.push(je(c.yParity,"yParity")),d.push(lt(c.r)),d.push(lt(c.s)),a)?ft(["0x03",pr([d,a.map(f=>f.data),a.map(f=>f.commitment),a.map(f=>f.proof)])]):ft(["0x03",pr(d)])})(this,o,t?this.blobs:null);case 4:return(function(s,c){const a=[je(s.chainId,"chainId"),je(s.nonce,"nonce"),je(s.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),je(s.maxFeePerGas||0,"maxFeePerGas"),je(s.gasLimit,"gasLimit"),s.to||"0x",je(s.value,"value"),s.data,Nn(s.accessList||[]),(d=s.authorizationList||[],d.map(f=>[je(f.chainId,"chainId"),f.address,je(f.nonce,"nonce"),je(f.signature.yParity,"yParity"),lt(f.signature.r),lt(f.signature.s)]))];var d;return c&&(a.push(je(c.yParity,"yParity")),a.push(lt(c.r)),a.push(lt(c.s))),ft(["0x04",pr(a)])})(this,o)}xe(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get serialized(){return this.#m(!0,!0)}get unsignedSerialized(){return this.#m(!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,t=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,o=this.accessList!=null,s=this.#a!=null||this.#i;this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&xe(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),xe(!t||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),xe(this.type!==0||!o,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const c=[];return this.type!=null?c.push(this.type):this.authorizationList&&this.authorizationList.length?c.push(4):t?c.push(2):e?(c.push(1),o||c.push(0)):o?(c.push(1),c.push(2)):(s&&this.to||(c.push(0),c.push(1),c.push(2)),c.push(3)),c.sort(),c}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return Qt.from(this)}toJSON(){const e=t=>t==null?null:t.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new Qt;if(typeof e=="string"){const o=Oe(e);if(o[0]>=127)return Qt.from((function(s){const c=cn(s);Z(Array.isArray(c)&&(c.length===9||c.length===6),"invalid field count for legacy transaction","data",s);const a={type:0,nonce:Sr(c[0],"nonce"),gasPrice:Qe(c[1],"gasPrice"),gasLimit:Qe(c[2],"gasLimit"),to:kr(c[3]),value:Qe(c[4],"value"),data:me(c[5]),chainId:yt};if(c.length===6)return a;const d=Qe(c[6],"v"),f=Qe(c[7],"r"),E=Qe(c[8],"s");if(f===yt&&E===yt)a.chainId=d;else{let O=(d-ic)/rc;O<yt&&(O=yt),a.chainId=O,Z(O!==yt||d===nc||d===oc,"non-canonical legacy v","v",c[6]),a.signature=pt.from({r:yr(c[7],32),s:yr(c[8],32),v:d})}return a})(o));switch(o[0]){case 1:return Qt.from((function(s){const c=cn(Oe(s).slice(1));Z(Array.isArray(c)&&(c.length===8||c.length===11),"invalid field count for transaction type: 1","data",me(s));const a={type:1,chainId:Qe(c[0],"chainId"),nonce:Sr(c[1],"nonce"),gasPrice:Qe(c[2],"gasPrice"),gasLimit:Qe(c[3],"gasLimit"),to:kr(c[4]),value:Qe(c[5],"value"),data:me(c[6]),accessList:Sn(c[7],"accessList")};return c.length===8||wn(a,c.slice(8)),a})(o));case 2:return Qt.from((function(s){const c=cn(Oe(s).slice(1));Z(Array.isArray(c)&&(c.length===9||c.length===12),"invalid field count for transaction type: 2","data",me(s));const a={type:2,chainId:Qe(c[0],"chainId"),nonce:Sr(c[1],"nonce"),maxPriorityFeePerGas:Qe(c[2],"maxPriorityFeePerGas"),maxFeePerGas:Qe(c[3],"maxFeePerGas"),gasPrice:null,gasLimit:Qe(c[4],"gasLimit"),to:kr(c[5]),value:Qe(c[6],"value"),data:me(c[7]),accessList:Sn(c[8],"accessList")};return c.length===9||wn(a,c.slice(9)),a})(o));case 3:return Qt.from((function(s){let c=cn(Oe(s).slice(1)),a="3",d=null;if(c.length===4&&Array.isArray(c[0])){a="3 (network format)";const E=c[1],O=c[2],v=c[3];Z(Array.isArray(E),"invalid network format: blobs not an array","fields[1]",E),Z(Array.isArray(O),"invalid network format: commitments not an array","fields[2]",O),Z(Array.isArray(v),"invalid network format: proofs not an array","fields[3]",v),Z(E.length===O.length,"invalid network format: blobs/commitments length mismatch","fields",c),Z(E.length===v.length,"invalid network format: blobs/proofs length mismatch","fields",c),d=[];for(let w=0;w<c[1].length;w++)d.push({data:E[w],commitment:O[w],proof:v[w]});c=c[0]}Z(Array.isArray(c)&&(c.length===11||c.length===14),`invalid field count for transaction type: ${a}`,"data",me(s));const f={type:3,chainId:Qe(c[0],"chainId"),nonce:Sr(c[1],"nonce"),maxPriorityFeePerGas:Qe(c[2],"maxPriorityFeePerGas"),maxFeePerGas:Qe(c[3],"maxFeePerGas"),gasPrice:null,gasLimit:Qe(c[4],"gasLimit"),to:kr(c[5]),value:Qe(c[6],"value"),data:me(c[7]),accessList:Sn(c[8],"accessList"),maxFeePerBlobGas:Qe(c[9],"maxFeePerBlobGas"),blobVersionedHashes:c[10]};d&&(f.blobs=d),Z(f.to!=null,`invalid address for transaction type: ${a}`,"data",s),Z(Array.isArray(f.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",s);for(let E=0;E<f.blobVersionedHashes.length;E++)Z(rr(f.blobVersionedHashes[E],32),`invalid blobVersionedHash at index ${E}: must be length 32`,"data",s);return c.length===11||wn(f,c.slice(11)),f})(o));case 4:return Qt.from((function(s){const c=cn(Oe(s).slice(1));Z(Array.isArray(c)&&(c.length===10||c.length===13),"invalid field count for transaction type: 4","data",me(s));const a={type:4,chainId:Qe(c[0],"chainId"),nonce:Sr(c[1],"nonce"),maxPriorityFeePerGas:Qe(c[2],"maxPriorityFeePerGas"),maxFeePerGas:Qe(c[3],"maxFeePerGas"),gasPrice:null,gasLimit:Qe(c[4],"gasLimit"),to:kr(c[5]),value:Qe(c[6],"value"),data:me(c[7]),accessList:Sn(c[8],"accessList"),authorizationList:ac(c[9],"authorizationList")};return c.length===10||wn(a,c.slice(10)),a})(o))}xe(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new Qt;return e.type!=null&&(t.type=e.type),e.to!=null&&(t.to=e.to),e.nonce!=null&&(t.nonce=e.nonce),e.gasLimit!=null&&(t.gasLimit=e.gasLimit),e.gasPrice!=null&&(t.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(t.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(t.data=e.data),e.value!=null&&(t.value=e.value),e.chainId!=null&&(t.chainId=e.chainId),e.signature!=null&&(t.signature=pt.from(e.signature)),e.accessList!=null&&(t.accessList=e.accessList),e.authorizationList!=null&&(t.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(t.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(t.kzg=e.kzg),e.blobs!=null&&(t.blobs=e.blobs),e.hash!=null&&(Z(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),Z(t.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(Z(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),Z(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}}BigInt(0);function aa(n){const e={};n.to&&(e.to=n.to),n.from&&(e.from=n.from),n.data&&(e.data=me(n.data));const t="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of t)s in n&&n[s]!=null&&(e[s]=tt(n[s],`request.${s}`));const o="type,nonce".split(/,/);for(const s of o)s in n&&n[s]!=null&&(e[s]=Yt(n[s],`request.${s}`));return n.accessList&&(e.accessList=Vn(n.accessList)),n.authorizationList&&(e.authorizationList=n.authorizationList.slice()),"blockTag"in n&&(e.blockTag=n.blockTag),"enableCcipRead"in n&&(e.enableCcipRead=!!n.enableCcipRead),"customData"in n&&(e.customData=n.customData),"blobVersionedHashes"in n&&n.blobVersionedHashes&&(e.blobVersionedHashes=n.blobVersionedHashes.slice()),"kzg"in n&&(e.kzg=n.kzg),"blobs"in n&&n.blobs&&(e.blobs=n.blobs.map(s=>Mn(s)?me(s):Object.assign({},s))),e}function Ar(n,e){if(n.provider)return n.provider;xe(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function is(n,e){let t=aa(e);if(t.to!=null&&(t.to=pn(t.to,n)),t.from!=null){const o=t.from;t.from=Promise.all([n.getAddress(),pn(o,n)]).then(([s,c])=>(Z(s.toLowerCase()===c.toLowerCase(),"transaction from mismatch","tx.from",c),s))}else t.from=n.getAddress();return await Uo(t)}class ua{provider;constructor(e){kt(this,{provider:e||null})}async getNonce(e){return Ar(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await is(this,e)}async populateTransaction(e){const t=Ar(this,"populateTransaction"),o=await is(this,e);o.nonce==null&&(o.nonce=await this.getNonce("pending")),o.gasLimit==null&&(o.gasLimit=await this.estimateGas(o));const s=await this.provider.getNetwork();o.chainId!=null?Z(tt(o.chainId)===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId):o.chainId=s.chainId;const c=o.maxFeePerGas!=null||o.maxPriorityFeePerGas!=null;if(o.gasPrice==null||o.type!==2&&!c?o.type!==0&&o.type!==1||!c||Z(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e):Z(!1,"eip-1559 transaction do not support gasPrice","tx",e),o.type!==2&&o.type!=null||o.maxFeePerGas==null||o.maxPriorityFeePerGas==null)if(o.type===0||o.type===1){const a=await t.getFeeData();xe(a.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),o.gasPrice==null&&(o.gasPrice=a.gasPrice)}else{const a=await t.getFeeData();if(o.type==null)if(a.maxFeePerGas!=null&&a.maxPriorityFeePerGas!=null)if(o.authorizationList&&o.authorizationList.length?o.type=4:o.type=2,o.gasPrice!=null){const d=o.gasPrice;delete o.gasPrice,o.maxFeePerGas=d,o.maxPriorityFeePerGas=d}else o.maxFeePerGas==null&&(o.maxFeePerGas=a.maxFeePerGas),o.maxPriorityFeePerGas==null&&(o.maxPriorityFeePerGas=a.maxPriorityFeePerGas);else a.gasPrice!=null?(xe(!c,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),o.gasPrice==null&&(o.gasPrice=a.gasPrice),o.type=0):xe(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else o.type!==2&&o.type!==3&&o.type!==4||(o.maxFeePerGas==null&&(o.maxFeePerGas=a.maxFeePerGas),o.maxPriorityFeePerGas==null&&(o.maxPriorityFeePerGas=a.maxPriorityFeePerGas))}else o.type=2;return await Uo(o)}async populateAuthorization(e){const t=Object.assign({},e);return t.chainId==null&&(t.chainId=(await Ar(this,"getNetwork").getNetwork()).chainId),t.nonce==null&&(t.nonce=await this.getNonce()),t}async estimateGas(e){return Ar(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Ar(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Ar(this,"resolveName").resolveName(e)}async sendTransaction(e){const t=Ar(this,"sendTransaction"),o=await this.populateTransaction(e);delete o.from;const s=Qt.from(o);return await t.broadcastTransaction(await this.signTransaction(s))}authorize(e){xe(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}class Vo extends ua{address;constructor(e,t){super(t),kt(this,{address:e})}async getAddress(){return this.address}connect(e){return new Vo(this.address,e)}#e(e,t){xe(!1,`VoidSigner cannot sign ${e}`,"UNSUPPORTED_OPERATION",{operation:t})}async signTransaction(e){this.#e("transactions","signTransaction")}async signMessage(e){this.#e("messages","signMessage")}async signTypedData(e,t,o){this.#e("typed-data","signTypedData")}}class Hn extends ua{address;#e;constructor(e,t){super(t),Z(e&&typeof e.sign=="function","invalid private key","privateKey","[ REDACTED ]"),this.#e=e,kt(this,{address:vn(this.signingKey.publicKey)})}get signingKey(){return this.#e}get privateKey(){return this.signingKey.privateKey}async getAddress(){return this.address}connect(e){return new Hn(this.#e,e)}async signTransaction(e){e=aa(e);const{to:t,from:o}=await Uo({to:e.to?pn(e.to,this):void 0,from:e.from?pn(e.from,this):void 0});t!=null&&(e.to=t),o!=null&&(e.from=o),e.from!=null&&(Z(wt(e.from)===this.address,"transaction from address mismatch","tx.from",e.from),delete e.from);const s=Qt.from(e);return s.signature=this.signingKey.sign(s.unsignedHash),s.serialized}async signMessage(e){return this.signMessageSync(e)}signMessageSync(e){return this.signingKey.sign(ju(e)).serialized}authorizeSync(e){Z(typeof e.address=="string","invalid address for authorizeSync","auth.address",e);const t=this.signingKey.sign($u(e));return Object.assign({},{address:wt(e.address),nonce:tt(e.nonce||0),chainId:tt(e.chainId||0)},{signature:t})}async authorize(e){return e=Object.assign({},e,{address:await pn(e.address,this)}),this.authorizeSync(await this.populateAuthorization(e))}async signTypedData(e,t,o){const s=await Ft.resolveNames(e,t,o,async c=>{xe(this.provider!=null,"cannot resolve ENS names without a provider","UNSUPPORTED_OPERATION",{operation:"resolveName",info:{name:c}});const a=await this.provider.resolveName(c);return xe(a!=null,"unconfigured ENS name","UNCONFIGURED_NAME",{value:c}),a});return this.signingKey.sign(Ft.hash(s.domain,t,s.value)).serialized}}let ss=!1;const ca=function(n,e,t){return(function(o,s){const c={sha256:tn,sha512:$o}[o];return Z(c!=null,"invalid hmac algorithm","algorithm",o),jn.create(c,s)})(n,e).update(t).digest()};let la=ca;function Kr(n,e,t){const o=Oe(e,"key"),s=Oe(t,"data");return me(la(n,o,s))}Kr._=ca,Kr.lock=function(){ss=!0},Kr.register=function(n){if(ss)throw new Error("computeHmac is locked");la=n},Object.freeze(Kr);const cc=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),fa=Uint8Array.from({length:16},(n,e)=>e);let Ho=[fa],qo=[fa.map(n=>(9*n+5)%16)];for(let n=0;n<4;n++)for(let e of[Ho,qo])e.push(e[n].map(t=>cc[t]));const ha=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(n=>new Uint8Array(n)),lc=Ho.map((n,e)=>n.map(t=>ha[e][t])),fc=qo.map((n,e)=>n.map(t=>ha[e][t])),hc=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),dc=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),Tn=(n,e)=>n<<e|n>>>32-e;function as(n,e,t,o){return n===0?e^t^o:n===1?e&t|~e&o:n===2?(e|~t)^o:n===3?e&o|t&~o:e^(t|~o)}const Cn=new Uint32Array(16);class pc extends Fo{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:o,h3:s,h4:c}=this;return[e,t,o,s,c]}set(e,t,o,s,c){this.h0=0|e,this.h1=0|t,this.h2=0|o,this.h3=0|s,this.h4=0|c}process(e,t){for(let U=0;U<16;U++,t+=4)Cn[U]=e.getUint32(t,!0);let o=0|this.h0,s=o,c=0|this.h1,a=c,d=0|this.h2,f=d,E=0|this.h3,O=E,v=0|this.h4,w=v;for(let U=0;U<5;U++){const T=4-U,N=hc[U],_=dc[U],P=Ho[U],K=qo[U],M=lc[U],re=fc[U];for(let G=0;G<16;G++){const D=Tn(o+as(U,c,d,E)+Cn[P[G]]+N,M[G])+v|0;o=v,v=E,E=0|Tn(d,10),d=c,c=D}for(let G=0;G<16;G++){const D=Tn(s+as(T,a,f,O)+Cn[K[G]]+_,re[G])+w|0;s=w,w=O,O=0|Tn(f,10),f=a,a=D}}this.set(this.h1+d+O|0,this.h2+E+w|0,this.h3+v+s|0,this.h4+o+a|0,this.h0+c+f|0)}roundClean(){Cn.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const gc=kn(()=>new pc);let us=!1;const da=function(n){return gc(n)};let pa=da;function jr(n){const e=Oe(n,"data");return me(pa(e))}jr._=da,jr.lock=function(){us=!0},jr.register=function(n){if(us)throw new TypeError("ripemd160 is locked");pa=n},Object.freeze(jr);let cs=!1;const ga=function(n){return new Uint8Array((function(e){xe(es!=null,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),Z(Number.isInteger(e)&&e>0&&e<=1024,"invalid length","length",e);const t=new Uint8Array(e);return es.getRandomValues(t),t})(n))};let ya=ga;function ar(n){return ya(n)}ar._=ga,ar.lock=function(){cs=!0},ar.register=function(n){if(cs)throw new Error("randomBytes is locked");ya=n},Object.freeze(ar);const wo="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";let _n=null;function yc(n){if(_n==null){_n={};for(let t=0;t<58;t++)_n[wo[t]]=BigInt(t)}const e=_n[n];return Z(e!=null,"invalid base58 value","letter",n),e}const mc=BigInt(0),To=BigInt(58),Ec=" !#$%&'()*+,-./<=>?@[]^_`{|}~",Oc=/^[a-z]*$/i;function ls(n,e){let t=97;return n.reduce((o,s)=>(s===e?t++:s.match(Oc)?o.push(String.fromCharCode(t)+s):(t=97,o.push(s)),o),[])}function vc(n){return Z(n[0]==="0","unsupported auwl data","data",n),(function(e,t){for(let c=28;c>=0;c--)e=e.split(Ec[c]).join(t.substring(2*c,2*c+2));const o=[],s=e.replace(/(:|([0-9])|([A-Z][a-z]*))/g,(c,a,d,f)=>{if(d)for(let E=parseInt(d);E>=0;E--)o.push(";");else o.push(a.toLowerCase());return""});if(s)throw new Error(`leftovers: ${JSON.stringify(s)}`);return ls(ls(o,";"),":")})(n.substring(59),n.substring(1,59))}class bc{locale;constructor(e){kt(this,{locale:e})}split(e){return e.toLowerCase().split(/\s+/g)}join(e){return e.join(" ")}}class Ac extends bc{#e;#t;constructor(e,t,o){super(e),this.#e=t,this.#t=o,this.#r=null}get _data(){return this.#e}_decodeWords(){return vc(this.#e)}#r;#n(){if(this.#r==null){const e=this._decodeWords();if($n(e.join(`
`)+`
`)!==this.#t)throw new Error(`BIP39 Wordlist for ${this.locale} FAILED`);this.#r=e}return this.#r}getWord(e){const t=this.#n();return Z(e>=0&&e<t.length,`invalid word index: ${e}`,"index",e),t[e]}getWordIndex(e){return this.#n().indexOf(e)}}let po=null;class Dr extends Ac{constructor(){super("en","0erleonalorenseinceregesticitStanvetearctssi#ch2Athck&tneLl0And#Il.yLeOutO=S|S%b/ra@SurdU'0Ce[Cid|CountCu'Hie=IdOu,-Qui*Ro[TT]T%T*[Tu$0AptDD-tD*[Ju,M.UltV<)Vi)0Rob-0FairF%dRaid0A(EEntRee0Ead0MRRp%tS!_rmBumCoholErtI&LLeyLowMo,O}PhaReadySoT Ways0A>urAz(gOngOuntU'd0Aly,Ch%Ci|G G!GryIm$K!Noun)Nu$O` Sw T&naTiqueXietyY1ArtOlogyPe?P!Pro=Ril1ChCt-EaEnaGueMMedM%MyOundR<+Re,Ri=RowTTefa@Ti,Tw%k0KPe@SaultSetSi,SumeThma0H!>OmTa{T&dT.udeTra@0Ct]D.Gu,NtTh%ToTumn0Era+OcadoOid0AkeA*AyEsomeFulKw?d0Is:ByChel%C#D+GL<)Lc#y~MbooN<aNn RRelyRga(R*lSeS-SketTt!3A^AnAutyCau'ComeEfF%eG(Ha=H(dLie=LowLtN^Nef./TrayTt Twe&Y#d3Cyc!DKeNdOlogyRdR`Tt _{AdeAmeAnketA,EakE[IndOodO[omOu'UeUrUsh_rdAtDyIlMbNeNusOkO,Rd R(gRrowSsTtomUn)XY_{etA(AndA[A=EadEezeI{Id+IefIghtIngIskOccoliOk&OnzeOomO` OwnUsh2Bb!DdyD+tFf$oIldLbLkL!tNd!Nk Rd&Rg R,SS(e[SyTt Y Zz:Bba+B(B!CtusGeKe~LmM aMpNN$N)lNdyNn#NoeNvasNy#Pab!P.$Pta(RRb#RdRgoRpetRryRtSeShS(o/!Su$TT$ogT^Teg%yTt!UghtU'Ut]Ve3Il(gL yM|NsusNturyRe$Rta(_irAlkAmp]An+AosApt Ar+A'AtEapE{Ee'EfErryE,I{&IefIldIm}yOi)Oo'R#-U{!UnkUrn0G?Nnam#Rc!Tiz&TyVil_imApArifyAwAyE<ErkEv I{I|IffImbIn-IpO{OgO'O`OudOwnUbUmpU, Ut^_^A,C#utDeFfeeIlInL!@L%LumnMb(eMeMf%tM-Mm#Mp<yNc tNdu@NfirmNg*[N}@Nsid NtrolNv()OkOlPp PyR$ReRnR*@/Tt#U^UntryUp!Ur'Us(V Yo>_{Ad!AftAmA}AshAt AwlAzyEamEd.EekEwI{etImeIspIt-OpO[Ou^OwdUci$UelUi'Umb!Un^UshYY,$2BeLtu*PPbo?dRiousRr|Rta(R=Sh]/omTe3C!:DMa+MpN)Ng R(gShUght WnY3AlBa>BrisCadeCemb CideCl(eC%a>C*a'ErF&'F(eFyG*eLayLiv M<dMi'Ni$Nti,NyP?tP&dPos.P`PutyRi=ScribeS tSignSkSpair/royTailTe@VelopVi)Vo>3AgramAlAm#dAryCeE'lEtFf G.$Gn.yLemmaNn NosaurRe@RtSag*eScov Sea'ShSmi[S%d Splay/<)V tVideV%)Zzy5Ct%Cum|G~Lph(Ma(Na>NkeyN%OrSeUb!Ve_ftAg#AmaA,-AwEamE[IftIllInkIpI=OpUmY2CkMbNeR(g/T^Ty1Arf1Nam-:G G!RlyRnR`Sily/Sy1HoOlogyOnomy0GeItUca>1F%t0G1GhtTh 2BowD E@r-Eg<tEm|Eph<tEvat%I>Se0B?kBodyBra)Er+Ot]PloyPow Pty0Ab!A@DD![D%'EmyErgyF%)Ga+G(eH<)JoyLi,OughR-hRollSu*T Ti*TryVelope1Isode0U$Uip0AA'OdeOs]R%Upt0CapeSayS&)Ta>0Ern$H-s1Id&)IlOkeOl=1A@Amp!Ce[Ch<+C.eCludeCu'Ecu>Erci'Hau,Hib.I!I,ItOt-P<dPe@Pi*Pla(Po'P*[T&dTra0EEbrow:Br-CeCultyDeIntI`~L'MeMilyMousNNcyNtasyRmSh]TT$Th TigueUltV%.e3Atu*Bru?yD $EEdElMa!N)/iv$T^V W3B Ct]EldGu*LeLmLt N$NdNeNg NishReRmR,Sc$ShTT}[X_gAmeAshAtAv%EeIghtIpOatO{O%Ow UidUshY_mCusGIlLd~owOdOtR)Re,R+tRkRtu}RumRw?dSsil/ UndX_gi!AmeEqu|EshI&dIn+OgOntO,OwnOz&U.2ElNNnyRna)RyTu*:D+tInLaxy~ yMePRa+Rba+Rd&Rl-Rm|SSpTeTh U+Ze3N $NiusN*Nt!Nu(e/u*2O,0AntFtGg!Ng RaffeRlVe_dAn)A*A[IdeImp'ObeOomOryO=OwUe_tDde[LdOdO'RillaSpelSsipV nWn_bA)A(AntApeA[Av.yEatE&IdIefItOc yOupOwUnt_rdE[IdeIltIt?N3M:B.IrLfMm M, NdPpyRb%RdRshR=,TVeWkZ?d3AdAl`ArtAvyD+hogIght~oLmetLpNRo3Dd&Gh~NtPRe/%y5BbyCkeyLdLeLiday~owMeNeyOdPeRnRr%R'Sp.$/TelUrV 5BGeM<Mb!M%Nd*dNgryNtRd!RryRtSb<d3Brid:1EOn0EaEntifyLe2N%e4LLeg$L}[0A+Ita>M&'Mu}Pa@Po'Pro=Pul'0ChCludeComeC*a'DexD-a>Do%Du,ryF<tFl-tF%mHa!H .Iti$Je@JuryMa>N Noc|PutQuiryS<eSe@SideSpi*/$lTa@T e,ToVe,V.eVol=3On0L<dOla>Sue0Em1Ory:CketGu?RZz3AlousAns~yWel9BInKeUr}yY5D+I)MpNg!Ni%Nk/:Ng?oo3EnEpT^upY3CkDD}yNdNgdomSsTT^&TeTt&Wi4EeIfeO{Ow:BBelB%Dd DyKeMpNgua+PtopR+T T(UghUndryVaWWnWsu.Y Zy3Ad AfArnA=Ctu*FtGG$G&dIsu*M#NdNg`NsOp?dSs#Tt Vel3ArB tyBr?yC&'FeFtGhtKeMbM.NkOnQuid/Tt!VeZ?d5AdAnB, C$CkG-NelyNgOpTt yUdUn+VeY$5CkyGga+Mb N?N^Xury3R-s:Ch(eDG-G}tIdIlInJ%KeMm$NNa+Nda>NgoNs]Nu$P!Rb!R^Rg(R(eRketRria+SkSs/ T^T i$ThTrixTt XimumZe3AdowAnAsu*AtCh<-D$DiaLodyLtMb M%yNt]NuRcyR+R.RryShSsa+T$Thod3Dd!DnightLk~]M-NdNimumN%Nu>Rac!Rr%S ySs/akeXXedXtu*5Bi!DelDifyMM|N.%NkeyN, N`OnR$ReRn(gSqu.oTh T]T%Unta(U'VeVie5ChFf(LeLtiplySc!SeumShroomS-/Tu$3Self/ yTh:I=MePk(Rrow/yT]Tu*3ArCkEdGati=G!@I` PhewR=/TTw%kUtr$V WsXt3CeGht5B!I'M(eeOd!Rm$R`SeTab!TeTh(gTi)VelW5C!?Mb R'T:K0EyJe@Li+Scu*S =Ta(Vious0CurE<Tob 0Or1FF Fi)T&2L1Ay0DI=Ymp-0It0CeEI#L(eLy1EnEraIn]Po'T]1An+B.Ch?dD D(?yG<I|Ig($Ph<0Tr-h0H 0Tdo%T TputTside0AlEnEr0NN 0Yg&0/ 0O}:CtDd!GeIrLa)LmNdaNelN-N` P RadeR|RkRrotRtySsT^ThTi|TrolTt nU'VeYm|3A)AnutArAs<tL-<NN$tyNcilOp!Pp Rfe@Rm.Rs#T2O}OtoRa'Ys-$0AnoCn-Ctu*E)GGe#~LotNkO} Pe/olT^Zza_)A}tA,-A>AyEa'Ed+U{UgUn+2EmEtIntL?LeLi)NdNyOlPul?Rt]S.]Ssib!/TatoTt yV tyWd W _@i)Ai'Ed-tEf Epa*Es|EttyEv|I)IdeIm?yIntI%.yIs#Iva>IzeOb!mO)[Odu)Of.OgramOje@Omo>OofOp tyOsp O>@OudOvide2Bl-Dd(g~LpL'Mpk(N^PilPpyR^a'R.yRpo'R'ShTZz!3Ramid:99Al.yAntumArt E,]I{ItIzO>:Bb.Cco#CeCkD?DioIlInI'~yMpN^NdomN+PidReTeTh V&WZ%3AdyAlAs#BelBuildC$lCei=CipeC%dCyc!Du)F!@F%mFu'G]G*tGul?Je@LaxLea'LiefLyMa(Memb M(dMo=Nd NewNtOp&PairPeatPla)P%tQui*ScueSemb!Si,Sour)Sp#'SultTi*T*atTurnUn]Ve$ViewW?d2Y`m0BBb#CeChDeD+F!GhtGidNgOtPp!SkTu$V$V 5AdA,BotBu,CketM<)OfOkieOmSeTa>UghUndU>Y$5Bb DeGLeNNwayR$:DDd!D}[FeIlLadLm#L#LtLu>MeMp!NdTisfyToshiU)Usa+VeY1A!AnA*Att E}HemeHoolI&)I[%sOrp]OutRapRe&RiptRub1AAr^As#AtC#dC*tCt]Cur.yEdEkGm|Le@~M(?Ni%N'Nt&)RiesRvi)Ss]Tt!TupV&_dowAftAllowA*EdEllEriffIeldIftI}IpIv O{OeOotOpOrtOuld O=RimpRugUff!Y0Bl(gCkDeE+GhtGnL|Lk~yLv Mil?Mp!N)NgR&/ Tua>XZe1A>Et^IIllInIrtUll0AbAmEepEnd I)IdeIghtImOg<OtOwUsh0AllArtI!OkeOo`0A{AkeApIffOw0ApCc Ci$CkDaFtL?Ldi LidLut]L=Me#eNgOnRryRtUlUndUpUr)U`0A)A*Ati$AwnEakEci$EedEllEndH eI)Id IkeInIr.L.OilOns%O#OrtOtRayReadR(gY0Ua*UeezeUir*l_b!AdiumAffA+AirsAmpAndArtA>AyEakEelEmEpE*oI{IllIngO{Oma^O}OolOryO=Ra>gyReetRikeR#gRugg!Ud|UffUmb!Y!0Bje@Bm.BwayC)[ChDd&Ff G?G+,ItMm NNnyN'tP PplyP*meReRfa)R+Rpri'RroundR=ySpe@/a(1AllowAmpApArmE?EetIftImIngIt^Ord1MbolMptomRup/em:B!Ck!GIlL|LkNkPeR+tSk/eTtooXi3A^Am~NN<tNnisNtRm/Xt_nkAtEmeEnE%yE*EyIngIsOughtReeRi=RowUmbUnd 0CketDeG LtMb MeNyPRedSsueT!5A,BaccoDayDdl EGe` I!tK&MatoM%rowNeNgueNightOlO`PP-Pp!R^RnadoRtoi'SsT$Uri,W?dW WnY_{AdeAff-Ag-A(Ansf ApAshA=lAyEatEeEndI$IbeI{Igg ImIpOphyOub!U{UeUlyUmpetU,U`Y2BeIt]Mb!NaN}lRkeyRnRt!1El=EntyI)InI,O1PeP-$:5Ly5B*lla0Ab!Awa*C!Cov D DoFairFoldHappyIf%mIqueItIv 'KnownLo{TilUsu$Veil1Da>GradeHoldOnP Set1B<Ge0A+EEdEfulE![U$0Il.y:C<tCuumGueLidL!yL=NNishP%Rious/Ult3H-!L=tNd%Ntu*NueRbRifyRs]RyS'lT <3Ab!Br<tCiousCt%yDeoEw~a+Nta+Ol(Rtu$RusSaS.Su$T$Vid5C$I)IdLc<oLumeTeYa+:GeG#ItLk~LnutNtRfa*RmRri%ShSp/eT VeY3Al`Ap#ArA'lA` BDd(gEk&dIrdLcome/T_!AtEatEelEnE*IpIsp 0DeD`FeLd~NNdowNeNgNkNn Nt ReSdomSeShT}[5LfM<Nd OdOlRdRkRldRryR`_pE{E,!I,I>Ong::Rd3Ar~ow9UUngU`:3BraRo9NeO","0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60")}static wordlist(){return po==null&&(po=new Dr),po}}let fs=!1;const ma=function(n,e,t,o,s){return(function(c,a,d,f,E){const O={sha256:tn,sha512:$o}[E];return Z(O!=null,"invalid pbkdf2 algorithm","algorithm",E),jo(O,c,a,{c:d,dkLen:f})})(n,e,t,o,s)};let Ea=ma;function gr(n,e,t,o,s){const c=Oe(n,"password"),a=Oe(e,"salt");return me(Ea(c,a,t,o,s))}function Oa(n){return(1<<n)-1<<8-n&255}function Ic(n){return(1<<n)-1&255}function go(n,e){js("NFKD"),e==null&&(e=Dr.wordlist());const t=e.split(n);Z(t.length%3==0&&t.length>=12&&t.length<=24,"invalid mnemonic length","mnemonic","[ REDACTED ]");const o=new Uint8Array(Math.ceil(11*t.length/8));let s=0;for(let d=0;d<t.length;d++){let f=e.getWordIndex(t[d].normalize("NFKD"));Z(f>=0,`invalid mnemonic word at index ${d}`,"mnemonic","[ REDACTED ]");for(let E=0;E<11;E++)f&1<<10-E&&(o[s>>3]|=1<<7-s%8),s++}const c=32*t.length/3,a=Oa(t.length/3);return Z((Oe(zt(o.slice(0,c/8)))[0]&a)===(o[o.length-1]&a),"invalid mnemonic checksum","mnemonic","[ REDACTED ]"),me(o.slice(0,c/8))}function yo(n,e){Z(n.length%4==0&&n.length>=16&&n.length<=32,"invalid entropy size","entropy","[ REDACTED ]"),e==null&&(e=Dr.wordlist());const t=[0];let o=11;for(let a=0;a<n.length;a++)o>8?(t[t.length-1]<<=8,t[t.length-1]|=n[a],o-=8):(t[t.length-1]<<=o,t[t.length-1]|=n[a]>>8-o,t.push(n[a]&Ic(8-o)),o+=3);const s=n.length/4,c=parseInt(zt(n).substring(2,4),16)&Oa(s);return t[t.length-1]<<=s,t[t.length-1]|=c>>8-s,e.join(t.map(a=>e.getWord(a)))}gr._=ma,gr.lock=function(){fs=!0},gr.register=function(n){if(fs)throw new Error("pbkdf2 is locked");Ea=n},Object.freeze(gr);const mo={};class Xr{phrase;password;wordlist;entropy;constructor(e,t,o,s,c){s==null&&(s=""),c==null&&(c=Dr.wordlist()),xn(e,mo,"Mnemonic"),kt(this,{phrase:o,password:s,wordlist:c,entropy:t})}computeSeed(){const e=Cr("mnemonic"+this.password,"NFKD");return gr(Cr(this.phrase,"NFKD"),e,2048,64,"sha512")}static fromPhrase(e,t,o){const s=go(e,o);return e=yo(Oe(s),o),new Xr(mo,s,e,t,o)}static fromEntropy(e,t,o){const s=Oe(e,"entropy"),c=yo(s,o);return new Xr(mo,me(s),c,t,o)}static entropyToPhrase(e,t){return yo(Oe(e,"entropy"),t)}static phraseToEntropy(e,t){return go(e,t)}static isValidMnemonic(e,t){try{return go(e,t),!0}catch{}return!1}}/*! MIT License. Copyright 2015-2022 Richard Moore <me@ricmoo.com>. See LICENSE.txt. */var Bn,$t,er,Ot=function(n,e,t,o){if(typeof e=="function"?n!==e||!o:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?o:t==="a"?o.call(n):o?o.value:e.get(n)},Eo=function(n,e,t,o,s){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t};const Rc={16:10,24:12,32:14},Sc=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],Kt=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],Dn=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],Nc=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],wc=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],Tc=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],Cc=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],_c=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],Dc=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],Pc=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],Uc=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],Lc=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],Fc=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],Bc=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],Gc=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function Oo(n){const e=[];for(let t=0;t<n.length;t+=4)e.push(n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3]);return e}class zo{get key(){return Ot(this,Bn,"f").slice()}constructor(e){if(Bn.set(this,void 0),$t.set(this,void 0),er.set(this,void 0),!(this instanceof zo))throw Error("AES must be instanitated with `new`");Eo(this,Bn,new Uint8Array(e));const t=Rc[this.key.length];if(t==null)throw new TypeError("invalid key size (must be 16, 24 or 32 bytes)");Eo(this,er,[]),Eo(this,$t,[]);for(let O=0;O<=t;O++)Ot(this,er,"f").push([0,0,0,0]),Ot(this,$t,"f").push([0,0,0,0]);const o=4*(t+1),s=this.key.length/4,c=Oo(this.key);let a;for(let O=0;O<s;O++)a=O>>2,Ot(this,er,"f")[a][O%4]=c[O],Ot(this,$t,"f")[t-a][O%4]=c[O];let d,f=0,E=s;for(;E<o;){if(d=c[s-1],c[0]^=Kt[d>>16&255]<<24^Kt[d>>8&255]<<16^Kt[255&d]<<8^Kt[d>>24&255]^Sc[f]<<24,f+=1,s!=8)for(let U=1;U<s;U++)c[U]^=c[U-1];else{for(let U=1;U<s/2;U++)c[U]^=c[U-1];d=c[s/2-1],c[s/2]^=Kt[255&d]^Kt[d>>8&255]<<8^Kt[d>>16&255]<<16^Kt[d>>24&255]<<24;for(let U=s/2+1;U<s;U++)c[U]^=c[U-1]}let O,v,w=0;for(;w<s&&E<o;)O=E>>2,v=E%4,Ot(this,er,"f")[O][v]=c[w],Ot(this,$t,"f")[t-O][v]=c[w++],E++}for(let O=1;O<t;O++)for(let v=0;v<4;v++)d=Ot(this,$t,"f")[O][v],Ot(this,$t,"f")[O][v]=Lc[d>>24&255]^Fc[d>>16&255]^Bc[d>>8&255]^Gc[255&d]}encrypt(e){if(e.length!=16)throw new TypeError("invalid plaintext size (must be 16 bytes)");const t=Ot(this,er,"f").length-1,o=[0,0,0,0];let s=Oo(e);for(let d=0;d<4;d++)s[d]^=Ot(this,er,"f")[0][d];for(let d=1;d<t;d++){for(let f=0;f<4;f++)o[f]=Nc[s[f]>>24&255]^wc[s[(f+1)%4]>>16&255]^Tc[s[(f+2)%4]>>8&255]^Cc[255&s[(f+3)%4]]^Ot(this,er,"f")[d][f];s=o.slice()}const c=new Uint8Array(16);let a=0;for(let d=0;d<4;d++)a=Ot(this,er,"f")[t][d],c[4*d]=255&(Kt[s[d]>>24&255]^a>>24),c[4*d+1]=255&(Kt[s[(d+1)%4]>>16&255]^a>>16),c[4*d+2]=255&(Kt[s[(d+2)%4]>>8&255]^a>>8),c[4*d+3]=255&(Kt[255&s[(d+3)%4]]^a);return c}decrypt(e){if(e.length!=16)throw new TypeError("invalid ciphertext size (must be 16 bytes)");const t=Ot(this,$t,"f").length-1,o=[0,0,0,0];let s=Oo(e);for(let d=0;d<4;d++)s[d]^=Ot(this,$t,"f")[0][d];for(let d=1;d<t;d++){for(let f=0;f<4;f++)o[f]=_c[s[f]>>24&255]^Dc[s[(f+3)%4]>>16&255]^Pc[s[(f+2)%4]>>8&255]^Uc[255&s[(f+1)%4]]^Ot(this,$t,"f")[d][f];s=o.slice()}const c=new Uint8Array(16);let a=0;for(let d=0;d<4;d++)a=Ot(this,$t,"f")[t][d],c[4*d]=255&(Dn[s[d]>>24&255]^a>>24),c[4*d+1]=255&(Dn[s[(d+3)%4]>>16&255]^a>>16),c[4*d+2]=255&(Dn[s[(d+2)%4]>>8&255]^a>>8),c[4*d+3]=255&(Dn[255&s[(d+1)%4]]^a);return c}}Bn=new WeakMap,$t=new WeakMap,er=new WeakMap;class va{constructor(e,t,o){if(o&&!(this instanceof o))throw new Error(`${e} must be instantiated with "new"`);Object.defineProperties(this,{aes:{enumerable:!0,value:new zo(t)},name:{enumerable:!0,value:e}})}}var fn,or,Pn=function(n,e,t,o,s){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t},Br=function(n,e,t,o){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(n)};class Yo extends va{constructor(e,t){if(super("ECC",e,Yo),fn.set(this,void 0),or.set(this,void 0),t){if(t.length%16)throw new TypeError("invalid iv size (must be 16 bytes)");Pn(this,fn,new Uint8Array(t))}else Pn(this,fn,new Uint8Array(16));Pn(this,or,this.iv)}get iv(){return new Uint8Array(Br(this,fn))}encrypt(e){if(e.length%16)throw new TypeError("invalid plaintext size (must be multiple of 16 bytes)");const t=new Uint8Array(e.length);for(let o=0;o<e.length;o+=16){for(let s=0;s<16;s++)Br(this,or)[s]^=e[o+s];Pn(this,or,this.aes.encrypt(Br(this,or))),t.set(Br(this,or),o)}return t}decrypt(e){if(e.length%16)throw new TypeError("invalid ciphertext size (must be multiple of 16 bytes)");const t=new Uint8Array(e.length);for(let o=0;o<e.length;o+=16){const s=this.aes.decrypt(e.subarray(o,o+16));for(let c=0;c<16;c++)t[o+c]=s[c]^Br(this,or)[c],Br(this,or)[c]=e[o+c]}return t}}fn=new WeakMap,or=new WeakMap;var hn,Ir,Vt,Gr=function(n,e,t,o,s){if(typeof e=="function"?n!==e||!0:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(n,t),t},jt=function(n,e,t,o){if(typeof e=="function"?n!==e||!o:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?o:t==="a"?o.call(n):o?o.value:e.get(n)};class en extends va{constructor(e,t){super("CTR",e,en),hn.set(this,void 0),Ir.set(this,void 0),Vt.set(this,void 0),Gr(this,Vt,new Uint8Array(16)),jt(this,Vt,"f").fill(0),Gr(this,hn,jt(this,Vt,"f")),Gr(this,Ir,16),t==null&&(t=1),typeof t=="number"?this.setCounterValue(t):this.setCounterBytes(t)}get counter(){return new Uint8Array(jt(this,Vt,"f"))}setCounterValue(e){if(!Number.isInteger(e)||e<0||e>Number.MAX_SAFE_INTEGER)throw new TypeError("invalid counter initial integer value");for(let t=15;t>=0;--t)jt(this,Vt,"f")[t]=e%256,e=Math.floor(e/256)}setCounterBytes(e){if(e.length!==16)throw new TypeError("invalid counter initial Uint8Array value length");jt(this,Vt,"f").set(e)}increment(){for(let e=15;e>=0;e--){if(jt(this,Vt,"f")[e]!==255){jt(this,Vt,"f")[e]++;break}jt(this,Vt,"f")[e]=0}}encrypt(e){var t,o;const s=new Uint8Array(e);for(let c=0;c<s.length;c++)jt(this,Ir,"f")===16&&(Gr(this,hn,this.aes.encrypt(jt(this,Vt,"f"))),Gr(this,Ir,0),this.increment()),s[c]^=jt(this,hn,"f")[Gr(this,Ir,(o=jt(this,Ir,"f"),t=o++,o)),t];return s}decrypt(e){return this.encrypt(e)}}hn=new WeakMap,Ir=new WeakMap,Vt=new WeakMap;const We=(n,e)=>n<<e|n>>>32-e;function hs(n,e,t,o,s,c){let a=n[e++]^t[o++],d=n[e++]^t[o++],f=n[e++]^t[o++],E=n[e++]^t[o++],O=n[e++]^t[o++],v=n[e++]^t[o++],w=n[e++]^t[o++],U=n[e++]^t[o++],T=n[e++]^t[o++],N=n[e++]^t[o++],_=n[e++]^t[o++],P=n[e++]^t[o++],K=n[e++]^t[o++],M=n[e++]^t[o++],re=n[e++]^t[o++],G=n[e++]^t[o++],D=a,C=d,j=f,k=E,V=O,ne=v,X=w,se=U,Y=T,ue=N,ce=_,ye=P,Ie=K,Re=M,S=re,x=G;for(let Pe=0;Pe<8;Pe+=2)V^=We(D+Ie|0,7),Y^=We(V+D|0,9),Ie^=We(Y+V|0,13),D^=We(Ie+Y|0,18),ue^=We(ne+C|0,7),Re^=We(ue+ne|0,9),C^=We(Re+ue|0,13),ne^=We(C+Re|0,18),S^=We(ce+X|0,7),j^=We(S+ce|0,9),X^=We(j+S|0,13),ce^=We(X+j|0,18),k^=We(x+ye|0,7),se^=We(k+x|0,9),ye^=We(se+k|0,13),x^=We(ye+se|0,18),C^=We(D+k|0,7),j^=We(C+D|0,9),k^=We(j+C|0,13),D^=We(k+j|0,18),X^=We(ne+V|0,7),se^=We(X+ne|0,9),V^=We(se+X|0,13),ne^=We(V+se|0,18),ye^=We(ce+ue|0,7),Y^=We(ye+ce|0,9),ue^=We(Y+ye|0,13),ce^=We(ue+Y|0,18),Ie^=We(x+S|0,7),Re^=We(Ie+x|0,9),S^=We(Re+Ie|0,13),x^=We(S+Re|0,18);s[c++]=a+D|0,s[c++]=d+C|0,s[c++]=f+j|0,s[c++]=E+k|0,s[c++]=O+V|0,s[c++]=v+ne|0,s[c++]=w+X|0,s[c++]=U+se|0,s[c++]=T+Y|0,s[c++]=N+ue|0,s[c++]=_+ce|0,s[c++]=P+ye|0,s[c++]=K+Ie|0,s[c++]=M+Re|0,s[c++]=re+S|0,s[c++]=G+x|0}function zr(n,e,t,o,s){let c=o+0,a=o+16*s;for(let d=0;d<16;d++)t[a+d]=n[e+16*(2*s-1)+d];for(let d=0;d<s;d++,c+=16,e+=16)hs(t,a,n,e,t,c),d>0&&(a+=16),hs(t,c,n,e+=16,t,a)}function ba(n,e,t){const o=Gs({dkLen:32,asyncTick:10,maxmem:1073742848},t),{N:s,r:c,p:a,dkLen:d,asyncTick:f,maxmem:E,onProgress:O}=o;if(Gt(s),Gt(c),Gt(a),Gt(d),Gt(f),Gt(E),O!==void 0&&typeof O!="function")throw new Error("progressCb should be function");const v=128*c,w=v/4;if(s<=1||s&s-1||s>=2**(v/8)||s>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(a<0||a>137438953440/v)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(d<0||d>137438953440)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const U=v*(s+a);if(U>E)throw new Error(`Scrypt: parameters too large, ${U} (128 * r * (N + p)) > ${E} (maxmem)`);const T=jo(tn,n,e,{c:1,dkLen:v*a}),N=Ln(T),_=Ln(new Uint8Array(v*s)),P=Ln(new Uint8Array(v));let K=()=>{};if(O){const M=2*s*a,re=Math.max(Math.floor(M/1e4),1);let G=0;K=()=>{G++,!O||G%re&&G!==M||O(G/M)}}return{N:s,r:c,p:a,dkLen:d,blockSize32:w,V:_,B32:N,B:T,tmp:P,blockMixCb:K,asyncTick:f}}function Aa(n,e,t,o,s){const c=jo(tn,n,t,{c:1,dkLen:e});return t.fill(0),o.fill(0),s.fill(0),c}let ds=!1,ps=!1;const Ia=async function(n,e,t,o,s,c,a){return await(async function(d,f,E){const{N:O,r:v,p:w,dkLen:U,blockSize32:T,V:N,B32:_,B:P,tmp:K,blockMixCb:M,asyncTick:re}=ba(d,f,E);for(let G=0;G<w;G++){const D=T*G;for(let j=0;j<T;j++)N[j]=_[D+j];let C=0;await Ni(O-1,re,()=>{zr(N,C,N,C+=T,v),M()}),zr(N,(O-1)*T,_,D,v),M(),await Ni(O,re,()=>{const j=_[D+T-16]%O;for(let k=0;k<T;k++)K[k]=_[D+k]^N[j*T+k];zr(K,0,_,D,v),M()})}return Aa(d,U,P,N,K)})(n,e,{N:t,r:o,p:s,dkLen:c,onProgress:a})},Ra=function(n,e,t,o,s,c){return(function(a,d,f){const{N:E,r:O,p:v,dkLen:w,blockSize32:U,V:T,B32:N,B:_,tmp:P,blockMixCb:K}=ba(a,d,f);for(let M=0;M<v;M++){const re=U*M;for(let G=0;G<U;G++)T[G]=N[re+G];for(let G=0,D=0;G<E-1;G++)zr(T,D,T,D+=U,O),K();zr(T,(E-1)*U,N,re,O),K();for(let G=0;G<E;G++){const D=N[re+U-16]%E;for(let C=0;C<U;C++)P[C]=N[re+C]^T[D*U+C];zr(P,0,N,re,O),K()}}return Aa(a,w,_,T,P)})(n,e,{N:t,r:o,p:s,dkLen:c})};let Sa=Ia,Na=Ra;async function $r(n,e,t,o,s,c,a){const d=Oe(n,"passwd"),f=Oe(e,"salt");return me(await Sa(d,f,t,o,s,c,a))}function Vr(n,e,t,o,s,c){const a=Oe(n,"passwd"),d=Oe(e,"salt");return me(Na(a,d,t,o,s,c))}function kc(n){const e=Oe(n,"randomBytes");e[6]=15&e[6]|64,e[8]=63&e[8]|128;const t=me(e);return[t.substring(2,10),t.substring(10,14),t.substring(14,18),t.substring(18,22),t.substring(22,34)].join("-")}function wa(n){return typeof n!="string"||n.startsWith("0x")||(n="0x"+n),Rr(n)}function ln(n,e){for(n=String(n);n.length<e;)n="0"+n;return n}function En(n){return typeof n=="string"?Cr(n,"NFKC"):Rr(n)}function at(n,e){const t=e.match(/^([a-z0-9$_.-]*)(:([a-z]+))?(!)?$/i);Z(t!=null,"invalid path","path",e);const o=t[1],s=t[3],c=t[4]==="!";let a=n;for(const d of o.toLowerCase().split(".")){if(Array.isArray(a)){if(!d.match(/^[0-9]+$/))break;a=a[parseInt(d)]}else if(typeof a=="object"){let f=null;for(const E in a)if(E.toLowerCase()===d){f=a[E];break}a=f}else a=null;if(a==null)break}if(Z(!c||a!=null,"missing required value","path",o),s&&a!=null){if(s==="int"){if(typeof a=="string"&&a.match(/^-?[0-9]+$/))return parseInt(a);if(Number.isSafeInteger(a))return a}if(s==="number"&&typeof a=="string"&&a.match(/^-?[0-9.]*$/))return parseFloat(a);if(s==="data"&&typeof a=="string")return wa(a);if(s==="array"&&Array.isArray(a)||s===typeof a)return a;Z(!1,`wrong type found for ${s} `,"path",o)}return a}$r._=Ia,$r.lock=function(){ps=!0},$r.register=function(n){if(ps)throw new Error("scrypt is locked");Sa=n},Object.freeze($r),Vr._=Ra,Vr.lock=function(){ds=!0},Vr.register=function(n){if(ds)throw new Error("scryptSync is locked");Na=n},Object.freeze(Vr);const Ta="m/44'/60'/0'/0/0";function gs(n){try{const e=JSON.parse(n);if((e.version!=null?parseInt(e.version):0)===3)return!0}catch{}return!1}function Un(n,e){const t=Oe(e),o=at(n,"crypto.ciphertext:data!");Z(me(ht(ft([t.slice(16,32),o]))).substring(2)===at(n,"crypto.mac:string!").toLowerCase(),"incorrect password","password","[ REDACTED ]");const s=(function(d,f,E){if(at(d,"crypto.cipher:string")==="aes-128-ctr"){const O=at(d,"crypto.cipherparams.iv:data!");return me(new en(f,O).decrypt(E))}xe(!1,"unsupported cipher","UNSUPPORTED_OPERATION",{operation:"decrypt"})})(n,t.slice(0,16),o),c=vn(s);if(n.address){let d=n.address.toLowerCase();d.startsWith("0x")||(d="0x"+d),Z(wt(d)===c,"keystore address/privateKey mismatch","address",n.address)}const a={address:c,privateKey:s};if(at(n,"x-ethers.version:string")==="0.1"){const d=t.slice(32,64),f=at(n,"x-ethers.mnemonicCiphertext:data!"),E=at(n,"x-ethers.mnemonicCounter:data!"),O=new en(d,E);a.mnemonic={path:at(n,"x-ethers.path:string")||Ta,locale:at(n,"x-ethers.locale:string")||"en",entropy:me(Oe(O.decrypt(f)))}}return a}function ys(n){const e=at(n,"crypto.kdf:string");if(e&&typeof e=="string"){if(e.toLowerCase()==="scrypt"){const t=at(n,"crypto.kdfparams.salt:data!"),o=at(n,"crypto.kdfparams.n:int!"),s=at(n,"crypto.kdfparams.r:int!"),c=at(n,"crypto.kdfparams.p:int!");Z(o>0&&!(o&o-1),"invalid kdf.N","kdf.N",o),Z(s>0&&c>0,"invalid kdf","kdf",e);const a=at(n,"crypto.kdfparams.dklen:int!");return Z(a===32,"invalid kdf.dklen","kdf.dflen",a),{name:"scrypt",salt:t,N:o,r:s,p:c,dkLen:64}}if(e.toLowerCase()==="pbkdf2"){const t=at(n,"crypto.kdfparams.salt:data!"),o=at(n,"crypto.kdfparams.prf:string!"),s=o.split("-").pop();Z(s==="sha256"||s==="sha512","invalid kdf.pdf","kdf.pdf",o);const c=at(n,"crypto.kdfparams.c:int!"),a=at(n,"crypto.kdfparams.dklen:int!");return Z(a===32,"invalid kdf.dklen","kdf.dklen",a),{name:"pbkdf2",salt:t,count:c,dkLen:a,algorithm:s}}}Z(!1,"unsupported key-derivation function","kdf",e)}function ms(n){return new Promise(e=>{setTimeout(()=>{e()},n)})}function Ca(n){const e=n.salt!=null?Oe(n.salt,"options.salt"):ar(32);let t=1<<17,o=8,s=1;return n.scrypt&&(n.scrypt.N&&(t=n.scrypt.N),n.scrypt.r&&(o=n.scrypt.r),n.scrypt.p&&(s=n.scrypt.p)),Z(typeof t=="number"&&t>0&&Number.isSafeInteger(t)&&(BigInt(t)&BigInt(t-1))===BigInt(0),"invalid scrypt N parameter","options.N",t),Z(typeof o=="number"&&o>0&&Number.isSafeInteger(o),"invalid scrypt r parameter","options.r",o),Z(typeof s=="number"&&s>0&&Number.isSafeInteger(s),"invalid scrypt p parameter","options.p",s),{name:"scrypt",dkLen:32,salt:e,N:t,r:o,p:s}}function _a(n,e,t,o){const s=Oe(t.privateKey,"privateKey"),c=o.iv!=null?Oe(o.iv,"options.iv"):ar(16);Z(c.length===16,"invalid options.iv length","options.iv",o.iv);const a=o.uuid!=null?Oe(o.uuid,"options.uuid"):ar(16);Z(a.length===16,"invalid options.uuid length","options.uuid",o.iv);const d=n.slice(0,16),f=n.slice(16,32),E=Oe(new en(d,c).encrypt(s)),O=ht(ft([f,E])),v={address:t.address.substring(2).toLowerCase(),id:kc(a),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:me(c).substring(2)},ciphertext:me(E).substring(2),kdf:"scrypt",kdfparams:{salt:me(e.salt).substring(2),n:e.N,dklen:32,p:e.p,r:e.r},mac:O.substring(2)}};if(t.mnemonic){const w=o.client!=null?o.client:`ethers/${Ks}`,U=t.mnemonic.path||Ta,T=t.mnemonic.locale||"en",N=n.slice(32,64),_=Oe(t.mnemonic.entropy,"account.mnemonic.entropy"),P=ar(16),K=Oe(new en(N,P).encrypt(_)),M=new Date,re="UTC--"+(M.getUTCFullYear()+"-"+ln(M.getUTCMonth()+1,2)+"-"+ln(M.getUTCDate(),2)+"T"+ln(M.getUTCHours(),2)+"-"+ln(M.getUTCMinutes(),2)+"-"+ln(M.getUTCSeconds(),2)+".0Z")+"--"+v.address;v["x-ethers"]={client:w,gethFilename:re,path:U,locale:T,mnemonicCounter:me(P).substring(2),mnemonicCiphertext:me(K).substring(2),version:"0.1"}}return JSON.stringify(v)}function Da(n,e,t){t==null&&(t={});const o=En(e),s=Ca(t);return _a(Oe(Vr(o,s.salt,s.N,s.r,s.p,64)),s,n,t)}async function Pa(n,e,t){t==null&&(t={});const o=En(e),s=Ca(t);return _a(Oe(await $r(o,s.salt,s.N,s.r,s.p,64,t.progressCallback)),s,n,t)}const vo="m/44'/60'/0'/0/0",xc=new Uint8Array([66,105,116,99,111,105,110,32,115,101,101,100]),Yr=2147483648,Mc=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141");function Gn(n,e){let t="";for(;n;)t="0123456789abcdef"[n%16]+t,n=Math.trunc(n/16);for(;t.length<2*e;)t="0"+t;return"0x"+t}function Co(n){const e=Oe(n);return(function(t){const o=Oe(t);let s=Xs(o),c="";for(;s;)c=wo[Number(s%To)]+c,s/=To;for(let a=0;a<o.length&&!o[a];a++)c=wo[0]+c;return c})(ft([e,Lo(zt(zt(e)),0,4)]))}const tr={};function Ua(n,e,t,o){const s=new Uint8Array(37);n&Yr?(xe(o!=null,"cannot derive child of neutered node","UNSUPPORTED_OPERATION",{operation:"deriveChild"}),s.set(Oe(o),1)):s.set(Oe(t));for(let a=24;a>=0;a-=8)s[33+(a>>3)]=n>>24-a&255;const c=Oe(Kr("sha512",e,s));return{IL:c.slice(0,32),IR:c.slice(32)}}function La(n,e){const t=e.split("/");Z(t.length>0,"invalid path","path",e),t[0]==="m"&&(Z(n.depth===0,`cannot derive root path (i.e. path starting with "m/") for a node at non-zero depth ${n.depth}`,"path",e),t.shift());let o=n;for(let s=0;s<t.length;s++){const c=t[s];if(c.match(/^[0-9]+'$/)){const a=parseInt(c.substring(0,c.length-1));Z(a<Yr,"invalid path index",`path[${s}]`,c),o=o.deriveChild(Yr+a)}else if(c.match(/^[0-9]+$/)){const a=parseInt(c);Z(a<Yr,"invalid path index",`path[${s}]`,c),o=o.deriveChild(a)}else Z(!1,"invalid path component",`path[${s}]`,c)}return o}class qt extends Hn{publicKey;fingerprint;parentFingerprint;mnemonic;chainCode;path;index;depth;constructor(e,t,o,s,c,a,d,f,E){super(t,E),xn(e,tr,"HDNodeWallet"),kt(this,{publicKey:t.compressedPublicKey}),kt(this,{parentFingerprint:o,fingerprint:Lo(jr(zt(this.publicKey)),0,4),chainCode:s,path:c,index:a,depth:d}),kt(this,{mnemonic:f})}connect(e){return new qt(tr,this.signingKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.mnemonic,e)}#e(){const e={address:this.address,privateKey:this.privateKey},t=this.mnemonic;return this.path&&t&&t.wordlist.locale==="en"&&t.password===""&&(e.mnemonic={path:this.path,locale:"en",entropy:t.entropy}),e}async encrypt(e,t){return await Pa(this.#e(),e,{progressCallback:t})}encryptSync(e){return Da(this.#e(),e)}get extendedKey(){return xe(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),Co(ft(["0x0488ADE4",Gn(this.depth,1),this.parentFingerprint,Gn(this.index,4),this.chainCode,ft(["0x00",this.privateKey])]))}hasPath(){return this.path!=null}neuter(){return new On(tr,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,this.provider)}deriveChild(e){const t=Yt(e,"index");Z(t<=4294967295,"invalid index","index",t);let o=this.path;o&&(o+="/"+(2147483647&t),t&Yr&&(o+="'"));const{IR:s,IL:c}=Ua(t,this.chainCode,this.publicKey,this.privateKey),a=new Nt(Zr((Xs(c)+BigInt(this.privateKey))%Mc,32));return new qt(tr,a,this.fingerprint,me(s),o,t,this.depth+1,this.mnemonic,this.provider)}derivePath(e){return La(this,e)}static#t(e,t){Z(Mn(e),"invalid seed","seed","[REDACTED]");const o=Oe(e,"seed");Z(o.length>=16&&o.length<=64,"invalid seed","seed","[REDACTED]");const s=Oe(Kr("sha512",xc,o)),c=new Nt(me(s.slice(0,32)));return new qt(tr,c,"0x00000000",me(s.slice(32)),"m",0,0,t,null)}static fromExtendedKey(e){const t=lt((function(f){let E=mc;for(let O=0;O<f.length;O++)E*=To,E+=yc(f[O]);return E})(e));Z(t.length===82||Co(t.slice(0,78))===e,"invalid extended key","extendedKey","[ REDACTED ]");const o=t[4],s=me(t.slice(5,9)),c=parseInt(me(t.slice(9,13)).substring(2),16),a=me(t.slice(13,45)),d=t.slice(45,78);switch(me(t.slice(0,4))){case"0x0488b21e":case"0x043587cf":{const f=me(d);return new On(tr,vn(f),f,s,a,null,c,o,null)}case"0x0488ade4":case"0x04358394 ":if(d[0]!==0)break;return new qt(tr,new Nt(d.slice(1)),s,a,null,c,o,null,null)}Z(!1,"invalid extended key prefix","extendedKey","[ REDACTED ]")}static createRandom(e,t,o){e==null&&(e=""),t==null&&(t=vo),o==null&&(o=Dr.wordlist());const s=Xr.fromEntropy(ar(16),e,o);return qt.#t(s.computeSeed(),s).derivePath(t)}static fromMnemonic(e,t){return t||(t=vo),qt.#t(e.computeSeed(),e).derivePath(t)}static fromPhrase(e,t,o,s){t==null&&(t=""),o==null&&(o=vo),s==null&&(s=Dr.wordlist());const c=Xr.fromPhrase(e,t,s);return qt.#t(c.computeSeed(),c).derivePath(o)}static fromSeed(e){return qt.#t(e,null)}}class On extends Vo{publicKey;fingerprint;parentFingerprint;chainCode;path;index;depth;constructor(e,t,o,s,c,a,d,f,E){super(t,E),xn(e,tr,"HDNodeVoidWallet"),kt(this,{publicKey:o}),kt(this,{publicKey:o,fingerprint:Lo(jr(zt(o)),0,4),parentFingerprint:s,chainCode:c,path:a,index:d,depth:f})}connect(e){return new On(tr,this.address,this.publicKey,this.parentFingerprint,this.chainCode,this.path,this.index,this.depth,e)}get extendedKey(){return xe(this.depth<256,"Depth too deep","UNSUPPORTED_OPERATION",{operation:"extendedKey"}),Co(ft(["0x0488B21E",Gn(this.depth,1),this.parentFingerprint,Gn(this.index,4),this.chainCode,this.publicKey]))}hasPath(){return this.path!=null}deriveChild(e){const t=Yt(e,"index");Z(t<=4294967295,"invalid index","index",t);let o=this.path;o&&(o+="/"+(2147483647&t),t&Yr&&(o+="'"));const{IR:s,IL:c}=Ua(t,this.chainCode,this.publicKey,null),a=Nt.addPoints(c,this.publicKey,!0),d=vn(a);return new On(tr,d,a,this.fingerprint,me(s),o,t,this.depth+1,this.provider)}derivePath(e){return La(this,e)}}function Es(n){try{if(JSON.parse(n).encseed)return!0}catch{}return!1}function Os(n,e){const t=JSON.parse(n),o=En(e),s=wt(at(t,"ethaddr:string!")),c=wa(at(t,"encseed:string!"));Z(c&&c.length%16==0,"invalid encseed","json",n);const a=Oe(gr(o,o,2e3,32,"sha256")).slice(0,16),d=c.slice(0,16),f=c.slice(16),E=(function(v){if(v.length<16)throw new TypeError("PKCS#7 invalid length");const w=v[v.length-1];if(w>16)throw new TypeError("PKCS#7 padding byte out of range");const U=v.length-w;for(let T=0;T<w;T++)if(v[U+T]!==w)throw new TypeError("PKCS#7 invalid padding byte");return new Uint8Array(v.subarray(0,U))})(Oe(new Yo(a,d).decrypt(f)));let O="";for(let v=0;v<E.length;v++)O+=String.fromCharCode(E[v]);return{address:s,privateKey:$n(O)}}function vs(n){return new Promise(e=>{setTimeout(()=>{e()},n)})}class Hr extends Hn{constructor(e,t){typeof e!="string"||e.startsWith("0x")||(e="0x"+e),super(typeof e=="string"?new Nt(e):e,t)}connect(e){return new Hr(this.signingKey,e)}async encrypt(e,t){const o={address:this.address,privateKey:this.privateKey};return await Pa(o,e,{progressCallback:t})}encryptSync(e){return Da({address:this.address,privateKey:this.privateKey},e)}static#e(e){if(Z(e,"invalid JSON wallet","json","[ REDACTED ]"),"mnemonic"in e&&e.mnemonic&&e.mnemonic.locale==="en"){const o=Xr.fromEntropy(e.mnemonic.entropy),s=qt.fromMnemonic(o,e.mnemonic.path);if(s.address===e.address&&s.privateKey===e.privateKey)return s;console.log("WARNING: JSON mismatch address/privateKey != mnemonic; fallback onto private key")}const t=new Hr(e.privateKey);return Z(t.address===e.address,"address/privateKey mismatch","json","[ REDACTED ]"),t}static async fromEncryptedJson(e,t,o){let s=null;return gs(e)?s=await(async function(c,a,d){const f=JSON.parse(c),E=En(a),O=ys(f);if(O.name==="pbkdf2"){d&&(d(0),await ms(0));const{salt:_,count:P,dkLen:K,algorithm:M}=O,re=gr(E,_,P,K,M);return d&&(d(1),await ms(0)),Un(f,re)}xe(O.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:O});const{salt:v,N:w,r:U,p:T,dkLen:N}=O;return Un(f,await $r(E,v,w,U,T,N,d))})(e,t,o):Es(e)&&(o&&(o(0),await vs(0)),s=Os(e,t),o&&(o(1),await vs(0))),Hr.#e(s)}static fromEncryptedJsonSync(e,t){let o=null;return gs(e)?o=(function(s,c){const a=JSON.parse(s),d=En(c),f=ys(a);if(f.name==="pbkdf2"){const{salt:T,count:N,dkLen:_,algorithm:P}=f;return Un(a,gr(d,T,N,_,P))}xe(f.name==="scrypt","cannot be reached","UNKNOWN_ERROR",{params:f});const{salt:E,N:O,r:v,p:w,dkLen:U}=f;return Un(a,Vr(d,E,O,v,w,U))})(e,t):Es(e)?o=Os(e,t):Z(!1,"invalid JSON wallet","json","[ REDACTED ]"),Hr.#e(o)}static createRandom(e){const t=qt.createRandom();return e?t.connect(e):t}static fromPhrase(e,t){const o=qt.fromPhrase(e);return t?o.connect(t):o}}var Kc=It(455),ir=It(952),bs=It(770);function jc(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=(function(f,E){if(f){if(typeof f=="string")return As(f,E);var O={}.toString.call(f).slice(8,-1);return O==="Object"&&f.constructor&&(O=f.constructor.name),O==="Map"||O==="Set"?Array.from(f):O==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O)?As(f,E):void 0}})(n))||e){t&&(n=t);var o=0,s=function(){};return{s,n:function(){return o>=n.length?{done:!0}:{done:!1,value:n[o++]}},e:function(f){throw f},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,a=!0,d=!1;return{s:function(){t=t.call(n)},n:function(){var f=t.next();return a=f.done,f},e:function(f){d=!0,c=f},f:function(){try{a||t.return==null||t.return()}finally{if(d)throw c}}}}function As(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,o=Array(e);t<e;t++)o[t]=n[t];return o}function At(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var n,e,t=typeof Symbol=="function"?Symbol:{},o=t.iterator||"@@iterator",s=t.toStringTag||"@@toStringTag";function c(U,T,N,_){var P=T&&T.prototype instanceof d?T:d,K=Object.create(P.prototype);return Bt(K,"_invoke",(function(M,re,G){var D,C,j,k=0,V=G||[],ne=!1,X={p:0,n:0,v:n,a:se,f:se.bind(n,4),d:function(Y,ue){return D=Y,C=0,j=n,X.n=ue,a}};function se(Y,ue){for(C=Y,j=ue,e=0;!ne&&k&&!ce&&e<V.length;e++){var ce,ye=V[e],Ie=X.p,Re=ye[2];Y>3?(ce=Re===ue)&&(j=ye[(C=ye[4])?5:(C=3,3)],ye[4]=ye[5]=n):ye[0]<=Ie&&((ce=Y<2&&Ie<ye[1])?(C=0,X.v=ue,X.n=ye[1]):Ie<Re&&(ce=Y<3||ye[0]>ue||ue>Re)&&(ye[4]=Y,ye[5]=ue,X.n=Re,C=0))}if(ce||Y>1)return a;throw ne=!0,ue}return function(Y,ue,ce){if(k>1)throw TypeError("Generator is already running");for(ne&&ue===1&&se(ue,ce),C=ue,j=ce;(e=C<2?n:j)||!ne;){D||(C?C<3?(C>1&&(X.n=-1),se(C,j)):X.n=j:X.v=j);try{if(k=2,D){if(C||(Y="next"),e=D[Y]){if(!(e=e.call(D,j)))throw TypeError("iterator result is not an object");if(!e.done)return e;j=e.value,C<2&&(C=0)}else C===1&&(e=D.return)&&e.call(D),C<2&&(j=TypeError("The iterator does not provide a '"+Y+"' method"),C=1);D=n}else if((e=(ne=X.n<0)?j:M.call(re,X))!==a)break}catch(ye){D=n,C=1,j=ye}finally{k=1}}return{value:e,done:ne}}})(U,N,_),!0),K}var a={};function d(){}function f(){}function E(){}e=Object.getPrototypeOf;var O=[][o]?e(e([][o]())):(Bt(e={},o,function(){return this}),e),v=E.prototype=d.prototype=Object.create(O);function w(U){return Object.setPrototypeOf?Object.setPrototypeOf(U,E):(U.__proto__=E,Bt(U,s,"GeneratorFunction")),U.prototype=Object.create(v),U}return f.prototype=E,Bt(v,"constructor",E),Bt(E,"constructor",f),f.displayName="GeneratorFunction",Bt(E,s,"GeneratorFunction"),Bt(v),Bt(v,s,"Generator"),Bt(v,o,function(){return this}),Bt(v,"toString",function(){return"[object Generator]"}),(At=function(){return{w:c,m:w}})()}function Bt(n,e,t,o){var s=Object.defineProperty;try{s({},"",{})}catch{s=0}Bt=function(c,a,d,f){function E(O,v){Bt(c,O,function(w){return this._invoke(O,v,w)})}a?s?s(c,a,{value:d,enumerable:!f,configurable:!f,writable:!f}):c[a]=d:(E("next",0),E("throw",1),E("return",2))},Bt(n,e,t,o)}function Is(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,o)}return t}function Rs(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Is(Object(t),!0).forEach(function(o){$c(n,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Is(Object(t)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(t,o))})}return n}function $c(n,e,t){return(e=Ga(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _r(n){return _r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_r(n)}function Fa(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Ss(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,Ga(o.key),o)}}function Ba(n,e,t){return e&&Ss(n.prototype,e),t&&Ss(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Ga(n){var e=(function(t,o){if(_r(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var c=s.call(t,o);if(_r(c)!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(t)})(n,"string");return _r(e)=="symbol"?e:e+""}function Ns(n,e,t,o,s,c,a){try{var d=n[c](a),f=d.value}catch(E){return void t(E)}d.done?e(f):Promise.resolve(f).then(o,s)}function Nr(n){return function(){var e=this,t=arguments;return new Promise(function(o,s){var c=n.apply(e,t);function a(f){Ns(c,o,s,a,d,"next",f)}function d(f){Ns(c,o,s,a,d,"throw",f)}a(void 0)})}}var ka=[],bo=!1,xa="0.1.6";function Vc(n){return new Promise(function(e,t){ka.push({task:n,resolve:e,reject:t}),Ma()})}function Ma(){return Ka.apply(this,arguments)}function Ka(){return(Ka=Nr(At().m(function n(){var e,t,o;return At().w(function(s){for(;;)switch(s.p=s.n){case 0:if(!bo){s.n=1;break}return s.a(2);case 1:if(e=ka.shift()){s.n=2;break}return s.a(2);case 2:return bo=!0,s.p=3,s.n=4,e.task();case 4:t=s.v,e.resolve(t),s.n=6;break;case 5:s.p=5,o=s.v,e.reject(o);case 6:return s.p=6,bo=!1,Ma(),s.f(6);case 7:return s.a(2)}},n,null,[[3,5,6,7]])}))).apply(this,arguments)}var ws=(function(){function n(a,d){var f,E=this,O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Fa(this,n),this.applicationId=a,this.providerId=d,this.sessionId="",this.signature="",this.timestamp=Date.now().toString(),this.parameters={},this.context={contextAddress:"0x0",contextMessage:"sample context"},this.redirectUrl="",this.sdkVersion="ext-".concat(xa),this.resolvedProviderVersion="",this.jsonProofResponse=!1,this.extensionID=O.extensionID||"",this.providerVersion=O.providerVersion||"",this.acceptAiProviders=!!O.acceptAiProviders,this.callbackUrl=O.callbackUrl||"",this._backgroundInitialized=!1,this._ctx=null,this._listeners={started:new Set,completed:new Set,error:new Set,progress:new Set},this._boundWindowListener=this._handleWindowMessage.bind(this),window.addEventListener("message",this._boundWindowListener),this._mode=typeof chrome<"u"&&chrome.runtime&&((f=location)===null||f===void 0?void 0:f.protocol)==="chrome-extension:"?"extension":"web",this._mode==="extension"){this._boundChromeHandler=function(v){var w=v||{},U=w.action,T=w.data,N=w.error,_=T==null?void 0:T.sessionId;if(!E.sessionId||E.sessionId===_)if(U==="PROOF_SUBMITTED"){var P=(T==null?void 0:T.formattedProofs)||(T==null?void 0:T.proof)||T;E._emit("completed",P)}else U!=="PROOF_SUBMISSION_FAILED"&&U!=="PROOF_GENERATION_FAILED"||E._emit("error",N||new Error("Verification failed"))};try{chrome.runtime.onMessage.addListener(this._boundChromeHandler)}catch{}}}return Ba(n,[{key:"setAppCallbackUrl",value:function(a){var d=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!a||typeof a!="string")throw new Error("callbackUrl must be a non-empty string");this.callbackUrl=a,this.jsonProofResponse=!!d}},{key:"setRedirectUrl",value:function(a){if(!a||typeof a!="string")throw new Error("redirectUrl must be a non-empty string");this.redirectUrl=a}},{key:"addContext",value:function(a,d){if(!a||!d)throw new Error("Both address and message are required");this.context={contextAddress:String(a),contextMessage:String(d)}}},{key:"setParams",value:function(a){if(!a||_r(a)!=="object")throw new Error("params must be an object");this.parameters=Rs(Rs({},this.parameters),a)}},{key:"getStatusUrl",value:function(){if(!this.sessionId)throw new Error("Session not initialized");return ir.Sn.STATUS_URL(this.sessionId)}},{key:"on",value:function(a,d){var f=this;if(!this._listeners[a])throw new Error("Unknown event: ".concat(a));return this._listeners[a].add(d),function(){return f.off(a,d)}}},{key:"off",value:function(a,d){this._listeners[a]&&this._listeners[a].delete(d)}},{key:"startVerification",value:(c=Nr(At().m(function a(){var d=this;return At().w(function(f){for(;;)if(f.n===0)return f.a(2,Vc(function(){return d._startVerificationInternal()}))},a)})),function(){return c.apply(this,arguments)})},{key:"cancel",value:(s=Nr(At().m(function a(){var d,f=this,E=arguments;return At().w(function(O){for(;;)switch(O.n){case 0:if(d=E.length>0&&E[0]!==void 0?E[0]:5e3,this.sessionId){O.n=1;break}return O.a(2);case 1:return O.a(2,new Promise(function(v){var w=!1,U=f.on("error",function(){w||(w=!0,U(),v(!0))});window.postMessage({action:ir.vQ.CANCEL_VERIFICATION,messageId:f.sessionId,extensionID:f.extensionID},"*"),setTimeout(function(){w||(U(),v(!1))},d)}))}},a,this)})),function(){return s.apply(this,arguments)})},{key:"_startVerificationInternal",value:(o=Nr(At().m(function a(){var d,f,E=this;return At().w(function(O){for(;;)switch(O.n){case 0:if(this.sessionId){O.n=1;break}throw new Error("Session not initialized");case 1:if(this.signature){O.n=2;break}throw new Error("Signature not set");case 2:return d={sessionId:this.sessionId,providerId:this.providerId,applicationId:this.applicationId,signature:this.signature,timestamp:this.timestamp,callbackUrl:this.callbackUrl||"",context:JSON.stringify(this.context||{}),parameters:this.parameters||{},redirectUrl:this.redirectUrl||"",acceptAiProviders:!!this.acceptAiProviders,sdkVersion:this.sdkVersion,providerVersion:this.providerVersion||"",resolvedProviderVersion:this.resolvedProviderVersion||"",jsonProofResponse:!!this.jsonProofResponse},f=this.sessionId,O.a(2,new Promise(function(v,w){var U=E.on("started",function(){}),T=E.on("completed",function(P){_(),v(P)}),N=E.on("error",function(P){_(),w(P)}),_=function(){U&&U(),T&&T(),N&&N()};if(E._mode==="extension")try{chrome.runtime.sendMessage({action:"START_VERIFICATION",source:"content-script",target:"background",data:d},function(P){P&&P.success&&E._emit("started",{sessionId:E.sessionId,messageId:f})})}catch(P){E._emit("error",P instanceof Error?P:new Error(String(P)))}else{if(!E.extensionID)return void E._emit("error",new Error("extensionID is required when running on a web page"));window.postMessage({action:ir.vQ.START_VERIFICATION,messageId:f,data:d,extensionID:E.extensionID},"*")}}))}},a,this)})),function(){return o.apply(this,arguments)})},{key:"dispose",value:function(){var a;if(window.removeEventListener("message",this._boundWindowListener),this._boundChromeHandler&&(a=chrome)!==null&&a!==void 0&&(a=a.runtime)!==null&&a!==void 0&&(a=a.onMessage)!==null&&a!==void 0&&a.removeListener)try{chrome.runtime.onMessage.removeListener(this._boundChromeHandler)}catch{}this._listeners.started.clear(),this._listeners.completed.clear(),this._listeners.error.clear(),this._listeners.progress.clear()}},{key:"_initSession",value:(t=Nr(At().m(function a(d){var f,E;return At().w(function(O){for(;;)switch(O.n){case 0:return O.n=1,fetch("".concat(ir.fn,"/api/sdk/init/session/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});case 1:return f=O.v,O.n=2,f.json().catch(function(){return{}});case 2:if(E=O.v,f.ok){O.n=3;break}throw new Error((E==null?void 0:E.message)||"Failed to initialize session");case 3:return O.a(2,E)}},a)})),function(a){return t.apply(this,arguments)})},{key:"_emit",value:function(a,d){if(this._listeners[a]){var f,E=jc(this._listeners[a]);try{for(E.s();!(f=E.n()).done;){var O=f.value;try{O(d)}catch{}}}catch(v){E.e(v)}finally{E.f()}}}},{key:"_handleWindowMessage",value:function(a){if(a.source===window){var d=a.data||{},f=d.action,E=d.messageId,O=d.data,v=d.error;if(!this.sessionId||this.sessionId===E)if(f!==ir.vQ.VERIFICATION_COMPLETED)f!==ir.vQ.VERIFICATION_FAILED?f!==ir.vQ.VERIFICATION_STARTED||this._emit("started",{sessionId:this.sessionId,messageId:E}):this._emit("error",v||new Error("Verification failed"));else{var w=(O==null?void 0:O.proofs)||(O==null?void 0:O.formattedProofs)||O;this._emit("completed",w)}}}}],[{key:"init",value:(e=Nr(At().m(function a(d,f,E){var O,v,w,U,T,N,_,P=arguments;return At().w(function(K){for(;;)switch(K.n){case 0:if(O=P.length>3&&P[3]!==void 0?P[3]:{},d&&typeof d=="string"){K.n=1;break}throw new Error("applicationId must be a non-empty string");case 1:if(f&&typeof f=="string"){K.n=2;break}throw new Error("appSecret must be a non-empty string");case 2:if(E&&typeof E=="string"){K.n=3;break}throw new Error("providerId must be a non-empty string");case 3:return v=new n(d,E,O),w='{"providerId":"'.concat(E,'","timestamp":"').concat(v.timestamp,'"}'),U=ht(new TextEncoder().encode(w)),T=new Hr(f),K.n=4,T.signMessage(Oe(U));case 4:return N=K.v,v.signature=N,K.n=5,v._initSession({providerId:E,appId:d,timestamp:v.timestamp,signature:N,versionNumber:v.providerVersion||""});case 5:return _=K.v,v.sessionId=_.sessionId||"",v.resolvedProviderVersion=_.resolvedProviderVersion||"",K.a(2,v)}},a)})),function(a,d,f){return e.apply(this,arguments)})},{key:"fromJsonString",value:function(a){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=typeof a=="string"?JSON.parse(a):a;return this.fromConfig(f,d)}},{key:"fromConfig",value:function(a){var d,f,E,O,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!a||_r(a)!=="object")throw new Error("invalid config");var w=new n(String(a.applicationId||""),String(a.providerId||""),v||{});return w.sessionId=String(a.sessionId||""),w.signature=String(a.signature||""),w.timestamp=String(a.timeStamp||a.timestamp||Date.now()),w.parameters=a.parameters||{},w.context=a.context||w.context,w.callbackUrl=String(a.appCallbackUrl||a.callbackUrl||""),w.jsonProofResponse=!!((d=a.jsonProofResponse)!==null&&d!==void 0?d:w.jsonProofResponse),w.resolvedProviderVersion=String(a.resolvedProviderVersion||""),w.providerVersion=String(a.providerVersion||""),w.redirectUrl=String(a.redirectUrl||""),w.acceptAiProviders=!!((f=(E=a.acceptAiProviders)!==null&&E!==void 0?E:(O=a.options)===null||O===void 0?void 0:O.acceptAiProviders)!==null&&f!==void 0?f:w.acceptAiProviders),v!=null&&v.extensionID&&(w.extensionID=String(v.extensionID)),w}}]);var e,t,o,s,c})(),Hc=(function(){return Ba(function e(){var t;Fa(this,e),this._backgroundInitialized=!1,this._ctx=null,this._mode=typeof chrome<"u"&&chrome.runtime&&((t=location)===null||t===void 0?void 0:t.protocol)==="chrome-extension:"?"extension":"web"},[{key:"initializeBackground",value:function(){if(this._backgroundInitialized)return this._ctx;try{var e=(0,Kc.A)();return this._backgroundInitialized=!0,this._ctx=e,e}catch(t){throw t}}},{key:"isExtensionInstalled",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.extensionID,o=e.timeout,s=o===void 0?500:o;return new Promise(function(c){var a="reclaim-check-".concat(Date.now()),d=function(f){var E,O;f.source===window&&((E=f.data)===null||E===void 0?void 0:E.action)===ir.vQ.EXTENSION_RESPONSE&&((O=f.data)===null||O===void 0?void 0:O.messageId)===a&&(window.removeEventListener("message",d),c(!!f.data.installed))};window.addEventListener("message",d),window.postMessage({action:ir.vQ.CHECK_EXTENSION,extensionID:t,messageId:a},"*"),setTimeout(function(){window.removeEventListener("message",d),c(!1)},s)})}},{key:"getVersion",value:function(){return xa}},{key:"init",value:(n=Nr(At().m(function e(t,o,s){var c,a=arguments;return At().w(function(d){for(;;)switch(d.n){case 0:return c=a.length>3&&a[3]!==void 0?a[3]:{},d.n=1,ws.init(t,o,s,c);case 1:return d.a(2,d.v)}},e)})),function(e,t,o){return n.apply(this,arguments)})},{key:"fromJsonString",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ws.fromJsonString(e,t)}},{key:"setLogConfig",value:function(e){bs.Ow.setConfig(e)}},{key:"getLogConfig",value:function(){return bs.Ow.config}}]);var n})(),qc=new Hc;console.log("Background script starting...");try{qc.initializeBackground(),console.log("Background initialized")}catch(n){console.error("Background script error:",n)}
